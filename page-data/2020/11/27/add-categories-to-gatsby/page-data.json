{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2020/11/27/add-categories-to-gatsby/","result":{"data":{"site":{"siteMetadata":{"title":"Harry Park's Blog"}},"markdownRemark":{"id":"00edf7cd-ab07-55b1-b18c-73c70995d515","excerpt":"…","html":"<p>목표는 두 가지이다. 모든 카테고리 이름, 카테고리당 포스트 갯수를 보여주는 <code class=\"language-text\">/categories</code> 페이지를 만드는 것, 그리고 각 카테고리에 해당하는 포스트의 목록을 보여주는 <code class=\"language-text\">/category/{카테고리이름}</code> 페이지를 만드는 것이다. 삽질한 것을 모두 기록하기는 어려우나 큰 삽질은 아니었고, 혹시 새롭게 삽질을 시작하시려는 분들에게 조금이나마 도움이 될까 싶어 그 과정을 최대한 자세히 기록 하려고 한다.</p>\n<p><code class=\"language-text\">/categories</code>는 단독의 Page이다. 그래서 <code class=\"language-text\">src/pages/categories.js</code>를 구현하면 된다. 하지만 이와는 다르게 <code class=\"language-text\">/category/{카테고리이름}</code>는 카테고리 종류 갯수 만큼의 페이지가 만들어 지며 빌드 타임에 Page들이 유동적으로 생성되어야 한다. 따라서 각 Page를 찍어낼 때 사용하는 Template 하나 <code class=\"language-text\">src/templates/category.js</code>가 필요하다.</p>\n<h2 id=\"완성된-categories-페이지\" style=\"position:relative;\"><a href=\"#%EC%99%84%EC%84%B1%EB%90%9C-categories-%ED%8E%98%EC%9D%B4%EC%A7%80\" aria-label=\"완성된 categories 페이지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>완성된 /categories 페이지</h2>\n<p>완성된 <code class=\"language-text\">/categories</code> 페이지는 다음과 같다. 아직 스타일링은 되지 않았지만, 카테고리 목록과 포스트의 갯수를 표시해 준다. 카테고리 중 하나를 클릭하면 <code class=\"language-text\">/categories/{카테고리이름}</code> 페이지로 이동한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 325px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dd4c653d9c51a1d19152e46430498348/c989d/categories.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB92Up2C5Ng0f/xAAaEAEAAgMBAAAAAAAAAAAAAAABAAIDECAx/9oACAEBAAEFAndgYY6zyPX/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAACAQUAAAAAAAAAAAAAAAAAATIQESEwMf/aAAgBAQAGPwLtiVMpEVo//8QAHxABAAICAAcAAAAAAAAAAAAAAQARECEgMVFxkfDx/9oACAEBAAE/IWDuVn2Ya3O+HgAAoJb0lvV8Q5cH/9oADAMBAAIAAwAAABBfBzD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRAgQXGR/9oACAEBAAE/EAHhasz9gaXfOnJBEEbGCiPo5qc6uGWBQGgiCUp6twnRfT//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"categories\"\n        title=\"categories\"\n        src=\"/static/dd4c653d9c51a1d19152e46430498348/c989d/categories.jpg\"\n        srcset=\"/static/dd4c653d9c51a1d19152e46430498348/e07e9/categories.jpg 200w,\n/static/dd4c653d9c51a1d19152e46430498348/c989d/categories.jpg 325w\"\n        sizes=\"(max-width: 325px) 100vw, 325px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"완성된-categories카테고리이름-페이지\" style=\"position:relative;\"><a href=\"#%EC%99%84%EC%84%B1%EB%90%9C-categories%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC%EC%9D%B4%EB%A6%84-%ED%8E%98%EC%9D%B4%EC%A7%80\" aria-label=\"완성된 categories카테고리이름 페이지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>완성된 /categories/{카테고리이름} 페이지</h2>\n<p>특정 카테고리를 누르면 해당 카테고리에 해당하는 포스트의 리스트가 나온다. 당연하게도 포스트 제목을 클릭하면 포스트를 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 758px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad9251ef11a10d6d047614ba0d60ac30/ad059/category.category_name.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdtuhFB//8QAGRAAAQUAAAAAAAAAAAAAAAAAEQABICEi/9oACAEBAAEFArOkxh//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAAAICExoeH/2gAIAQEABj8Cwmh0f//EABoQAAICAwAAAAAAAAAAAAAAABEhAAEQUYH/2gAIAQEAAT8htguoGiEMeQPP/9oADAMBAAIAAwAAABBTD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQABAwUAAAAAAAAAAAAAAAERACExEEFhwfD/2gAIAQEAAT8QiQN7Zd0ISn5zQFipyQpGZvr/AP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"category category name\"\n        title=\"category category name\"\n        src=\"/static/ad9251ef11a10d6d047614ba0d60ac30/ad059/category.category_name.jpg\"\n        srcset=\"/static/ad9251ef11a10d6d047614ba0d60ac30/e07e9/category.category_name.jpg 200w,\n/static/ad9251ef11a10d6d047614ba0d60ac30/066f9/category.category_name.jpg 400w,\n/static/ad9251ef11a10d6d047614ba0d60ac30/ad059/category.category_name.jpg 758w\"\n        sizes=\"(max-width: 758px) 100vw, 758px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"가장-먼저-할-일-frontmatter에-categories를-추가하자\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%9E%A5-%EB%A8%BC%EC%A0%80-%ED%95%A0-%EC%9D%BC-frontmatter%EC%97%90-categories%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EC%9E%90\" aria-label=\"가장 먼저 할 일 frontmatter에 categories를 추가하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가장 먼저 할 일: Frontmatter에 categories를 추가하자</h2>\n<p>markdown 문서의 가장 위쪽에 있는 메타 데이터를 <code class=\"language-text\">frontmatter</code>라고 한다. 예제로 제공된 markdown 문서에서는 다음과 같이 <code class=\"language-text\">title</code>, <code class=\"language-text\">date</code>, <code class=\"language-text\">decription</code> 항목만 들어 있다.</p>\n<ul>\n<li>gatsby-starter-blog에서 제공된 예제 문서의 frontmatter:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token hr punctuation\">---</span>\ntitle: Hello World\ndate: \"2015-05-01T22:12:03.284Z\"\n<span class=\"token title important\">description: \"Hello World\"\n<span class=\"token punctuation\">---</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>여기에 <code class=\"language-text\">categories</code> 혹은 <code class=\"language-text\">tags</code>를 추가하려면 어떻게 해야할까? 설치된 플러그인에 의해서 frontmatter의 schema도 재구성되는 것은 아닐까? Gatsby를 처음 접한 상태에서는 이런 의문이 생길 수 있다. 하지만 틀렸고, 답은 의외로 간단했다. <strong>그냥 추가하면 된다</strong>. 의심스럽다면 다음과 같이 테스트 한 뒤 GraphQL 콘솔에서 값을 확인해 보자.</p>\n<ul>\n<li>테스트용 frontmatter:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-md line-numbers\"><code class=\"language-md\"><span class=\"token hr punctuation\">---</span>\ntitle: Hello World\ndate: 2015-11-25\ndescription: \"Hello World\"\ntest: \"haha\"\ntest1: huhu\ntest2: [\"a\", \"r\", \"r\"]\ntest3:\n  <span class=\"token list punctuation\">-</span> a\n  <span class=\"token list punctuation\">-</span> r\n  <span class=\"token title important\">- r\n<span class=\"token punctuation\">---</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>GraphQL콘솔에서 보여주는 결과는 Gatby와 GraphQL을 처음 접한 나에게는 상당히 놀라웠다. 미리 스키마가 정해져 있을 것이라는 예상은 한방에 무너졌고, 어떤 항목이든 자유롭게 추가될 수 있다는 사실을 알게 됐다. <a href=\"./https://www.gatsbyjs.com/docs/schema-customization/\">Customizing the GraphQL Schema</a>에 의하면 <strong>Gatsby는 <code class=\"language-text\">schema</code>에 대한 자동 추론 기능을 제공한다.</strong></p>\n<ul>\n<li>테스트용 frontmatter에 의해 추가된 항목\n<img src=\"./frontmatters.jpg\"></li>\n<li>GraphQL 조회 결과</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"fields\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"slug\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/2020/11/26/add-categories-to-gatsby/\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"frontmatter\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"test3\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"test2\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"test1\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"huhu\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2015-11-25T00:00:00.000Z\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>한가지 감탄했던 점은 데이터의 형식이 지나치게 엄격하지 않다는 것이다. 예를 들면 <code class=\"language-text\">array</code>를 표현할 수 있는 방법도 여러가지이며, 따옴표 사용여부와 관계 없이 문자열로 인식한다는 점, 날짜를 ISO형식(<code class=\"language-text\">2015-11-25T00:00:00.000Z</code>)으로 입력하거나 단축 형식(<code class=\"language-text\">2015-11-25</code>)으로 입력해도 문제 없이 인식한다는 점 등이 있다.</p>\n<h2 id=\"1-categories-페이지를-만들기\" style=\"position:relative;\"><a href=\"#1-categories-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"1 categories 페이지를 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. /categories 페이지를 만들기</h2>\n<h2 id=\"javascript를-이용해서-srcpagescategoriesjs를-만들자\" style=\"position:relative;\"><a href=\"#javascript%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-srcpagescategoriesjs%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"javascript를 이용해서 srcpagescategoriesjs를 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScript를 이용해서 src/pages/categories.js를 만들자</h2>\n<p>카테고리 리스트를 보여주는 단독 페이지로 아래와 같이 <code class=\"language-text\">JavaScript</code> 코드를 만들 수 있었다. 핵심적인 부분은 <code class=\"language-text\">graphql</code> 태그를 이용해서 데이터를 조회하고 그 결과를 <code class=\"language-text\">function component</code>의 인자로 받고 그 중 하나인 <code class=\"language-text\">data</code>를 이용해서 페이지를 렌더링하는 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">\"prop-types\"</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> kebabCase <span class=\"token keyword\">from</span> <span class=\"token string\">\"lodash/kebabCase\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/seo\"</span>\n\n<span class=\"token comment\">// data, location은 pageProps 중 일부이며, 다양한 프로퍼티를 넘겨주지만,</span>\n<span class=\"token comment\">// JavaScript이기 때문에 어떤 항목들이 제공되는지 알기 어렵다.</span>\n<span class=\"token comment\">// data에는 쿼리에 대한 결과, location은 uri, port를 포함한 page location 관련정보가 파싱되어있다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Categories</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Layout location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token constant\">SEO</span> title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Categories<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n          <span class=\"token punctuation\">{</span><span class=\"token comment\">/* group 배열에 그룹화된 카테고리 정보가 들어 있으므로 */</span><span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Array.map()을 이용해서 리스트 아이템인 &lt;li> 태그를 생성한다. */</span><span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>group<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">category</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>category<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span><span class=\"token comment\">/* 카테고리 명은 공백을 포함한 일반 문자열이기 때문에 underscore의 kebabCase함수로 변환해 준다.*/</span><span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/categories/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span>category<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>category<span class=\"token punctuation\">.</span>totalCount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// React에서 제공해주는 타입 체킹 수단. 런타임에서 체크한다.</span>\n<span class=\"token comment\">// TypeScript로 바꿔야겠다고 마음 먹게 해준 코드.</span>\nCategories<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  site<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    siteMetadata<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      title<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  data<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    allMarkdownRemark<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      totalCount<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n      group<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>\n        PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          fieldValue<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n          totalCount<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>isRequired\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Categories\n\n<span class=\"token comment\">// graphql 태그를 이용해 페이지를 렌더링에 필요한 데이터를 쿼리한다.</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(limit: 2000) {\n      group(field: frontmatter___categories) {\n        fieldValue\n        totalCount\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>하지만 다른 사람이 만든 라이브러리를 가져다 쓰는 입장에서 JavaScript는 조금 답답한 면이 있다. Gatsby가 function component의 인자로 넘겨주는 <code class=\"language-text\">data</code>와 <code class=\"language-text\">location</code> 외에 어떤 프로퍼티들이 있는지 알 수 없다. TypeScript의 경우에는 마우스 오버 또는 <code class=\"language-text\">F12</code>키를 통해 얻은 타입 정보를 통해서 많은 정보를 얻을 수 있어 문서를 읽기 전에 짐작할 수 있는 부분이 상당하며, tslint가 개발자의 실수를 상당 부분 차단해 준다.</p>\n<p>위 소스에서 사용된 JavaScript의 또다른 단점은 <code class=\"language-text\">React</code>에서 제공하는 <a href=\"https://ko.reactjs.org/docs/typechecking-with-proptypes.html\">Type checking</a> 기능을 사용하기 위해서 <code class=\"language-text\">Categories.propTypes</code>를 수동으로 구성하는 코드의 구성과 관리가 그리 만만해 보이지 않는 다는 점이다. 이해하기 어려운 코드는 아니나 TypeScript를 사용한다면 불필요한 코드라고 여겨지기 때문이다.</p>\n<h2 id=\"더-늦기-전에-typescript로-갈아타자-srcpagescategoriestsx\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EB%8A%A6%EA%B8%B0-%EC%A0%84%EC%97%90-typescript%EB%A1%9C-%EA%B0%88%EC%95%84%ED%83%80%EC%9E%90-srcpagescategoriestsx\" aria-label=\"더 늦기 전에 typescript로 갈아타자 srcpagescategoriestsx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>더 늦기 전에 TypeScript로 갈아타자: src/pages/categories.tsx</h2>\n<p>Gatsby는 TypeScript를 지원하며 example code도 제공한다. <code class=\"language-text\">package.json</code>에서는 찾아볼 수 없지만 <code class=\"language-text\">node_modules</code>에서 TypeScript 관련 package가 설치 되어 있는 것으로부터 Gatsby가 TypeScript를 기본적으로 지원하기 위한 package를 의존성 목록에 포함하고 있다는 사실을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// IMPORT BLOCK: PageProps를 gatsby로부터 가져온다는 것 빼고 동일</span>\n\n<span class=\"token comment\">// JS 방식보다는 훨씬 낫지만, 이것도 없앨 수 있을까?</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">DataProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  site<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    siteMetadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  allMarkdownRemark<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    group<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        fieldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n        totalCount<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// React.FC&lt;PageProps&lt;DataProps>>는 React 에서 제공하는 Function component 타입으로,</span>\n<span class=\"token comment\">// DataProps를 제공함으로써 완성된다.</span>\n<span class=\"token keyword\">const</span> Categories<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>PageProps<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DataProps</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">> = ({ data, location }) => (\n  // Layout 블럭: 동일\n)\n\n// propTypes 블럭: 삭제.\n\n// pageQuery 블럭: 동일</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>일부를 제외하면 JavaScript와 흡사하다. 하지만 TypeScript의 suggestion, Go to definition, tslint 등 IDE에서 제공하는 장점을 누릴 수 있다. 뿐만 아니라 장기적으로는 모던 IDE들에서 제공하는 강력한 Refactoring기능을 사용할 수 있다는 점이 훨씬 더 큰 장점이라 볼 수 있다.</p>\n<p>JS 코드와 눈에 띄는 차이점은 <code class=\"language-text\">Categories.propTypes</code>를 작성할 필요가 없다는 것이다. 그보다 훨씬 간단하지만 <code class=\"language-text\">DataProps</code>를 <code class=\"language-text\">Type</code> 혹은 <code class=\"language-text\">Interface</code> 형식으로 작성해서 함수 타입 <code class=\"language-text\">React.FC&lt;PageProps&lt;&gt;&gt;</code>에 제공해야 한다. <code class=\"language-text\">PageProps</code>에는 <code class=\"language-text\">uri</code>, <code class=\"language-text\">location</code> 등 page에 대한 다양한 정보가 들어 있는데 그 중하나가 쿼리 결과를 담은 <code class=\"language-text\">data</code> 프로퍼티이고 쿼리를 작성한 개발자가 타입까지 제공하는 것이 당연하다.</p>\n<p>하지만 기왕 편해진 김에 <code class=\"language-text\">DataProps</code> 타입을 선언하는 부분 마저도 자동으로 생성할 수는 없을까?</p>\n<h2 id=\"graphql을-분석하여-type을-자동으로-생성해주는-플러그인을-설치하자\" style=\"position:relative;\"><a href=\"#graphql%EC%9D%84-%EB%B6%84%EC%84%9D%ED%95%98%EC%97%AC-type%EC%9D%84-%EC%9E%90%EB%8F%99%EC%9C%BC%EB%A1%9C-%EC%83%9D%EC%84%B1%ED%95%B4%EC%A3%BC%EB%8A%94-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%EC%84%A4%EC%B9%98%ED%95%98%EC%9E%90\" aria-label=\"graphql을 분석하여 type을 자동으로 생성해주는 플러그인을 설치하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL을 분석하여 Type을 자동으로 생성해주는 플러그인을 설치하자</h2>\n<p>검색 결과 몇 개의 관련 플러그인을 발견했다. 그 중 하나는 <code class=\"language-text\">graphql-code-generator</code>를 기반으로 만든 <code class=\"language-text\">gatsby-plugin-graphql-codegen</code> 플러그인이다. <code class=\"language-text\">graphql-code-generator</code>는 <a href=\"https://github.com/dotansimha/graphql-code-generator\">github page</a>를 통해서 활발하게 소스 커밋이 이루어지고 있는 것을 확인했고, 심지어 <a href=\"https://graphql-code-generator.com/\">공식 페이지</a>에서 데모도 제공하므로 보통 이 정도면 당장 설치해도 무방하다는 느낌이 든다. 다음과 같이 플러그인을 설치한다.</p>\n<ul>\n<li>설치:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> typescript gatsby-plugin-graphql-codegen</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>gatsby-config.js에 추가:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span>default <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-graphql-codegen</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>getsby develop 실행 후 가장 마지막에 보이는 메세지:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">info <span class=\"token punctuation\">[</span>gatsby-plugin-graphql-codegen<span class=\"token punctuation\">]</span> definition <span class=\"token keyword\">for</span> queries <span class=\"token punctuation\">..</span>. has been updated at graphql-types.ts</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>설치 후 그냥 <code class=\"language-text\">gatsby develop</code>를 실행해 보면 실행 후 전과는 다르게 가장 아래에 <code class=\"language-text\">graphql-types.ts</code>가 생성되었다는 메세지가 보임다는 것을 알 수 있다. 해당 파일을 열어보면 상당한 양의 type 선언 코드가 들어 있다. 이 것을 <code class=\"language-text\">import</code> 해서 사용 하면 될 것 같지만, 처음에는 그 중 어떤 tpye을 사용해야할지 해야할지 알 수 없다. 그래서 page query의 일부인 <code class=\"language-text\">fieldValue</code>로 검색하다 보니 <code class=\"language-text\">Unnamed_1_Query</code> 가 눈에 띄었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Unnamed_1_Query</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  site<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Maybe<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> siteMetadata<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Maybe<span class=\"token operator\">&lt;</span>Pick<span class=\"token operator\">&lt;</span>SiteSiteMetadata<span class=\"token punctuation\">,</span> <span class=\"token string\">\"title\"</span><span class=\"token operator\">>></span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  allMarkdownRemark<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    group<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>\n      Pick<span class=\"token operator\">&lt;</span>MarkdownRemarkGroupConnection<span class=\"token punctuation\">,</span> <span class=\"token string\">\"fieldValue\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"totalCount\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">GraphQL</code> 콘솔을 통해서도 확인할 수 있는데 다음과 같은 방식으로 query에 이름을 붙여줄 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ts line-numbers\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query Categories {\n    ...\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>수정 후에 다시 <code class=\"language-text\">graphql-types.ts</code>를 열어 보면 <code class=\"language-text\">Unnamed_1_Query</code>가 <code class=\"language-text\">CategoriesQuery</code> 으로 바뀌어 있는 것을 알 수 있다. 이제부터는 페이지 쿼리 결과 타입을 수동으로 선언해 주지 않아도 되니 신나는 일이다. 게다가 이 파일은 문서 혹은 소스를 수정할 때마다 재생성 되므로 Gatsby의 static page generating 방식이 얼마나 훌륭한지 보여주는 단적인 예이다.</p>\n<h2 id=\"srcpagescategoriestsx의-완성-버전\" style=\"position:relative;\"><a href=\"#srcpagescategoriestsx%EC%9D%98-%EC%99%84%EC%84%B1-%EB%B2%84%EC%A0%84\" aria-label=\"srcpagescategoriestsx의 완성 버전 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>src/pages/categories.tsx의 완성 버전</h2>\n<p>아래와 같이 <code class=\"language-text\">CategoriesQuery</code> 타입을 <code class=\"language-text\">PageProps</code>에 전달하는 것을 끝으로 아름다운 TypeScript 페이지가 완성 된다. 다만 이 플러그인이 빌드 속도를 많이 떨어뜨린다는 단점이 있었다. 따라서 코딩 작업을 할때는 켜고 문서작업을 할때는 꺼 두는 것을 추천한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-tsx line-numbers\"><code class=\"language-tsx\"><span class=\"token comment\">// gatsby-plugin-graphql-codegen이 생성해 준 타입을 가져 온다.</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CategoriesQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../graphql-types\"</span>\n\n<span class=\"token comment\">// 더 이상 DataProps를 선언할 필요가 없다. PageProps&lt;>에 그대로 넣어 준다.</span>\n<span class=\"token keyword\">const</span> Categories<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>PageProps<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CategoriesQuery</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">> = </span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 생략</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"2-categories카테고리-이름-페이지를-만들기\" style=\"position:relative;\"><a href=\"#2-categories%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EC%9D%B4%EB%A6%84-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"2 categories카테고리 이름 페이지를 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. /categories/{카테고리 이름} 페이지를 만들기</h2>\n<p>단일 페이지 생성으로 끝났던 위의 과정과는 조금 다르게 <code class=\"language-text\">/categories/{카테고리 이름}</code> 페이지를 만들기 위해서는 <code class=\"language-text\">gatsby-node.js</code>도 수정해야 한다. 그 이유는 카테고리 갯수에 따라 컴파일 타임에 유동적으로 페이지가 생성되고 각 페이지가 <code class=\"language-text\">slug</code>를 가지게 되기 때문이다. Gatsby는 이런 류의 페이지를 생성하기 위한 API를 제공하는데 그 것이 이미 <code class=\"language-text\">gatsby-node.js</code>에서 사용되고 있는 <code class=\"language-text\">createPages</code> 이다. 이 함수를 수정하는 것으로 이 작업을 시작한다.</p>\n<h2 id=\"기본-쿼리를-수정한다\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%BF%BC%EB%A6%AC%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%9C%EB%8B%A4\" aria-label=\"기본 쿼리를 수정한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 쿼리를 수정한다</h2>\n<p><code class=\"language-text\">gatsby-starter-blog</code>에서 제공하는 <code class=\"language-text\">gatsby-node.js</code>의 <code class=\"language-text\">createPages</code> 구현 안쪽에 기본적으로 다음과 같은 쿼리가 들어 있다. 이 곳에 카테고리를 그룹화해서 가져오는 쿼리를 추가 해야 한다. 하지만 <code class=\"language-text\">allMarkdownRemark</code> 만을 가져오는 쿼리이기 때문에 ‘쿼리를 한벌 더 만들어야 하나?’ 심지어 ’<code class=\"language-text\">createPages</code> 함수를 하나 더 구현해야 하나?’ 고민에 빠지게 될 수 있다.</p>\n<ul>\n<li>gatsby-node.js의 createPages의 일부:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 모든 마크다운 블로그 포스트를 날짜로 소트해서 가져온다.</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">GraphQL</span><span class=\"token punctuation\">(</span>\n  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    {\n      allMarkdownRemark(\n        sort: { fields: [frontmatter___date], order: ASC }\n        limit: 1000\n      ) {\n        nodes {\n          id\n          fields {\n            slug\n          }\n        }\n      }\n    }\n  </span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>여기서 개발자는 몇가지 선택을 할 수 있다.</p>\n<p>구글에서 <code class=\"language-text\">gatsby category</code> 키워드로 검색하면 가장 상단에 나오는 아티클 <a href=\"https://www.samdawson.dev/article/gatsby-categories\">Creating category pages for gatsby markdown blogs</a>에서는 위 쿼리는 그대로 두고 쿼리를 통해서 나온 결과를 코드를 통해 조작하는 방식으로 진행한다. 요약하자면 카테고리의 그룹화를 위해 모든 포스트의 카테고리 문자열을 모아서 <code class=\"language-text\">Set</code>에 넣는 방식으로 중복을 제거한다. 그리고 그 중복이 제거된 카테고리 Set을 이용해 페이지를 생성한다.</p>\n<p>경험에 비추어 위 방식은 그렇게 좋아 보이지 않았다. GraphQL에 대해서 아직 잘 모르지만 분명 쿼리를 통해서 카테고리를 그룹화할 수 있을 것이라 예상되기 때문이다. <a href=\"https://www.gatsbyjs.com/docs/adding-tags-and-categories-to-blog-posts/#reach-skip-nav\">Creating Tags Pages for Blog Posts</a>에서는 위 방식과 다르게 <a href=\"https://hasura.io/docs/1.0/graphql/core/queries/multiple-queries.html\">multiple query</a>를 이용해서 기존의 쿼리에 카테고리 그룹화를 위한 쿼리를 하나 추가한다.</p>\n<ul>\n<li>gatsby-node.js의 createPages의 쿼리 수정:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\"># 모든 마크다운 문서를 가져온다</span>\n  <span class=\"token attr-name\">postsRemark</span><span class=\"token punctuation\">:</span> allMarkdownRemark<span class=\"token punctuation\">(</span>\n    <span class=\"token attr-name\">sort</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">fields</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>frontmatter___date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">order</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">ASC</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token attr-name\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    nodes <span class=\"token punctuation\">{</span>\n      id\n      fields <span class=\"token punctuation\">{</span>\n        slug\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\"># 모든 카테고리를 그룹화하고, 각 카테고리에에 해당하는 포스트의 갯수를 가져온다</span>\n  <span class=\"token attr-name\">categoriesGroup</span><span class=\"token punctuation\">:</span> allMarkdownRemark <span class=\"token punctuation\">{</span>\n    group<span class=\"token punctuation\">(</span><span class=\"token attr-name\">field</span><span class=\"token punctuation\">:</span> frontmatter___categories<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      fieldValue\n      totalCount\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 쿼리는 컴파일 타임에 1회 실행되며, 내부적으로 <code class=\"language-text\">postsRemark</code>과 <code class=\"language-text\">categoriesGroup</code>은 순차적으로 쿼리되고 한꺼번에 결과를 리턴한다. 개발자는 결과를 이용해서 각자의 slug를 가진 pages들을 <code class=\"language-text\">createPate</code> API를 이용해 생성하면 된다.</p>\n<h2 id=\"createpages를-수정하자\" style=\"position:relative;\"><a href=\"#createpages%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%98%EC%9E%90\" aria-label=\"createpages를 수정하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>createPages를 수정하자</h2>\n<p>아래의 코드는 쿼리로 가져온 결과물 <code class=\"language-text\">categoriesGroup</code>을 이용해서 각각의 page를 만드는 코드를 추가한 것이다.</p>\n<ul>\n<li>gatsby-node.js에 추가한 부분:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> reporter <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/// 중략</span>\n  <span class=\"token keyword\">const</span> categoriesTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"src/templates/category.tsx\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 카테고리 데이터를 가져온다.</span>\n  <span class=\"token keyword\">const</span> categories <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>categoriesGroup<span class=\"token punctuation\">.</span>group\n\n  <span class=\"token comment\">// 카테고리 마다 하나의 페이지를 만든다.</span>\n  categories<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">category</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 생성할 페이지들의 slug는 카테고리 이름을 kebab base로 변환한 것이다.</span>\n      path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/categories/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>_<span class=\"token punctuation\">.</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 페이지를 생성하기 위해서 사용하는 template component</span>\n      component<span class=\"token operator\">:</span> categoriesTemplate<span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 페이지에 전달하고 싶은 값이 있으면 context에 추가한다. 여기서는 카테고리 이름을 넣었다.</span>\n      context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        category<span class=\"token operator\">:</span> category<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"srctemplatescategoriestsx를-만들자\" style=\"position:relative;\"><a href=\"#srctemplatescategoriestsx%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"srctemplatescategoriestsx를 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>src/templates/categories.tsx를 만들자</h2>\n<p>TypeScript 환경이 셋팅되었으니 이제 <code class=\"language-text\">/categories/{카테고리이름}</code>을 위한 템플릿 페이지도 만든다. 다시 한번 고맙게도 <code class=\"language-text\">gatsby-plugin-graphql-codegen</code>가 쿼리 결과 뿐만 아니라 <code class=\"language-text\">context</code> 로 전달한 값들 까지도 type을 생성해 준다는 점이다. 또 한가지 알고 넘어가야 할 점은 PageQuery로 전달되는 <code class=\"language-text\">arguement</code> 인 <code class=\"language-text\">$category</code> 가 <code class=\"language-text\">page context</code>로부터 전달된다는 점이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">import { graphql, Link, PageProps } from &quot;gatsby&quot;\nimport React from &quot;react&quot;\nimport Layout from &quot;../components/layout&quot;\nimport SEO from &quot;../components/seo&quot;\nimport { CategoryQuery, SitePageContext } from &quot;../../graphql-types&quot;\n\n// SitePageContext로부터 context를 이용해 전달한 값들의 type을 얻을 수 있다.\nconst Category: React.FC&lt;PageProps&lt;CategoryQuery, SitePageContext&gt;&gt; = ({\n  data,\n  location,\n  pageContext,\n}) =&gt; {\n  const { title } = data.site.siteMetadata\n  const { category } = pageContext // gatsby-node.js의 createPage에서 넣어준 카테고리 이름.\n  const { edges, totalCount } = data.allMarkdownRemark\n  const tagHeader = `${totalCount} post${totalCount === 1 ? &quot;&quot; : &quot;s&quot;\n    } categorized with &quot;${category}&quot;`\n\n  return (\n    &lt;Layout location={location} title={title}&gt;\n      &lt;SEO title={title} /&gt;\n      &lt;h1&gt;{tagHeader}&lt;/h1&gt;\n      &lt;ul&gt;\n        {/* 각 카테고리에 해당하는 포스트의 목록을 출력한다. */}\n        {edges.map(({ node }) =&gt; {\n          const { slug } = node.fields\n          const { title } = node.frontmatter\n          return (\n            &lt;li key={slug}&gt;\n              &lt;Link to={slug}&gt;{title}&lt;/Link&gt;\n            &lt;/li&gt;\n          )\n        })}\n      &lt;/ul&gt;\n      &lt;Link to=&quot;/&quot;&gt;Go back to the homepage&lt;/Link&gt;\n    &lt;/Layout&gt;\n  )\n}\n\nexport default Category\n\n// 쿼리의 argument인 $category는 page context로 전달 받는다.\nexport const pageQuery = graphql`\n  query Category($category: String) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(\n      limit: 2000\n      sort: { fields: [frontmatter___date], order: DESC }\n      filter: { frontmatter: { categories: { in: [$category] } } }\n    ) {\n      totalCount\n      edges {\n        node {\n          fields {\n            slug\n          }\n          frontmatter {\n            title\n          }\n        }\n      }\n    }\n  }\n`\n\n끝.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"Gatsby Blog에 Category를 추가하기","date":"November 26, 2020","description":null},"tableOfContents":"<ul>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#%EC%99%84%EC%84%B1%EB%90%9C-categories-%ED%8E%98%EC%9D%B4%EC%A7%80\">완성된 /categories 페이지</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#%EC%99%84%EC%84%B1%EB%90%9C-categories%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC%EC%9D%B4%EB%A6%84-%ED%8E%98%EC%9D%B4%EC%A7%80\">완성된 /categories/{카테고리이름} 페이지</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#%EA%B0%80%EC%9E%A5-%EB%A8%BC%EC%A0%80-%ED%95%A0-%EC%9D%BC-frontmatter%EC%97%90-categories%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EC%9E%90\">가장 먼저 할 일: Frontmatter에 categories를 추가하자</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#1-categories-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\">1. /categories 페이지를 만들기</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#javascript%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-srcpagescategoriesjs%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%9E%90\">JavaScript를 이용해서 src/pages/categories.js를 만들자</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#%EB%8D%94-%EB%8A%A6%EA%B8%B0-%EC%A0%84%EC%97%90-typescript%EB%A1%9C-%EA%B0%88%EC%95%84%ED%83%80%EC%9E%90-srcpagescategoriestsx\">더 늦기 전에 TypeScript로 갈아타자: src/pages/categories.tsx</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#graphql%EC%9D%84-%EB%B6%84%EC%84%9D%ED%95%98%EC%97%AC-type%EC%9D%84-%EC%9E%90%EB%8F%99%EC%9C%BC%EB%A1%9C-%EC%83%9D%EC%84%B1%ED%95%B4%EC%A3%BC%EB%8A%94-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%EC%84%A4%EC%B9%98%ED%95%98%EC%9E%90\">GraphQL을 분석하여 Type을 자동으로 생성해주는 플러그인을 설치하자</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#srcpagescategoriestsx%EC%9D%98-%EC%99%84%EC%84%B1-%EB%B2%84%EC%A0%84\">src/pages/categories.tsx의 완성 버전</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#2-categories%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EC%9D%B4%EB%A6%84-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\">2. /categories/{카테고리 이름} 페이지를 만들기</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#%EA%B8%B0%EB%B3%B8-%EC%BF%BC%EB%A6%AC%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%9C%EB%8B%A4\">기본 쿼리를 수정한다</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#createpages%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%98%EC%9E%90\">createPages를 수정하자</a></li>\n<li><a href=\"/2020/11/27/add-categories-to-gatsby/#srctemplatescategoriestsx%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%9E%90\">src/templates/categories.tsx를 만들자</a></li>\n</ul>"},"previous":{"fields":{"slug":"/2020/11/26/deep-javascript-chapter-1/"},"frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기, Chapter 1. 웹과 자바 스크립트"}},"next":{"fields":{"slug":"/2020/11/26/deep-javascript-chapter-4/"},"frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기, Chapter 4. 프로토타입과 객체지향, 그리고 상속"}}},"pageContext":{"id":"00edf7cd-ab07-55b1-b18c-73c70995d515","previousPostId":"29df105e-1835-5c64-b0c9-fcd27f310db1","nextPostId":"826951a8-04a2-52e1-9677-feab9113e4c4"}},"staticQueryHashes":["2841359383"]}