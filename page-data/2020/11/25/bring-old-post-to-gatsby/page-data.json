{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/2020/11/25/bring-old-post-to-gatsby/","result":{"data":{"site":{"siteMetadata":{"title":"Harry Park's Blog"}},"markdownRemark":{"id":"1ea04510-d86d-5c10-8cbf-fc364bd17ef0","excerpt":"과거에 작성한 와 에 저장된 포스트를 가져오는 작업을 먼저 해보기로 결정했다.  블로그의 레이아웃을 잡아가는 과정에서 몇 개 이상의 컨텐트가 필요하다고 생각했기 때문이다. 문서 자체는 markdown 파일이기에 복사 후 조금 수정해 주면 문제가 없다. 하지만 slug…","html":"<p>과거에 작성한 <code class=\"language-text\">Hexo</code>와 <code class=\"language-text\">Wordpress</code>에 저장된 포스트를 가져오는 작업을 먼저 해보기로 결정했다. <code class=\"language-text\">Gatsby</code> 블로그의 레이아웃을 잡아가는 과정에서 몇 개 이상의 컨텐트가 필요하다고 생각했기 때문이다. 문서 자체는 markdown 파일이기에 복사 후 조금 수정해 주면 문제가 없다. 하지만 slug 구성과 폴더의 구조 결정이 우선적으로 이루어져야했다.</p>\n<h2 id=\"slug란\" style=\"position:relative;\"><a href=\"#slug%EB%9E%80\" aria-label=\"slug란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Slug란?</h2>\n<p>이미 <code class=\"language-text\">slug</code>라는 단어에 이미 익숙한 사람들이 많을지 모르겠지만, 나에게는 새로운 용어 중 하나였다. wikipedia에서 문서를 찾았지만 역시 민달팽이에 대한 것이었고, url과 함께 검색한 결과로 <a href=\"https://en.wikipedia.org/wiki/Clean_URL\">Clean URL</a> 문서를 찾을 수 있었다. 이 문서를 통해서 slug의 뜻과 유래를 알 수 있었다.</p>\n<p>slug는 URL의 한 부분으로 <strong>사람이 읽기 쉬운 키워드</strong>로 페이지를 구분하게 해주는 키워드이다. 특정 리소스 혹은 파일의 이름, 페이지의 제목 등이 될 수 있다. 사람들은 이 slug를 통해서 해당 컨텐트의 내용을 제목을 짐작할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ab2b27556f655307cd864875ab7eb78/3dde1/slug.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyUlEQVQY032PywrCMBBF8///IVIXbi1FFxYEbRKs6EbFTXXRFm0mthGrmcS0C5/g4RAGksvcEKUueZ7f6iu+MGWpAJSUl9ZKyrI9z1+S5XLleb0kSbIsA4Cqco/yRTydTUeMBTQaUBrSaMxoyDnjfM6ZM27kMRFCpGnqMi5ZFCelahATEH0QPkAgjgO57cp1R+66+lagsYj62ZAYY5qinyDaRm3Q2vqwV0P/ulm7GbV++x0S+w/jNPquzxJV+XtNdAv+x+1sC37xALc8UnUpkmVFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slug\"\n        title=\"slug\"\n        src=\"/static/9ab2b27556f655307cd864875ab7eb78/5a190/slug.png\"\n        srcset=\"/static/9ab2b27556f655307cd864875ab7eb78/772e8/slug.png 200w,\n/static/9ab2b27556f655307cd864875ab7eb78/e17e5/slug.png 400w,\n/static/9ab2b27556f655307cd864875ab7eb78/5a190/slug.png 800w,\n/static/9ab2b27556f655307cd864875ab7eb78/3dde1/slug.png 1018w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>slug은 자동 생성되거나 직접 입력되는데, 그 간결성을 유지하기 위해서 다음과 같은 몇가지 조건을 가진다. 너무 긴 제목은 가지지 않는다. 전체가 소문자인 영문자(Latin script)이다. 인코딩 되는 문자를 피하기 우위해서 (보기싫은 <code class=\"language-text\">%20</code>) 각 단어는 하이픈 <code class=\"language-text\">-</code> 혹은 언더스코어 <code class=\"language-text\">-</code>로 연결한다. 구두점을 사용하지 않으며 접속사 처럼 없어도 되는 단어는 생략한다.</p>\n<h2 id=\"slug라는-단어의-유래\" style=\"position:relative;\"><a href=\"#slug%EB%9D%BC%EB%8A%94-%EB%8B%A8%EC%96%B4%EC%9D%98-%EC%9C%A0%EB%9E%98\" aria-label=\"slug라는 단어의 유래 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Slug라는 단어의 유래</h2>\n<p>언제나 하는 고민이지만, 뜻을 알았으니 여기서 그만 멈춰야할지 잠시 고민 했다. 하지만 결국 단어의 유래도 알아보기로 한다. slug는 원래 뉴스 출판 업계에서 사용하고 있는 용어이다. 그에 대한 wikipedia 문서도 따로 존재했다. <a href=\"https://en.wikipedia.org/wiki/Slug_(publishing)\">Slug_(publishing)</a></p>\n<p>slug는 뉴스기사를 분류하는데 도움이되는 핵심 키워드이다. 예를 들면, 오바마 대통령에 대한 기사는 <code class=\"language-text\">OBAMA</code>라는 slug를 사용했다고 한다. slug의 또 다른 기능은 또 편집자에게 기사에 대한 특정 정보를 알려주기 위한 용도로도 사용 되었다. 예를 들면 <code class=\"language-text\">AM</code>은 아침 뉴스를 위한 기사, <code class=\"language-text\">CX</code> 이전 기사에 대한 수정(correction)을 나타낸다.</p>\n<p>하지만 그 것의 어원은 따로 있었다. 과거 디지털 프린터의 시대가 오기 전에는 <code class=\"language-text\">Hot metal typesetting</code> 방식(한국어로는?)으로 조판을 하던 시절에 인쇄를 위한 판을 만들기 위해서 작업자가 일일이 금속으로 만들어진 활자를 배치해야 했는데, 그 금속 조각을 <code class=\"language-text\">slug</code>라고 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 592px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa347c3e30e08f460723b747c9d5579f/694d5/slugs2-tmagArticle.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdaehwkcH//EABoQAAICAwAAAAAAAAAAAAAAAAIDABEBEBP/2gAIAQEAAQUCJgjLY2CNY5Bev//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAICAwAAAAAAAAAAAAAAAAABECEiMTL/2gAIAQEABj8CMaRts5n/xAAgEAABAgUFAAAAAAAAAAAAAAABABEQITFBUWFxkaHw/9oACAEBAAE/Ibg+yPcPqqXk7JKA3szpxH//2gAMAwEAAgADAAAAENMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHxABAAIBAwUAAAAAAAAAAAAAARExACFBcRBhgZGh/9oACAEBAAE/EJSZjahy0ZoBX7weG/CDG1ppYHoKMWGdNDLKb2fMen//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slugs2 tmagArticle\"\n        title=\"slugs2 tmagArticle\"\n        src=\"/static/fa347c3e30e08f460723b747c9d5579f/694d5/slugs2-tmagArticle.jpg\"\n        srcset=\"/static/fa347c3e30e08f460723b747c9d5579f/e07e9/slugs2-tmagArticle.jpg 200w,\n/static/fa347c3e30e08f460723b747c9d5579f/066f9/slugs2-tmagArticle.jpg 400w,\n/static/fa347c3e30e08f460723b747c9d5579f/694d5/slugs2-tmagArticle.jpg 592w\"\n        sizes=\"(max-width: 592px) 100vw, 592px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"gatsby-starter-blog의-기본-slug\" style=\"position:relative;\"><a href=\"#gatsby-starter-blog%EC%9D%98-%EA%B8%B0%EB%B3%B8-slug\" aria-label=\"gatsby starter blog의 기본 slug permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-starter-blog의 기본 Slug</h2>\n<p><code class=\"language-text\">gatsby-starter-blog</code>는 <code class=\"language-text\">content/blog</code> 폴더를 기반으로 폴더의 계층 구조와 파일명을 통해서 slug를 생성한다. 그 예시는 다음과 같다.</p>\n<table>\n<thead>\n<tr>\n<th>폴더 구조</th>\n<th>Slug</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>content/blog/2020-11-25/hello-world.md</td>\n<td>/2020-11-25/hello-world</td>\n</tr>\n<tr>\n<td>content/blog/hello-world.md</td>\n<td>/hello-world</td>\n</tr>\n<tr>\n<td>content/blog/hello-world/index.md</td>\n<td>/hello-world</td>\n</tr>\n</tbody>\n</table>\n<p>위에서 볼 수 있듯이 특정 디렉토리 안에서 <code class=\"language-text\">hello-world/index.md</code>과 <code class=\"language-text\">hello-world.md</code> 는 동일한 slug를 생성한다. 하지만 이렇게 slug 이름이 겹칠 경우에는 <code class=\"language-text\">hello-world.md</code>가 우선순위를 갖도록 만들어져 있다. 그래서 <code class=\"language-text\">hello-world/index.md</code>는 페이지가 생성 되지 않으니 주의해야 한다.</p>\n<h2 id=\"어떻게-slug를-구성할까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-slug%EB%A5%BC-%EA%B5%AC%EC%84%B1%ED%95%A0%EA%B9%8C\" aria-label=\"어떻게 slug를 구성할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떻게 slug를 구성할까?</h2>\n<p>전에 사용하던 방식도 있었고 여러 블로그를 둘러봤지만 가장 마음에 드는 형식은 만든 날짜를 path로써 포함 시키는 것이다. 예를 들면, <code class=\"language-text\">2020/11/25/hello-world</code> 이렇게 구성하는 것이다. 물론 조금만 손 보면 <code class=\"language-text\">2020-11-25-hello-world</code>, <code class=\"language-text\">20201125/hello-world</code> 등 그 어느 것도 가능하게 만들 수 있다는 점이 <code class=\"language-text\">gatsby</code>의 장점이다.</p>\n<p><code class=\"language-text\">2020/11/25/hello-world</code>의 slug 구성은 잘 디자인된 REST API 처럼 보인다. 단지 그렇게 보여서가 아니라, <code class=\"language-text\">2020</code> 혹은 <code class=\"language-text\">2020/11</code> 과 같이 접근을 하면 2020년에 작성된 모든 포스트 혹은 2020년 11월에 작성된 모든 포스트를 그룹화해서 보여줄 수 있도록 확장하기 용이하기 때문이다. 나중에 알게 된 사실은 Wordpress에서 사용하던 방식이라는 것이다.</p>\n<h2 id=\"중첩된-폴더-이용하기\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EC%B2%A9%EB%90%9C-%ED%8F%B4%EB%8D%94-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"중첩된 폴더 이용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>중첩된 폴더 이용하기</h2>\n<p>이 부분에서 조금 고민이 있었는데, 폴더 구조 자체를 <code class=\"language-text\">2020/11/25/hello-world/index.md</code>와 같이 구성하면 현재 상태에서 아무것도 수정할 필요가 없다는 것이 장점이다. 하지만 직접 사용해본 경험에 의하면 폴더가 깊게 중첩될수록 관리가 귀찮아진다. <code class=\"language-text\">index.md</code> 파일 하나를 편집하기 위해서는 VS Code를 열고 7번의 클릭을 해야 한다.</p>\n<p>폴더를 아예 없애는 것 또한 단점이 존재한다. 이미지나 첨부파일들은 별도의 폴더로 나누어져야 관리가 편리하다. 그렇지 않으면 모든 파일들에 겹치지 않는 이름을 할당해야 하는데 가끔씩 그냥 <code class=\"language-text\">temp.jpg</code> 처럼 막 지어쓰고 싶을 때가 있지 않은가?</p>\n<h2 id=\"폴더는-최대한-flat하게-만든다\" style=\"position:relative;\"><a href=\"#%ED%8F%B4%EB%8D%94%EB%8A%94-%EC%B5%9C%EB%8C%80%ED%95%9C-flat%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A0%EB%8B%A4\" aria-label=\"폴더는 최대한 flat하게 만든다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>폴더는 최대한 flat하게 만든다</h2>\n<p>어떻게 구성해야할 것인지에 대해서 다음과 같은 결정을 내렸다.</p>\n<ul>\n<li>폴더는 <code class=\"language-text\">2020-11-25</code> 와 같이 날짜 형식으로만 만든다. 이하 서브폴더는 만들지 않는다.</li>\n<li>즉, 각 포스트를 위한 폴더는 만들지 않는다. <code class=\"language-text\">hello-world.md</code> 와 같이 제목을 가진 파일로 만든다. 경험상 하루에 다수의 포스팅을 하는 경우는 극히 드물기 때문이다. 또한 다른 마이그레이션이 있을 때 모든 파일명이 <code class=\"language-text\">index.md</code>일 경우 엄청난 작업이 예상되기 때문이다.</li>\n<li>slug 는 <code class=\"language-text\">YYYY/MM/DD/title</code>로 구성한다.</li>\n</ul>\n<h2 id=\"graphql-데이터-살펴보기\" style=\"position:relative;\"><a href=\"#graphql-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"graphql 데이터 살펴보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL 데이터 살펴보기</h2>\n<p>드디어 코딩 타임이다. 위에서 결정한 구성을 구현하기 위해서는 slug를 생성하는 코드를 만들어 넣어야 한다. <code class=\"language-text\">gatsby-node.js</code>를 살짝 훔쳐보고 slug에 대한 정보를 얻으 은 뒤 <code class=\"language-text\">GraphQL</code> 콘솔에 접속해서 slug를 조회해 본다.</p>\n<p>쿼리:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> MyQuery <span class=\"token punctuation\">{</span>\n  allMarkdownRemark <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        fields <span class=\"token punctuation\">{</span>\n          slug\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>결과:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"allMarkdownRemark\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"edges\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"slug\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/2020-11-25/deep-javascript/\"</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"fields\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"slug\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/2020-11-23/new-beginnings/\"</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"extensions\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">graphQL</code>에 대한 지식이 전무하기에 약간 이해가 되지 않는 부분들이 있지만 짐작을 해본다. 그래프라는 자료 구조를 생각해 볼때 아마도 <code class=\"language-text\">allMarkdownRemark</code>라는 <code class=\"language-text\">node</code>에 연결된 노드들이 각 마크다운 파일에 해당하는 노드일 것이다. 그 자식 노드들은 그래프에서 간선을 나타내는 용어인 <code class=\"language-text\">edge</code>를 모아 놓은 <code class=\"language-text\">edges</code> 배열에 각각 연결이 되어 있을 것이다.그래서 <code class=\"language-text\">edges { node }</code> 라는 쿼리가 있는 것이 아닐까 짐작해 본다. 아무튼 slug는 <code class=\"language-text\">node</code>의 <code class=\"language-text\">fields</code> 안에 있고 그 것을 조작해주면 된다.</p>\n<h2 id=\"gatsby-nodejs-에-코드-추가\" style=\"position:relative;\"><a href=\"#gatsby-nodejs-%EC%97%90-%EC%BD%94%EB%93%9C-%EC%B6%94%EA%B0%80\" aria-label=\"gatsby nodejs 에 코드 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-node.js 에 코드 추가</h2>\n<p>사실상 코딩은 <code class=\"language-text\">replace</code> 함수를 포함한 한줄의 추가로 끝났다(머쓱). Gatsby에서 제공하는 몇몇 API들의 역할을 파악했다는 것에 더 큰 의의를 두어야겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 새로운 node가 생성될 때 호출되는 함수. node를 extend하기 위해서 이 함수를 구현해야한다.</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Gatsby는 내부적으로 redux를 통해서 상태를 관리하므로 action을 dispatch해서 상태를 변경한다.</span>\n  <span class=\"token comment\">// actions에 action들이 들어 있고 createNodeField은 그들 중 하나. node를 확장하기 위해 사용한다.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token comment\">// MarkdownRemark에 해당하는 노드 일때만 field를 추가한다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">MarkdownRemark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// createFilePath는 gatsby-source-filesystem 플러그인이 제공하는 함수로 file path를 URL로 변경해준다.</span>\n    <span class=\"token comment\">// 이 함수에서 나온 결과물이 slug가 된다. 그 것을 YYYY/MM/DD/title 형태로 바꿔준다.</span>\n    <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// NNNN-NN-NN가 등장하는 첫 패턴을 찾은 후, NNNN/NN/NN으로 변경한다.</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> filePath<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\/(\\d{4})-(\\d{2})-(\\d{2})\\/</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/$1/$2/$3/\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// node에 추가되는 slug은 이 함수에 의해 fields에 추가된다.</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> slug<span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이제 <code class=\"language-text\">/2020-11-23/new-beginnings.md</code>로 생성된 문서를 <code class=\"language-text\">/2020/11/23/new-beginnings</code> 로 접근이 가능하다.</p>\n<p>끝.</p>","frontmatter":{"title":"Gatsby Blog의 Slug를 구성하기","date":"November 25, 2020","description":null},"tableOfContents":"<ul>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#slug%EB%9E%80\">Slug란?</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#slug%EB%9D%BC%EB%8A%94-%EB%8B%A8%EC%96%B4%EC%9D%98-%EC%9C%A0%EB%9E%98\">Slug라는 단어의 유래</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#gatsby-starter-blog%EC%9D%98-%EA%B8%B0%EB%B3%B8-slug\">gatsby-starter-blog의 기본 Slug</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#%EC%96%B4%EB%96%BB%EA%B2%8C-slug%EB%A5%BC-%EA%B5%AC%EC%84%B1%ED%95%A0%EA%B9%8C\">어떻게 slug를 구성할까?</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#%EC%A4%91%EC%B2%A9%EB%90%9C-%ED%8F%B4%EB%8D%94-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0\">중첩된 폴더 이용하기</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#%ED%8F%B4%EB%8D%94%EB%8A%94-%EC%B5%9C%EB%8C%80%ED%95%9C-flat%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A0%EB%8B%A4\">폴더는 최대한 flat하게 만든다</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#graphql-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\">GraphQL 데이터 살펴보기</a></li>\n<li><a href=\"/2020/11/25/bring-old-post-to-gatsby/#gatsby-nodejs-%EC%97%90-%EC%BD%94%EB%93%9C-%EC%B6%94%EA%B0%80\">gatsby-node.js 에 코드 추가</a></li>\n</ul>"},"previous":{"fields":{"slug":"/2020/11/25/change-font-in-gatsby/"},"frontmatter":{"title":"Gatsby Blog에 구글 폰트를 입히기"}},"next":{"fields":{"slug":"/2020/11/26/deep-javascript/"},"frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기"}}},"pageContext":{"id":"1ea04510-d86d-5c10-8cbf-fc364bd17ef0","previousPostId":"da33e96a-5c01-5d17-9ed3-ca367202f37a","nextPostId":"09505bbd-c08a-542f-869f-45050c2bb165"}},"staticQueryHashes":["2841359383"]}