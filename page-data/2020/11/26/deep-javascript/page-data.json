{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/11/26/deep-javascript/","result":{"data":{"site":{"siteMetadata":{"title":"Harry Park's Blog"}},"markdownRemark":{"id":"09505bbd-c08a-542f-869f-45050c2bb165","excerpt":"201…","html":"<!--\n## Chapter\n### Sub chapter 1.1\n#### Sub chapter 1.1.1\n##### 그외의 글머리\n###### 글 머리보다 한 단계 더 들어갔을 경우\n -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 458px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 134.81012658227846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAe+EWVpkU8NqjDlf/8QAHRABAQABBAMAAAAAAAAAAAAAAgEAAxAREhMgIf/aAAgBAQABBQL0d6vTvJtkxzsx8NBWeMbf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AVyJs//EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhIDJh/9oACAEBAAY/AuDvNiV6wmy51Mf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMSBBYZH/2gAIAQEAAT8hrhbhN+x7299zaMdgvogRO6jFmvZirBAoon//2gAMAwEAAgADAAAAEH8vsP/EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAwEBPxALj//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QIaw6bAMY5f/EAB4QAQEBAAEEAwAAAAAAAAAAAAERAGEgMVGBIUGx/9oACAEBAAE/EADT96EYTvAE4xESiOXv7M6BClmgeXwhEceNE+BY09YiCEEWZW1iMnjAQQOxv//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cover\"\n        title=\"cover\"\n        src=\"/static/457c7ed45c6c1651e750714767c570eb/f7c3c/cover.jpg\"\n        srcset=\"/static/457c7ed45c6c1651e750714767c570eb/ff44c/cover.jpg 158w,\n/static/457c7ed45c6c1651e750714767c570eb/a6688/cover.jpg 315w,\n/static/457c7ed45c6c1651e750714767c570eb/f7c3c/cover.jpg 458w\"\n        sizes=\"(max-width: 458px) 100vw, 458px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>2017년에 읽었던 자바스크립트 책으로 예제코드와 본문을 완벽하게 이해하고 직접 예제코드와 글로 작성해보기로 마음 먹었었다. 이렇게 하면 완독하기가 더 쉬워지고 독서의 효과를 높일 수 있기 때문이다. 내용을 이해 했다 하더라도 나의 언어로 바꾸어 재정리 하지 않으면 효과가 매우 떨어진다. 요약 정리만 했음에도 꽤 많은 분량이다.</p>\n<h2>Chapter 1. 웹과 자바 스크립트</h2>\n<h3>1.1. 자바스크립트의 어제와 오늘</h3>\n<p><code class=\"language-text\">alert</code> 창을 띄워 가며 디버깅 하던 시절이 있었다. 문법에러를 잡아 주지 않았기에 디버깅도 어려웠다. 지금은 다양한 디버깅 툴과 IDE 등의 등장으로 개발 환경이 확연히 달라졌다.</p>\n<h5>자바스크립트와 자바와의 관계는 햄과 햄버거의 관계이다</h5>\n<p>그럴듯한 비유이다. 둘의 이름은 공통된 부분이 있지만, 그닥 관계있는 음식은 아니다. 자바와 자바스크립트는 무관하다고 하다고 말할 수 있을 정도로 전혀 관련이 없다. 역사적으로는 Netscape가 개발한 Livescript를 Sun Microsystems가 협업하면서 전략적으로 이름을 Javascript로 바꾼 것이다.</p>\n<h3>1.2. 웹 개발 방법론의 변화</h3>\n<h5>2000년 이전의 웹</h5>\n<p>HTML 파일로 제공하는 텍스트 정보가 주를 이루었다. 또한 대부분 정적인 정보를 제공하는 웹페이지가 주를 이루었다. 포털이나 이메일 처럼 동적인 페이지를 생성하는 서버는 Perl과 CGI(Common Gateway Interface)를 구현하여 동적인 데이터를 제공했다.</p>\n<h5>2000년 이후의 웹</h5>\n<p>다양한 웹 언어가 활성화 되기 시작했다. (e.g. ASP, JSP, PHP) HTML(클라이언트측 코드)과 PHP(서버측 코드)와 섞어서 코딩했다. 서버와 클라이언트 코드가 실행되는 시점이 헷갈려 소스를 읽는데 어려움이 있었다. 본인이 개발한 소스도 다시 보면 어려웠다.</p>\n<h5>AJAX의 등장</h5>\n<p>구글이 2005년에 공개한 구글맵에서 AJAX(Asynchronous Javascript And XML)를 이용했다. 화면의 리플레시 없이도 서버로부터 받은 정보를 표시할 수 있었다. DHTML도 활발하게 이용되기 시작했다. AJAX를 위한 함수 이름은 XMLHttpRequest()로, HTML을 XML규격에 맞추기 위한 표준화 작업도 진행 됐다. AJAX를 통해서 html 페이지의 일부를 받아서 직접 보여주었다.</p>\n<h5>JSON 규격의 사용</h5>\n<p>AJAX를 통해서 웹페이지의 일부가 아닌 JSON 규격의 텍스트를 받는 방식으로 변경됐다. 웹서비스라고 불리는 API들이 등장하기 시작하면서 JSON이 일반화 되시 시작했다(구글 API). 개발 프레임워크와 라이브러리들이 등장하기 시작했다(JQuery, Prototype). HTML 5 표준화작업으로 넘어가기 시작했다.</p>\n<h5>Javascript와 CSS의 역할 변화</h5>\n<p>Javascript는 웹언어의 보조 수단에서 데이터 처리와 렌더링을 담당하는 쪽으로 바뀌었고, CSS는 폰트, 테두리 등을 바꾸기 위해 사용했지만 포지셔닝, 애니메이션, 3D, 마우스 오버 등 다양한 효과가 추가 됐다.</p>\n<h2>Chapter 2. 자바스크립트의 스코프와 클로저</h2>\n<h3>2.1. 스코프란?</h3>\n<p>다른 프로그래밍 언어를 다루다가 자바 스크립트를 접하게 된 프로그래머가 반드시 한번 빠지게 되는 함정이 있다.</p>\n<blockquote>\n<p>자바 스크립트는 일반적인 프로그래밍 언어의 블록 스코프를 따르지 않는다.</p>\n</blockquote>\n<h4>2.1.1. 스코프의 생성</h4>\n<p>자바 스크립트에서 스코프를 생성하는 구문은 세가지가 있다.</p>\n<h5>function을 이용한 스코프 생성</h5>\n<p>foo() 내부에서 선언된 변수를 외부에서 접근할 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> <span class=\"token string\">\"Can you access me?\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>type <span class=\"token keyword\">of</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//\"undefined\"</span></code></pre></div>\n<h5>catch을 이용한 스코프 생성</h5>\n<p>catch의 인자(이 경우에는 err)만 내부 스코프에 포함 된다. 선언된 변수(이 경우에는 test)는 외부 스코프에 포함된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">exception</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fake exception\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token string\">\"can you see me?\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>type <span class=\"token keyword\">of</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"undefined\"</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"can you see me?\"</span></code></pre></div>\n<h5>with을 이용한 스코프 생성</h5>\n<p>with 구문도 catch 처럼 인자가 내부 스코프에 포함 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">with</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token constant\">A</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You can't see me\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> <span class=\"token constant\">B</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"but you can see me\"</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"You can't see me\"</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">B</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"but you can see me\"</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">B</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"but you can see me\"</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// error!!</span></code></pre></div>\n<h4>2.1.2. 스코프의 지속성</h4>\n<p>다른 언어와 다른 JavaScript 만의 강점 중 하나는, 스코프가 지속 된다는 점이다. 함수가 선언된 곳이 아닌 전혀 다른 곳에서 함수가 호출될 수 있어서, 해당 함수가 참조하는 스코프를 지속할 필요가 있다.</p>\n<h4>2.1.3. with 구문</h4>\n<p>with 구문은 파라미터로 받은 객체를 스코프 체인에 추가하여 동작한다. 즉, 해당 오브젝트는 블록 안에서 사용되는 변수에 대한 탐색의 대상이 되는 상위 스코프로 추가되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">\"sd\"</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token string\">\"20\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">with</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span> <span class=\"token comment\">// sd 20</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>2.1.4. with를 사용하지 말아야하는 이유</h4>\n<h5>첫째, with를 사용한 코드는 모호성을 가진다</h5>\n<p>다음 소스에서 value가 인자의 value인지, obj.value를 의도한 것인지 모호하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">something</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">with</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token comment\">// value?? obj.value??</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>둘째, with는 표준에서의 제외된다</h5>\n<p>위와 같음 모호성으로 인하여 with문 사용을 자제 하라고 권하고 있으며, ECMAScript 6에서는 deprecated될 예정이다.</p>\n<h5>셋째, with의 대상 객체는 속성을 추가 할 수 없다</h5>\n<p>with에 style 객체를 사용할 경우, 새로운 속성을 추가할 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">with</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myDiv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  background <span class=\"token operator\">=</span> <span class=\"token string\">\"yellow\"</span> <span class=\"token comment\">// 이미 존재하는 속성인 경우 OK.</span>\n  border <span class=\"token operator\">=</span> <span class=\"token string\">\"1px soild black\"</span> <span class=\"token comment\">// border 속성을 새로 추가하려고 의도한 경우, global 변수로 선언되어 버린다.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2.2. 클로저란?</h3>\n<p>이 책에서는 클로저를 다음과 같이 정의한다.</p>\n<blockquote>\n<p>“특정 함수가 참조하는 변수들이 선언된 lexical scope는 계속 유지되는데, 그 함수와 스코프를 묶어서 클로저라고 한다.”</p>\n</blockquote>\n<p>사실 좀 와닿지 않고, 이해하기 어렵다. 그래서 다른 곳에서 정의를 찾아 보았다. <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures\">MDN 문서</a>는 다음과 같이 정의한다.</p>\n<blockquote>\n<p>“클로저는 독립적인 (자유) 변수 (지역적으로 사용되지만, 둘러싼 범위 안에서 정의된 변수)를 참조하는 함수들이다. 다른 말로 하면, 이 함수들은 그들이 생성된 환경을 ‘기억’한다.”</p>\n</blockquote>\n<p>쉽게 말해서, 클로저는 함수와 함수가 선언된 문법적 환경의 조합이라 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">counterGenerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">++</span>count\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> counterA <span class=\"token operator\">=</span> <span class=\"token function\">counterGenerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> counterB <span class=\"token operator\">=</span> <span class=\"token function\">counterGenerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">counterA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">counterA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">counterB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">counterB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2;</span></code></pre></div>\n<p>위의 예제에서 count 변수의 참조는 리턴된 익명함수 내에서 계속 유지된다. 즉 count 값을 증가 시킬 수 있고, 리턴 받아서 출력해볼 수도 있다.</p>\n<h4>2.2.1. 클로저 쉽게 이해하기</h4>\n<h5>[개인적인 조사] 새로운 스코프는 “선언” 시에 생성 되는 것인가? “실행” 시에 생성되는 것인가?</h5>\n<p>Javascript는 Lexical Scope를 이용한다. 이 것의 의미를 정확하게 파악할 필요가 있다. 자세한 것은 <a href=\"https://github.com/getify/You-Dont-Know-JS\">“You don’t know JS”</a>를 참고하고, 번역판도 훑어볼 예정이다.</p>\n<h6>a. Lexing</h6>\n<p>전통적인 컴파일러는 다음의 세가지 과정을 거쳐 코드를 실행가능한 코드로 바꾼다. <strong>lexing -> parsing -> code-generation</strong>. Lexing이란 string으로 되어있는 코드를 의미 있는 단위로 tokenizing하는 것을 뜻한다.</p>\n<h6>b. Lexical Scope</h6>\n<p>lexical scope라는 것은 lex-time에 정의되는 Scope를 뜻한다. lex-time이란 위에서 말한 lexing 과정을 말하는 것이다. 즉, 어떤 모양의 Scope chain을 가질지 이 때 결정되는 것이다. static scope와 같은 말이며, 반대 되는 개념으로는 dynamic scope가 있다.</p>\n<h6>c. Scope Chain</h6>\n<p>엔진이 코드를 실행 시, 어디서 변수를 찾을지를 말해주는 정보이다. <a href=\"https://github.com/getify/You-Dont-Know-JS\">“You don’t know JS”</a>에 따르면, 변수를 어디에 저장하고 어디서 찾을 것인가에 대한 룰의 집합이라고 한다.</p>\n<p>Javascript는 function기반으로 scope를 생성하므로, global scope 를 base로 하여 function과 nested function이 선언될 때마다 하위 Scope를 만들게 된다. 즉, 다음의 코드에서 scope는 3단계가 되며, <code class=\"language-text\">console.log</code>에서 변수 <code class=\"language-text\">a</code>를 찾기 위해서 3번의 탐색을 거치게 된다.</p>\n<ol>\n<li>global scope</li>\n<li>foo() scope</li>\n<li>bar() scope</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> b <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">debugger</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1 2 4 12</span></code></pre></div>\n<p>scope는 chrome devtools에서 확인할 수 있다. <code class=\"language-text\">debugger</code> 키워드를 이용해서 함수 내에서 실행을 중단 시킨 후 다음과 같이 scope 항목에서 확인이 가능하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.22784810126582%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB00lEQVQoz22S2ZKbMBBF+f//yXPyMG+JXbEH7zYyYhFgdgMCjHXTgMcZL1Sd6qK7dHXV3VrI1kiNOQJ3Bj+Yom0PAI5QN7rOgFIMwplit/6AbU7g8CkCsUAjPTSVeEArij0uYol4/wds/xOm+QFZfqIMJ5DnJYkfBjzfxGK1h/AClGWFoiiRZRmRP6DZno/wHGM+Yfj1Q8fvv1swm8O0LBxtG14U4pTGMDnHYrmCRblRKEOe5y9oYXSECHQIfw0hDqikjaZzIFsbNVHVFqqGI0l8uLaPpu7IsaJWdG/RXOpdnumQ9QrVRUcip6jaBR1it+caQ6yqCDHPEfoJXNfBtbvi3adJaQ2H+sYrZeCqjCGO/yN9vShC+CIipwmSNIG6Kqr955sgvwuOrkZ60TH2HGj6GSKvIGdvjaGua1wul0dBdXf3XcwY6p5nYrPdUfTo+dUg8IWUcsiHYfgs+J6+nucBDMax3e1RlOVdqGmagd5d27bQ6prfGs9u8R0H5OcTrYyA4wqktDJRHFMv00HsYcplaZG6QQVGNzBK8heU4nAcRnu4wexTx2yuIwgCGlTxso+aEC44N8GYAdu2kNIEn8myFJwWfbXZYk2s1hsSPI0Tf+IfMhKP2K6AAoEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"debugger scope\"\n        title=\"debugger scope\"\n        src=\"/static/641aae640826d2453ed17865a1deaa12/f058b/debugger_scope.png\"\n        srcset=\"/static/641aae640826d2453ed17865a1deaa12/c26ae/debugger_scope.png 158w,\n/static/641aae640826d2453ed17865a1deaa12/6bdcf/debugger_scope.png 315w,\n/static/641aae640826d2453ed17865a1deaa12/f058b/debugger_scope.png 630w,\n/static/641aae640826d2453ed17865a1deaa12/40601/debugger_scope.png 945w,\n/static/641aae640826d2453ed17865a1deaa12/33d1d/debugger_scope.png 1150w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h6>d. Dynamic Scope과의 차이</h6>\n<p>Shell Script나 Perl은 dynamic scope 방식을 사용한다. 신기하게도 다음과 같이 같은 소스로 static과 dynamic scope를 둘다 테스트 해 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ksh -c <span class=\"token string\">'function f1 { typeset a=local; f2; echo <span class=\"token variable\">$a</span>; };\n  function f2 { echo <span class=\"token variable\">$a</span>; a=changed; };\n  a=global; f1; echo <span class=\"token variable\">$a</span>'</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">global\nlocal\nchanged</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">bash</span> --posix -c <span class=\"token string\">'function f1 { typeset a=local; f2; echo <span class=\"token variable\">$a</span>; };\n  function f2 { echo <span class=\"token variable\">$a</span>; a=changed; };\n  a=global; f1; echo <span class=\"token variable\">$a</span>'</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">local\nchanged\nglobal</code></pre></div>\n<p>위의 소스에서 아래 bash로 실행한 코드가 dynamic scoping을 따른다. 요약하자면, static scoping을 기반으로 생각할 때는 <code class=\"language-text\">f1</code>과 <code class=\"language-text\">f2</code> 함수는 별개로 선언되어 있으므로, <code class=\"language-text\">f2</code>에서 참조하는 <code class=\"language-text\">a</code>는 당연히 global에 선언된 a이어야 한다. 하지만, 실행해 보면 f1의 a를 참조하고 있다는 것을 알 수 있다.</p>\n<p>결론적으로, “Dynamic scoping”은 변수를 탐색할 때, 실제 call이 되는 순서를 기준으로 탐색한다. <strong>즉, call stack을 기준으로 찾는다.</strong></p>\n<p><a href=\"https://stackoverflow.com/questions/1047454/what-is-lexical-scope\">Stack Overflow 답변</a>에서도 다음과 같은 C스타일의 코드를 통해서 Dynamic scope를 설명한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">fun</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">dummy1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fun</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">dummy2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fun</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">dummy1()</code>과 <code class=\"language-text\">dummy2()</code> 내부에서 호출되는 <code class=\"language-text\">fun()</code>은 x를 가지고 있지 않으며, 외부 scope를 탐색하게 되는데 각각의 call stack을 따라 탐색을 하면 5와 10이 출력될 것이다. static scope라면 <code class=\"language-text\">fun()</code>에서 x를 찾을 수 없으므로 위의 문법은 static scope를 사용하는 C언어에서 틀린 문법이다.</p>\n<h6>e. 결론</h6>\n<p>코드를 작성 할 때 그 것의 이미 scope가 정해진다. 이 시점을 author-time이라 한다. 실제적으로는, 컴파일러의 lexing 단계, 즉 lex-time에서 scope가 정해진다. 이러한 이유로 이벤트 핸들러를 <code class=\"language-text\">for</code> 문 내에서 설정할 때, <code class=\"language-text\">i</code>를 사용할 경우, 각각 다른 scope와 값을 가진 i가 아닌, 글로벌 변수 i 하나만을 참조하는 것이다. 반대로, dynamic scope의 경우에는 call stack에 따라 바뀌므로 run-time에 결정된다.</p>\n<p>(scope와 scope chain 정보가 어디에 있으며([[scope]], variableObject, execution context가 뭔지..), 언제 생성되어 그 곳에 어떻게 메모리에 구성되는지 좀 더 조사 해야 한다.)</p>\n<h4>2.2.2. 클로저의 실제 활용의 예</h4>\n<h5>클로저를 만드는 방법 1 : 내부 함수를 리턴하여 사용 한다</h5>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> counterFactory <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> staticCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> localCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">inc</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">static</span><span class=\"token operator\">:</span> <span class=\"token operator\">++</span>staticCount<span class=\"token punctuation\">,</span>\n          local<span class=\"token operator\">:</span> <span class=\"token operator\">++</span>localCount<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> counterA <span class=\"token operator\">=</span> <span class=\"token function\">counterFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counterA<span class=\"token punctuation\">.</span><span class=\"token function\">inc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {static: 1, local: 1}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counterA<span class=\"token punctuation\">.</span><span class=\"token function\">inc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {static: 2, local: 2}</span>\n<span class=\"token keyword\">var</span> counterB <span class=\"token operator\">=</span> <span class=\"token function\">counterFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counterB<span class=\"token punctuation\">.</span><span class=\"token function\">inc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {static: 3, local: 1}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counterB<span class=\"token punctuation\">.</span><span class=\"token function\">inc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {static: 4, local: 2}</span></code></pre></div>\n<p>이 때, <strong>IIFE(Immediate Invoke Function Expression)</strong> 패턴을 사용하게 되는데, IIFE 내부에 함수를 구현하여 리턴한다. IIFE를 사용하는 이유는 클로저를 생성하기 위해서이고 (이 경우에는 staticCount를 유지하고 참조하기 위해서), 실제 동작하는 루틴은 리턴하는 함수 안에 안에 들어 있다.</p>\n<h5>클로저를 만드는 방법 2 : 내부 함수를 콜백으로 등록하여 사용한다</h5>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">var</span> interval <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>count<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">>=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>interval<span class=\"token punctuation\">)</span>\n      count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  interval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4>2.2.3. 클로저의 단점</h4>\n<p>클로저는 다음과 같은 단점이 있으나, 꼭 필요한 경우에는 사용하는 것이 좋다.</p>\n<ol>\n<li>클로저는 메모리를 소모한다.</li>\n<li>과하게 사용하면 변수의 탐색 시간으로 인해 성능에 영향을 준다.</li>\n</ol>\n<h2>Chapter 3. 자바 스크립트의 변수</h2>\n<h3>3.1. 자바스크립트의 기본 형과 typeof</h3>\n<h5>javascript의 기본형</h5>\n<p>객체가 아닌 기본적인 키워드로 활용할 수 있는 기본형.</p>\n<ul>\n<li>number</li>\n<li>string</li>\n<li>boolean</li>\n<li>undefined</li>\n<li>null</li>\n<li>symbol</li>\n</ul>\n<h5>typeof의 결과 목록</h5>\n<p>typeof는 문자열을 반환한다.</p>\n<ul>\n<li>“undefined”</li>\n<li>“boolean”</li>\n<li>“number”</li>\n<li>“string”</li>\n<li>“object”</li>\n<li>“function”</li>\n<li>“symbol”</li>\n</ul>\n<h5>typeof의 결과 중 특이 한 것</h5>\n<p><strong>“typeof null은 object이다.”</strong> 따라서, typeof를 이용해서 object인지 체크한 뒤 어떤 동작을 추가하려면, null 체크를 따로 먼저 해주는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aaa <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> aaa <span class=\"token operator\">===</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// do something with aaa</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>3.2. new String(\"\"), String(\"\"), 그리고 \"\"</h3>\n<p>Javascript의 문자열은 기본형(primitive)과 객체형 두가지 형태로 존재한다.</p>\n<h5>new String()은 래퍼객체이고, \"\"과 String(\"\")은 기본형이다</h5>\n<p>String(\"\")은 표준에 정의된 일련의 과정을 통해서 결국 기본형을 리턴한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//object</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// string</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// string</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span> <span class=\"token operator\">===</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code></pre></div>\n<h5>기본형은 레퍼객체나 Object의 인스턴스가 아니다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Number</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Number</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Number</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Number</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123\"</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Number</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123\"</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code></pre></div>\n<h5>기본형에는 속성을 추가할 수 없다</h5>\n<p>정확히 말하자면, 기본형의 프로퍼티 접근시 내부적으로 new String(\"\")으로 레퍼객체를 만들었다가 바로 사라지기 때문인데, 이 책에서는 그러한 설명이 없다. 설명은 이곳 : <a href=\"http://noritersand.tistory.com/536\">래퍼 객체</a></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token string\">\"test\"</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token comment\">// new String(test).length와 같다.</span>\ntest<span class=\"token punctuation\">.</span>abc <span class=\"token operator\">=</span> <span class=\"token string\">\"abc\"</span> <span class=\"token comment\">// new String(test).abc = \"abc\"와 같다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">.</span>abc<span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined 있을리 없음.</span></code></pre></div>\n<h5>String.prototype에 함수를 추가하면 기본형에서도 그 함수를 쓸 수 있다</h5>\n<p>이 또한 프로퍼티 접근시 래퍼 객체를 생성해서 호출하기 때문에 가능한 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getLength</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token string\">\"test\"</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">.</span><span class=\"token function\">getLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// new String(test).getLength()와 같다.</span></code></pre></div>\n<h3>3.3. 글로벌 변수</h3>\n<p>많은 자바스크립트 개발자가 글로벌 변수를 사용한다. 아무 생각 없이 변수를 사용했다면 글로벌 변수이다.</p>\n<h5>글로벌 변수를 자제 해야 하는 이유</h5>\n<h6>소스를 나눠서 관리할 때 각 소스 끼리 충돌 발생 가능성이 있다</h6>\n<p>예를 들면, <code class=\"language-text\">xhr = new XMLHttpRequest()</code>가 여러 소스에 있을 경우 같은 xhr을 덮어 쓰게 된다.</p>\n<h6>서버의 응답을 기다리는 등의 비동기식 처리 시 문제 발생 가능성이 있다</h6>\n<p>위와 같이 xhr을 공유하거나 겹치게 사용하는 경우 여러 곳에서 다른 xhr.onreadystatechange를 등록하게 되고, 응답이 오기전에 두 번 이상의 요청을 보낸 경우 앞의 응답이 온 것에 대해서 처리하지 못하게 된다.</p>\n<h6>메모리 관리 차원에서 좋지 않다.</h6>\n<p>변수들의 레퍼런스 카운터가 0가 되지 않는 이상 가비지 컬렉터가 메모리를 해제하지 않으므로, 잠시 사용할 변수는 로컬 변수로 선언하는 것이 옳다.</p>\n<h3>3.4. 글로벌 변수 정의</h3>\n<h5>글로벌 변수 정의 방법</h5>\n<ol>\n<li><code class=\"language-text\">&lt;script&gt;</code> 안에 <code class=\"language-text\">var</code> 로 선언한다.</li>\n<li>모든 곳에서 <code class=\"language-text\">var</code> 없이 선언한다. 단, 이 경우 상위 scope를 탐색 해 본 후 없으면 글로벌 변수가 된다.</li>\n<li><code class=\"language-text\">for</code>문에서 <code class=\"language-text\">i</code>를 잘못 사용하면 오동작의 원인이 된다.</li>\n</ol>\n<h3>3.5. Window 객체</h3>\n<p>글로벌 영역을 관장하는 “The Global Object”이다. 이 객체는 브라우저가 제공하며 약간 특수한 성질을 가지고 있다.</p>\n<ul>\n<li>new 로 생성할 수 없다.</li>\n<li>함수로 호출할 수 없다.</li>\n<li>프로토타입이 없다.</li>\n</ul>\n<h5>window는 window.window.window이다</h5>\n<p>window는 재귀적인 형태를 가지고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window <span class=\"token operator\">===</span> window<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code></pre></div>\n<h5>글로벌 변수에 프로퍼티로 접근이 가능하다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></code></pre></div>\n<h5>글로벌 변수에 이름으로 접근도 가능하다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a1 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">var</span> a2 <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n<span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2</span></code></pre></div>\n<h5>글로벌 함수 호출도 같은 방법으로 가능하다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">\"foo\"</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">[</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// foo</span></code></pre></div>\n<h3>3.6. 글로벌 변수 선언 방법과 차이</h3>\n<p>글로벌 변수를 선언하는데는 몇가지 방법이 있다.</p>\n<ol>\n<li>글로벌 스코프에서 var 키워드를 이용한 선언.</li>\n<li>특정 스코프에서 상위 스코프에 선언되지 않은 변수를 var 선언.</li>\n<li>window 객체에 속성 추가.</li>\n</ol>\n<h5>Hoisting (나: 여기 왜 이 항목이 있는거지?)</h5>\n<p>이 책에서 사용한 용어는 아니지만, 자바스크립트는 변수와 함수의 선언을 hoisting(끌어올림) 한다. 즉, 아래 쪽에 선언한 변수와 함수를 위에서 접근할 수 있다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span>\n  bar <span class=\"token operator\">=</span> <span class=\"token string\">\"bar\"</span> <span class=\"token comment\">// 지역 변수의 할당, 전역 변수의 선언이 아니다.</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// bar</span>\n  <span class=\"token keyword\">var</span> bar <span class=\"token comment\">// declaration here.</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// error!</span></code></pre></div>\n<h3>3.7. var 키워드의 효율적인 사용</h3>\n<p>JSLint는 항상 다음을 권하는 메세지를 출력한다.</p>\n<blockquote>\n<p>모든 변수는 함수의 위쪽에 묶어서 선언해야 한다.</p>\n</blockquote>\n<p>이렇게 하는 것에는 몇가지 이유가 있다.</p>\n<h5>초기화 실수의 최소화하기 위해서</h5>\n<p>이 책에 나오는 이유는 그다지 명확하지가 않다. 내 생각은 다음과 같다. “선언되지 않은 변수”와 “초기화 되지 않은 변수”는 모두 <code class=\"language-text\">typeof</code>의 결과로 <code class=\"language-text\">undefined</code>를 리턴한다. 우리는 때로 이것을 구분해야할 필요가 있다. 소스가 길어지면 “어딘가”에 선언되어 있을지도 모르는 변수를 재선언을 하는 등의 문제를 만들 수 있기 때문이다.</p>\n<h5>변수 관리를 잘 하기 위해서</h5>\n<p>책보다 설명을 잘 할 수 있을 듯 하다. Javascript는 nested 함수를 지원하는데, 변수를 var 없이 할당하면 글로벌 변수가 만들어 지거나 이전 스코프의 변수를 변경하게 된다. 게다가 hoisting까지 지원하기 때문에 변수를 잘 관리 하지 않으면 버그를 만들어 내기 매우 쉬운 환경이다. 따라서 모든 함수의 도입부에 로컬 변수를 잘 선언해 이러한 혼란을 막는데 도움을 줄 수 있다.</p>\n<h5>Minifying이 잘 되도록</h5>\n<p>minifying할 때 소스의 부피를 더 줄일 수 있다 한다.</p>\n<h3>3.8. 글로벌 변수 최소화하기</h3>\n<p>다음과 같은 두가지 방법으로 글로벌 변수를 회피할 수 있다.</p>\n<ol>\n<li>클로저 사용하기</li>\n<li>\n<p>모듈/네임스페이스 패턴 사용하기</p>\n<ul>\n<li>Jquery의 $처럼, window.$에 모든 것을 넣어 모듈 처럼 이용하는 방법</li>\n</ul>\n</li>\n</ol>\n<h3>3.9. 변수 사용 방법과 성능</h3>\n<p><strong>외부 스코프의 변수를 그대로 사용하는 것이 아니라, 지역변수로 한번 참조한 뒤 그 지역변수를 사용하는 것이 성능에 도움이 된다.</strong> 현재의 스코프에 어떤 변수가 없을 때마다, 재귀적으로 상위 스코프로 탐색을 실시하게 되기 때문이다.</p>\n<h2>Chapter 4. 프로토타입과 객체지향, 그리고 상속</h2>\n<h3>4.1. 프로토타입을 통한 객체지향</h3>\n<h4>4.1.1. 프로토타입의 정의</h4>\n<p>프로토타입이란 Javascript가 제공하는 객체 지향을 지원하기 위한 방법이다. Java의 상속과는 다르게 동적으로 부모 객체의 수정이 가능하다.</p>\n<h4>4.1.2. 자바스크립트와 자바의 객체 생성 비교</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n    String name<span class=\"token punctuation\">;</span>\n    String blog<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">String name<span class=\"token punctuation\">,</span> String blog</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blog <span class=\"token operator\">=</span> blog<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>자바와 비슷하지만 자바스크립트는 function으로 선언한다. 단, ECMAScript 6에서는 class 키워드가 추가되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> blog</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blog <span class=\"token operator\">=</span> blog\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>4.1.3. this의 이해</h4>\n<p>자바스크립트에서의 this 가 무엇을 참조하는지는 <strong>“호출 방법”</strong> 에 따라서 변경이 된다. (스코프가 아님)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> blog</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blog <span class=\"token operator\">=</span> blog\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>일반 함수 내에서의 this는 Window 객체를 참조한다.</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Window {...}</span></code></pre></div>\n<h5>맴버 함수 내에서의 this는 해당 함수를 포함하는 객체를 참조한다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">foo</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {...}</span></code></pre></div>\n<h5>call()과 apply()는 첫 번째 파라미터로 this를 넘길 수 있다</h5>\n<p><code class=\"language-text\">call()</code>과 <code class=\"language-text\">apply()</code>를 이용하여 함수를 호출하면, 해당 함수 내에서의 <code class=\"language-text\">this</code>를 바꿀 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  bar<span class=\"token operator\">:</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token comment\">// bar</span></code></pre></div>\n<p>위와 같이 <code class=\"language-text\">obj</code>객체를 파라미터로 넘겨주어 <code class=\"language-text\">foo</code> 함수의 실행 컨텍스트를 바꿀 수 있다. <code class=\"language-text\">call</code>의 파라미터가 없거나, 파라미터로 <code class=\"language-text\">undefined</code>나 <code class=\"language-text\">null</code> 을 주면 함수 내부에서의 <code class=\"language-text\">this</code>는 Window 객체를 가르킨다. 일반적으로 함수에서는 내부적으로 <code class=\"language-text\">call</code>을 파라미터 없이 호출하게 되고, 그 때의 <code class=\"language-text\">this</code>는 <code class=\"language-text\">Window</code> 객체를 가르키게 된다고 한다. <code class=\"language-text\">call</code>과 <code class=\"language-text\">apply</code>의 차이는 파라미터를 객체로 줄수 있는지의 차이이다.</p>\n<h4>4.1.4. new 키워드</h4>\n<p><code class=\"language-text\">new</code> 키워드의 파라미터로 함수를 넘기면, 그 내부 동작이 표준에서 정의한대로 동작하는데 그 표준을 이 책에서 설명한다. 만약 아래의 코드를 <code class=\"language-text\">new</code>가 아니라 그냥 다음과 같이 호출해 버리면, <code class=\"language-text\">this</code>가 <code class=\"language-text\">Window</code>을 참조하기 때문에 글로벌 변수 두개를 생성하는 웃긴 결과가 될것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> blog</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blog <span class=\"token operator\">=</span> blog\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"my blog\"</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// my name</span></code></pre></div>\n<p>하지만, <code class=\"language-text\">new Person(&quot;my name&quot;,&quot;my blog&quot;)</code> 으로 호출 함으로써 내부적으로 다음의 절차를 따르게 된다. (책의 설명이 이해가 안되서 직접 찾아 봤다 <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.2\">참고: ecma-internal</a>)</p>\n<ol>\n<li>new는 몇가지 체크 후, 내부 함수인 [[Construct]]를 호출한다.</li>\n<li>\n<p>[[Construct]]는 다음의 절차를 따른다.</p>\n<ul>\n<li>새로운 object인 obj생성한다.</li>\n<li>파라미터인 함수 F의 prototype을 obj에 설정한다.</li>\n<li>F의 내부 함수인 [[Call]]을 호출 하는데, 이때 obj와 파라미터를 넘겨 obj를 초기화 시킨다. (예제에서의 obj.name와 obj.blog가 셋팅되는 과정)</li>\n<li>obj를 리턴한다.</li>\n</ul>\n</li>\n</ol>\n<h4>4.1.5. 프로토타입에 대한 표준 정의</h4>\n<p>prototype은 다른 객체들과 공유되는 속성을 제공하는 객체이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> blog</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blog <span class=\"token operator\">=</span> blog\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 프로토타입과 생성자 함수는 서로 링크되어 있다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span> <span class=\"token comment\">// function Person() {}</span></code></pre></div>\n<p>프로토타입의 정의와 특성에 대해서는 <a href=\"http://www.nextree.co.kr/p7323/\">이 곳</a> 에 더 잘나와 있다.</p>\n<h4>4.1.6. 프로토타입의 사용 예</h4>\n<p>이 장에서는 프로토타입의 실제 동작 방식을 예제로 설명한다.</p>\n<h5>객체 생성 후에도 prototype 수정이 가능하다</h5>\n<p>다른 언어를 다루던 사람은 객체를 생성할 때, 객체를 찍어 낸다고 생각하기 때문에 한번 찍어낸 객체는 그대로 동작하야 한다고 믿을 수 있다. prototype과 같은 공유 객체를 생각하기 어려울 것이다. 그러나 자바스크립트에서는 그 이후 prototype을 얼마든지 수정이 가능하고, 그럼 각 객체의 기능에도 영향을 받을 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 생성자 함수</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">bar</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> bar\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 프로토타입에 함수 추가</span>\n<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getBar</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 객체 생성</span>\n<span class=\"token keyword\">var</span> foo1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> foo2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo1<span class=\"token punctuation\">.</span><span class=\"token function\">getBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// bar</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo2<span class=\"token punctuation\">.</span><span class=\"token function\">getBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// bar</span>\n\n<span class=\"token comment\">// 프로토타입 함수 변경</span>\n<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getBar</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">\"new \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo1<span class=\"token punctuation\">.</span><span class=\"token function\">getBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// new bar</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo2<span class=\"token punctuation\">.</span><span class=\"token function\">getBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// new bar</span>\n\n<span class=\"token comment\">// 프로토타입에 변수 추가</span>\n<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>abc <span class=\"token operator\">=</span> <span class=\"token string\">\"abc\"</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo1<span class=\"token punctuation\">.</span>abc<span class=\"token punctuation\">)</span> <span class=\"token comment\">// abc</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo2<span class=\"token punctuation\">.</span>abc<span class=\"token punctuation\">)</span> <span class=\"token comment\">// abc</span></code></pre></div>\n<h4>4.1.7. 프로토타입과 생성자</h4>\n<p>이 책에서 가장 난해한 부분 중 하나라고 생각한다. 일단 용어가 부터가 통일 되지 않는다. “constructor”, “생성자”, “생성자 함수”, “프로토타입의 constructor 속성”, “객체의 constructor 속성”은 모두 잘 구분되어야 하는데 마구 섞여 있는 것처럼 느껴진다. 나름대로 이해한 바를 정리해 본다.</p>\n<h5>function 키워드로 contructor 속성이 만들어 진다</h5>\n<p>위 예제에서 <code class=\"language-text\">Foo.protoype.constructor</code>는 <code class=\"language-text\">function Foo</code>에 의해서 만들어진다. 책에서 설명하는 MakeConstructor는 아마도 이 과정일 것이다. 두개의 객체가 생성되는데 하나는 <strong>Foo 함수 객체</strong> 이고 다른 하나는 <strong>Foo의 prototype 객체</strong> 이다. 상호 참조를 가지고 있으므로 접근이 가능하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.050632911392405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUklEQVQY0yWPTStEYRTH55NY+QKiLJR8AitrdkrCgoWU2HgZZmwQCom8byixYbw0lGwkoZhBXmYa5t7nPvc+917c7s8zd079O2+/c04n1jh1S+vKI+1rGTrWs7StZujazNI0c8fgzhO+72E7Dn8/PomDZ5oXH6J+ievcyEYzPdvPtOj65mWOWPdWhqFDk/iJRfxYMHxkMnYi6d15Zy71glIKwzTxXcVy+o2BvQ8Sp5LRlNDeipQ8s+jffWX/Wi8k8HEvllCns6jzBdz0PE5qkiB/j/J8bCkJwxDbljiux18hg3M8rbkFlGbV2RxOehF8G6nZGJ7EiNcihqsQyXqsiQaMvgqcqy2kH/KrXy7Z74+n8wB1s4/RX4kYrytrpBpjpIbQymE5LrHSZfGdRxQ+tT4QX59RbFsCUwiCIIgWlrzQuS0tzeTKbKHMiq989EmxWOQf5edUFI34uTMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"proto1\"\n        title=\"proto1\"\n        src=\"/static/6c6e0aec943a1ac28854a4b16f4e2e9a/f058b/proto1.png\"\n        srcset=\"/static/6c6e0aec943a1ac28854a4b16f4e2e9a/c26ae/proto1.png 158w,\n/static/6c6e0aec943a1ac28854a4b16f4e2e9a/6bdcf/proto1.png 315w,\n/static/6c6e0aec943a1ac28854a4b16f4e2e9a/f058b/proto1.png 630w,\n/static/6c6e0aec943a1ac28854a4b16f4e2e9a/40601/proto1.png 945w,\n/static/6c6e0aec943a1ac28854a4b16f4e2e9a/78612/proto1.png 1260w,\n/static/6c6e0aec943a1ac28854a4b16f4e2e9a/e2d3b/proto1.png 1466w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h5>new + 생성자 함수 구문으로 새로운 객체를 만든다</h5>\n<p><code class=\"language-text\">new Foo()</code>를 이용하면, 맴버 변수들의 초기화를 위해서 생성자 함수를 한번 실행 하고 새로운 객체를 만든다. 새로운 객체는 <code class=\"language-text\">Foo의 prototype 객체</code>에 대해서 내부링크(implicit prototype link)를 가지게 된다. 그림에서 보이는 <strong>proto</strong>가 그 것이다. <strong>proto</strong> 속성은 만들어진 객체의 내부 속성인 [[Prototype]]에 대한 getter 함수라고 하며, 표준이 아니다.</p>\n<p>프로토타입 객체는 다른 프로토타입 객체의 링크를 가지며, <code class=\"language-text\">Object()</code>이 프로토타입 객체 처럼 최상위에 있는 객체의 내부 프로토타입 링크가 null이다. 이 것을 가르켜 “프로토타입 체인”이라고 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACR0lEQVQ4y42TTU9TQRSGu/IPuHHvb3DJysT4A3Tj2oVGTViQIKTEqEtNZIHRGE00LMSPCJaCWjFiMSWRoCDYixYoCNS2ENv7Pferj3OnFDRR8CRv7pnMmWfeOTM30T6wyNmHK3SPVOkaLtPzYpMzcnxzbBXhuhB6DE6VOD9QJDlapTtdoUd+u1IlrqaWqBsmYRgQR6PRIFFY22RhbpZ8Nk0+91p+h9E+z7BcMXFsG891WNuyyGtf0SbSaLkM2vtRtOkchZKO7/sYhk4QNKEJaitE4704N9oQ90/h9rYRvLmGG0LgezTk7o7M/Y+PsWWNe/cETt8xvCcXmvPSVRiGmKbZdGhZNpZlYRrGjuKxbTuqIA5PCHl8G2Gbu3JseQJL1cRyHEe5TMRLmst2ozXe5mGLkIou2DS2JfOq1E/LV/NRFOF5nlKitcPfFEZN4uB0mdP9S3QOV+gYKtHxvEz703WSzxZVjS9BMVTIk+wJVA4bET90n/lP08wN9jH/sp/51G2+vB1iYb2GI19C4DedKiD/iFb/wsAnjJOpB1jdhxB9R3EuH0bcO6n66m/D4vp9gQoqZbsCvbpBbXmWenGOWnEWfaMgn4uxs3EMVpeyF7DVw/RMlXOPvnNpzCT5SieZMehMb3ElVSQuiaJQuWu+w/0cyjsvVGzGpzQmMiNkx16RzYySzeaY/LYlQfHtih2n/9FDeYNxMnkHq/0A4voRnIsHEbeOy7/IVrDf1+wLbKgeehjlVer5d+iFD9S1CYziDLph/lEXxy+7IsM3r0aQrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"proto2\"\n        title=\"proto2\"\n        src=\"/static/b9ff2314bd3d6b9beb476f9f1120cd9f/f058b/proto2.png\"\n        srcset=\"/static/b9ff2314bd3d6b9beb476f9f1120cd9f/c26ae/proto2.png 158w,\n/static/b9ff2314bd3d6b9beb476f9f1120cd9f/6bdcf/proto2.png 315w,\n/static/b9ff2314bd3d6b9beb476f9f1120cd9f/f058b/proto2.png 630w,\n/static/b9ff2314bd3d6b9beb476f9f1120cd9f/40601/proto2.png 945w,\n/static/b9ff2314bd3d6b9beb476f9f1120cd9f/78612/proto2.png 1260w,\n/static/b9ff2314bd3d6b9beb476f9f1120cd9f/24def/proto2.png 1812w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h4>4.1.8. 객체 내의 속성 탐색 순서</h4>\n<p>위에서 처럼 new 로 객체가 된 후 그 객체의 속성 중 하나에 접근하면, 프로토타입 체인을 따라가면서 해당 속성이 있는지 검사를 하게 된다. 이 방법으로 프로토타입 객체는 공유 객체가 되는 것이며, 이미 new로 만들어진 객체라 하더라도 프로토타입 객체에 동적으로 추가한 함수나 변수를 사용할 수 있는 것이다.</p>\n<h5>for-in을 사용하면 프로토타입 객체에 있는 속성까지 모두 순회 한다</h5>\n<p>위와 같은 이유로 때문에 for 문 내에 <code class=\"language-text\">hasOwnProperty()</code> 함수를 사용한다. 이 함수는 특정 속성이 객체 자신의 속성인지 아닌지를 검사해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>prop <span class=\"token keyword\">in</span> foo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 객체의</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>4.1.9. 프로토타입의 장단점</h4>\n<p>프로토타입은 결국 여러 객체 들이 공유하는 것이며, 프로토타입을 사용하지 않고도 객체 내부에 모두 구현이 가능하다. 객체가 많을 경우에는 <strong>“메모리 낭비”</strong> 가 생기게 된다.</p>\n<p>하지만, 프로토타입의 사용은 <strong>“탐색 시간의 증가”</strong>를 초래하게 된다. 한두번이야 상관없겠지만, 접근 횟수가 많을 경우에는 많은 시간이 걸릴 수 있다.</p>\n<h2>4.2. 자바스크립트에서의 상속 활용</h2>\n<p>자바스크립트의 프로토타입을 활용하여 다른 언어처럼 “상속” 구현하기 위한 방법에는 여러가지가 있다. 기존 방법(?)의 문제점과 새로운 방식이 책에서 소개된다.</p>\n<h4>4.2.1. 기존 상속 구현 방법</h4>\n<h5>초창기 자바스크립트의 상속 구현 방법</h5>\n<p>초창기 자바스크립트의 상속 구현 방법은 부모 함수 객체에 자식 함수 객체에 필요한 속성만 추가 하여 리턴하는 방식이었다. 하지만 instanceof가 제대로 동작하지 않는 문제가 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Child\"</span>\n  <span class=\"token keyword\">return</span> obj\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// instanceof가 제대로 동작하지 않는 문제가 있다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Child</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code></pre></div>\n<h5>조금 개선된 상속 구현 방법</h5>\n<p>다음 코드와 같이 자식 함수의 프로토타입 객체를 Parent()로 생성된 객체로 넣으면 <code class=\"language-text\">instanceof</code> 가 제대로 동작한다. 그러나 <code class=\"language-text\">constructor</code>의 링크가 깨지는 문제가 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Child\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 이렇게 생성된 Parent 객체를 Child의 prototype 객체로 만드는 방식이었다.</span>\n<span class=\"token class-name\">Child</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 마침내 instanceof 가 잘 동작한다.</span>\n<span class=\"token keyword\">var</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Child</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token comment\">// 하지만 생성자 함수가 Parent()로 바뀌는 문제가 존재한다..</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span> <span class=\"token comment\">// function Parent()</span></code></pre></div>\n<p>내부의 링크가 깨진다던지 하는 문제가 발생한다. 또한 <code class=\"language-text\">new</code> 키워드 자체가 자바스크립트 답지 않다는 주장이 많이 반영되어 <code class=\"language-text\">Object.create</code> 함수를 만들어 내게 된다.</p>\n<h4>4.2.2. instanceof 동작 원리</h4>\n<p>이 책에서는 길게 설명하고 있지만, 구글링을 통해 찾은 것은 간단하다. 좌측 객체의 포로토타입이 우측 객체의 프로토타입 체인에 속해 있는지 검색해보는 것이다.</p>\n<h4>4.2.3. Object.create 함수</h4>\n<p>IE9 이상부터 지원되는 함수이며, 더글라스 크락포드가 주장한 이 함수의 기본 형태는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Object<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">create</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token constant\">F</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token class-name\">F</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> o\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">F</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">o</code>를 통해서 생성할 객체의 prototype을 받아서 새로 만든 함수의 prototype으로 설정한다.</p>\n<h4>4.2.6. Object.create와 new 키워드의 조합</h4>\n<p>둘의 조합으로 드디어 원하는 상속이 가능하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Child\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Child 함수 객체의 prototype 을 직접 만들어 준다.</span>\n<span class=\"token comment\">// 리턴된 함수는 constructor 속성으로 Child 함수를 가지고,</span>\n<span class=\"token comment\">// prototype 속성으로 Parent 함수의 prototype을 가진다.</span>\n<span class=\"token class-name\">Child</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Parent</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  constructor<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    value<span class=\"token operator\">:</span> Child<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 마침내 instanceof 가 잘 동작한다.</span>\n<span class=\"token keyword\">var</span> child <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Child</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token comment\">// 생성자 함수도 잘 연결되어 있다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span> <span class=\"token comment\">// function Child()</span></code></pre></div>\n<h2>Chapter 5. 디자인 패턴 실용</h2>\n<p>이 책에서는 자주 볼 수있는 유용한 패턴을 몇가지 소개하고 있다.</p>\n<h3>5.2. 모듈 패턴</h3>\n<p>소스를 모듈 단위로 관리하기 위해서 쓰이는 패턴이다. 대표적인 예로 jQuery의 <code class=\"language-text\">$</code>를 들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">window</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> myLibrary <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">method1</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">method2</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span>myLibrary <span class=\"token operator\">=</span> myLibrary <span class=\"token comment\">// 글로벌 변수로 등록.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같이 <code class=\"language-text\">window</code> 에 등록하는 방법, 아래와 같이 리턴을 받아서 할당하는 방법이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myLibrary <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">method1</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">method2</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>5.2. 이벤트 델리게이션 패턴</h3>\n<p>이 책에서는 정의를 제대로 내리지 않고 유용한 상황을 먼저 설명하고 있다. 아래는 내가 정의한 이벤트 델리게이션이다.</p>\n<blockquote>\n<p>이벤트 델리게이션 패턴이란 다수의 element에 각각에 event handler를 할당하는 것이 아니라, 그 것을 감싸는 부모 element에 하나의 event handler만 할당하여 처리하는 방식이다. 이 때, 조건문을 통해서 각 element의 이벤트를 처리한다.</p>\n</blockquote>\n<h5>(조사) 이벤트 버블링과 캡쳐링</h5>\n<p>이벤트 버블링과 캡쳐링은 이벤트가 전파되는 방향을 개발자가 설정하는 것이 아니다. 이미 브라우저는 특정 순서로 이벤트를 전파하고 있다. 이 때, 개발자가 부모와 자식 element에 각각 이벤트 핸들러를 등록해 두었을 경우, 브라우저가 전파하는 순서대로 그 이벤트 핸들러가 호출된다. 같은 element에 <code class=\"language-text\">addEventListener(event, func1, true)</code>, <code class=\"language-text\">addEventListener(event, func2, false)</code>로 capturing과 bubbling되는 이벤트를 처리할 수 있는 것은 w3c의 표준에 의해서 브라우저가 이미 두개의 흐름을 만들어 두었기 때문이다. 따라서 위와 같이 하나의 element에 capturing과 bubbling 이벤트 핸들러를 등록해 놓을 수 있고, 그렇이 하면 capturing으로 설정한 이벤트 핸들러인 func1이 먼저 호출된다. 그 이유는 다음에서 설명된다.</p>\n<h5>(조사) 왜 버블링이라고 부르나?</h5>\n<p>책에서는 자식 element로부터 부모 element로 이벤트가 전파되는 것을 버블링이라고 설명한다. 이 설명은 그냥 외우라는 것 그 이상 그 이하도 아니다. 한참을 찾은 끝에 <a href=\"https://www.kirupa.com/html5/event_capturing_bubbling_javascript.htm\">이 곳</a>에서 버블이라고 부르는 이유를 대략 짐작할 수 있었다. (event 전파가 root로부터 target element까지 내려왔다가 다시 bubble이 되어 root element로 돌아간다는 의미로 해석하면 될 것 같다.) 가장 헷갈렸던 부분은 bubble은 위로 올라가는데, 레이어의 순서를 기준으로 볼때 자식은 위쪽에 있기에 반대라고 생각했다. 하지만, 그 것 보다는 Tree를 생각해야 한다. HTML과 BODY를 최상위에 놓고 아래로 자식 element들을 트리 형태로 나열 한 그림을 놓고 볼때, 이벤트 버블링이 무엇인지 직관적으로 이해할 수 있다. 그 트리에서 가장 자식이 되는 element부터 최상위 부모까지 전달되며 버블처럼 올라가는 모습이 이벤트 버블링이다.</p>\n<h5>(조사) 왜 캡쳐링이라고 부르나?</h5>\n<p>열심히 검색해 봤으나 딱히 훌륭한 이유를 찾지는 못했다. 다만, 이벤트가 target으로부터 시작되는 버블링과는 달리, 어딘가로부터 시작된 이벤트가 여러 element를 거쳐 최종적으로 이벤트가 target으로 오게 되는 것으로 이해해 볼 수 있다. 즉 이벤트의 대상인 target element로부터 생겨난 버블이 뽀글뽀글 올라가는 것과는 정반대로, 최종적으로 target element로 가는 event를 그 조상(window,html,body)들이 가로챌(capturing) 수 있다고 이해하면 될 것같다.</p>\n<h5>(조사) 이벤트 캡처링과 버블링은 어떻게 동작하는가?</h5>\n<p>넷스케이프와 마이크로소프트가 각각 capturing과 bubbling방식 만을 지원했다. 하지만 W3C 표준에서는 두가지를 다 지원하도록 만들었다. 첫번째 단계에서는 capturing방식으로 이벤트를 전파하고, target에 도착한 뒤, bubbling방식으로 다시 이벤트를 전파한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 605px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.20253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEl0lEQVQ4y42UC0xTVxzGP0uxMJC2FEalgkUFETEToyITAUXAB4iLD2AbkOlwmahEoAWBQnmJwKaQ6dzmpkEwPNTRB0jLoFbl4cDO4eIExksBRccwbEpgTs9OOyVmyrKTfPkn957zu9/3P+dc4KXxbB5AHAFtR7cRAZg69QVRq043LJfJOrRabW/bj21tkbmRNpiLaYYFafjv8QJY3NACYgrrhsxEoaaxOUgmV2yv01zc1qht9oAIb06Twhap/xNogMIgi5tZCb7NV5tvqqsUXdq62nstV5uPIRBc56NOpoidAqgHPH2u58BpxJIC7cDrXutiXahp980ov/RenvJayDFlkxPiYGOSOYNtgL0O+HTeqyJWVHPBGRdAkKAZKo8523ZHXNPXt7fmRigW4o3gkqNMozSjqR2+JA4FLnziyJhB5sHisQN4InWfV0xZa7hY3h4SffayEGLY2uevYE7p8F9AUwpcNuE8nU2EMHs8B3ZJ9YMVMRXX+8TKzt6YC9fDMAsmSap+o0lg6nOlTR2ZQQQ0MnU7Zg/LuNp+731l1yLj5e1hu881COku2wry3IxfAaZOAfxzLoWxqBxg8cgBdsn1d8spsFek6OwxOLSDyedNhEFhc6hWUvEm4Xqd6SDY9iL/dDO02dNd/sehJXXIjVfRHpbr3hcpOrZ/VHFR38NZI4P0UEnBoq6cIQFzMrK+6gjBAVUf4mQ/o6CLMFSEMIRUhA/mmCPDQfzdgGxvacuwSNn5IKb6h3CEgG+VZW/DPSjkWB524M08vIjtc0rM4B6aDfsj7kAFBaZo7iLz6h/Ibh0DIfpjDcYigFfGh+uO0J2LA2IOuQXty1oy3yfYlr4zhZsxn1Z6uDDDMH8XrMyyrS3YOTSatGGEkUgdUi2QXBwqEik7SlO19wtCdYRF2GDSbnHpEksqDnVt/ft8lsszFqwkjWOxiVXdpWmaX89EX2jeiI8hWH8qxxgRhTLsLW1F1Ik6l3j5rUq6AWoa/8Ryr3UsSf5pwzWkttHg7Wv61wJTe7IU5vpnCequtP3n2lQiWXv1zuKajdgILtJhjnhFh1XU1xo7z/BY+lsASx+BN9uJ4xed6bSn6MpMSfIxY8XKd/U3h9svAAdmu/lg+71F5wqpjOEGvsMeb491uTkuSd8OmEN65befUuoHxw+oekZp/FKfXens9MaH3QnVvwzTFjyIl91YSkgc3AOItSt/+2KmU92o9fJbEyauLdSox6rU1tu5ybUD40m1dx4m1Q18CZHqtvMHJ5v8t+ZXbk2/NCDwy2vEAXWP65a8ypDdxd+/DUQBjk8sGMvIamCEA1bGMvNFhTtg86m/Ps0QIWbhx+sDwwqUm7/pmuAhMKPycnC2sntTtrLfT3LurHv08aC1kvO6zTnVvbR2ecYVhXmI6/WNZK4RFXtu+0R5PaSgpmdLflW7T8Lp0FWiks8Cs5T969PlPV6JZTIEZSl0wQerhml9FCCtrFqx54t3AqSy9k3ZilF/qey+t7gkYkN+PZZ8WI5VsSe9N9OPRxxRjwZnV91buf9kxOqk8q8C6doNGfKRNSnna/8GeFEcg7dVen0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eventflow\"\n        title=\"eventflow\"\n        src=\"/static/8a058a69d9973b3cb8d5ff1a65909234/90cbd/eventflow.png\"\n        srcset=\"/static/8a058a69d9973b3cb8d5ff1a65909234/c26ae/eventflow.png 158w,\n/static/8a058a69d9973b3cb8d5ff1a65909234/6bdcf/eventflow.png 315w,\n/static/8a058a69d9973b3cb8d5ff1a65909234/90cbd/eventflow.png 605w\"\n        sizes=\"(max-width: 605px) 100vw, 605px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>아래 소스와 같이 capturing과 bubbling 둘 다를 처리하도록 만들고 테스트 해 보면, 전체 순서를 파악할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>style<span class=\"token operator\">></span>\n  body <span class=\"token operator\">*</span> <span class=\"token punctuation\">{</span>\n    margin<span class=\"token operator\">:</span> <span class=\"token number\">10</span>px<span class=\"token punctuation\">;</span>\n    border<span class=\"token operator\">:</span> <span class=\"token number\">1</span>px solid blue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>form<span class=\"token operator\">></span><span class=\"token constant\">FORM</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token constant\">DIV</span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token constant\">P</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> elem <span class=\"token keyword\">of</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    elem<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Capturing: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>elem<span class=\"token punctuation\">.</span>tagName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    elem<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bubbling: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>elem<span class=\"token punctuation\">.</span>tagName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<h5>이벤트 델리게이션 예제</h5>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>controlPanel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>play<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Play<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stop<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Stop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pause<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Pause<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>output<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> divControlPanel <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"controlPanel\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> divOutput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"output\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 이벤트를 각각의 버튼 오프젝트가 처리하는 것이 아니라, 부모 오브젝트가 일괄적으로 처리한다.</span>\n  divControlPanel<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target <span class=\"token operator\">||</span> e<span class=\"token punctuation\">.</span>srcElement\n      divOutput<span class=\"token punctuation\">.</span>innerText <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>id\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>그 밖에 이벤트 처리를 위해서 알아야 할 함수</h5>\n<h6>stopPropagation: 이벤트의 전파를 막는다</h6>\n<p>위 예제에서 stopPropagation 함수는 그다지 쓸모가 없다. 다음과 같은 경우에 사용한다. 부모 element인 <code class=\"language-text\">controlPanel</code>에 클릭이나 드래그를 할 수 있도록 만든다고 가정한다. 이 때, <code class=\"language-text\">controlPanel</code>에 이벤트 핸들러를 할당한다면, 그 자식인 play 버튼을 눌러도 이벤트 버블링에 의해서 부모 element인 <code class=\"language-text\">controlPanel</code>의 핸들러가 호출될 것이다. 이러한 상황을 막기 위해서 <code class=\"language-text\">stopPropagation()</code>을 사용한다.</p>\n<h6>stopImmediatePropagation: 여러개의 이벤트 핸들러가 등록 되어 있을 경우 이 이벤트 핸들러의 호출을 마지마막으로 한다</h6>\n<p>만약 하나의 target element에 두개 이상의 이벤트 핸들러가 할당되어 있을 경우, 할당한 순서대로 호출된다. 그런데 <code class=\"language-text\">stopPropagation()</code>으로는 하위나 상위 element로의 이벤트 전달은 막을 수 있어도, 같은 엘리멘트에 등록되어있는 이벤트 핸들러의 호출은 막지 못한다. 이 때, 사용하는 것이 <code class=\"language-text\">stopImmediatePropagation()</code>이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>div_<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  DIV영역\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p_<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    P영역\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span_<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>SPAN영역<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>console<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">div</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #ccc<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">p</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #aaa<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">span</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #888<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">section</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #4477aa<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0 10px 30px 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 50px 0 0 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">section:before</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #114477<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 0 0 -20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 2px solid #002244<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-bottom-right-radius</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 12px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"결과 콘솔\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//DIV 영역에 클릭 이벤트 설정</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#div_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#console\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;br>DIV 클릭\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">//P 영역에 클릭 이벤트 설정</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#p_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#console\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;br>P 클릭\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// SPAN 영역에 첫번째 클릭 이벤트 설정</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#span_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#console\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;br>SPAN 클릭 이벤트 핸들러 1\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 상위 레벨로 이벤트가 전파되지 않도록 한다.</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// SPAN 영역에 두번째 클릭 이벤트 설정</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#span_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#console\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;br>SPAN 클릭 이벤트 핸들러 2\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 상위 뿐 아니라 같은 레벨로도 이벤트가 전파되지 않도록 중단한다.</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">stopImmediatePropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// SPAN 영역에 세번쩨 클릭 이벤트 설정</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#span_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 이 곳은 호출 되지 않아야 한다. SPAN의 두번째 핸들러에서</span>\n  <span class=\"token comment\">// stopImmediatePropagation()를 사용했기 때문이다.</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#console\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;br>SPAN 클릭 이벤트 핸들러 3\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h6>위 예제에서 SPAN을 클릭한 결과</h6>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 577px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.35443037974683%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoElEQVQ4y63R70tTURzH8fPX9FCi0Gj4CxESetDTHgiFEDKENuzJaovIxtiVbbDdSSR3G+I0yMz9uPsl2xoLdXfLux7oNFH/lXf3biY+Mb3pgdf5fg/nfOEDR+j6LqXSJpVKhXa7ja7rNyJ+tlrkcnlKmyVaRt9sNv+bOS/MLZVKkclkyGazXaqqWpZOp6nVaghN04jIEULBIPFEgng8jqIolsViMcrlMsKMKssyHo8Hl8uF2+3G5/NZ4vV6CRqBqtVqL2E0GsXv9yP5JSRJ6l5aEQgECIfDvYSt7qfkKBaL5wqFgmX5fJ56vY74fXTE3n6HzsHhje13DhDc8hLfvv9iSW2w8eMQVTsl2zg+c3Khv4adY2P+BDHuWOTO03kezCSwOVd56EgaVi7Uq9nM+jLJ0OxnxKQvxaD9I6P2BcacMUbsUcYcCoMvQoy/WmLCvc7EmzXD13969HqNx551xJO3X+h7LnN/SqZ/epF7UxGjfuLusxADdqWb2naW4lLOXtJhM2F4Y5d3yzt8WNWYW/lbG+fnueT2tbxf3sJrvP8DvdVFtNCmHAkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stopImmediatePropagation\"\n        title=\"stopImmediatePropagation\"\n        src=\"/static/23af4700a0a5dbc699be103738f6d6fc/065e2/stopImmediatePropagation.png\"\n        srcset=\"/static/23af4700a0a5dbc699be103738f6d6fc/c26ae/stopImmediatePropagation.png 158w,\n/static/23af4700a0a5dbc699be103738f6d6fc/6bdcf/stopImmediatePropagation.png 315w,\n/static/23af4700a0a5dbc699be103738f6d6fc/065e2/stopImmediatePropagation.png 577w\"\n        sizes=\"(max-width: 577px) 100vw, 577px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h6>preventDefault: 브라우저가 제공하는 기본 기능을 막는다</h6>\n<p>기본적으로 처리하는 이벤트를 막는다. 예를 들면, <code class=\"language-text\">&lt;a&gt;</code>의 경우 클릭하면 특정 url로 이동하게 되어있다. <code class=\"language-text\">&lt;a&gt;</code>가 다른 동작을 하도록 만들려면 <code class=\"language-text\">preventDefault()</code> 를 사용해야 한다.</p>\n<h3>5.3. 프락시 패턴</h3>\n<p>이 책은 직접적인 정의를 내리지 않고, <strong>“X란 일반적으로 이런 것은 이런 곳에 쓰이는데, 이러한 것을 X라 한다.”</strong>는 패턴을 사용한다. 정의를 하지 않는 것은 좋지 않다. Javascript에서는 Proxy를 객체로 구현하여 사용하며, 다음의 Proxy 객체에 대한 나의 정의이다.</p>\n<blockquote>\n<p>Javascript에서의 Proxy 객체는 특정 객체들의 인터페이스로써 이용되는 객체이다.</p>\n</blockquote>\n<p>약간의 데코레이터 패턴과 그 모양새과 목적 면에서 조금 뒤섞여 있는 듯하다. 다음과 같은 목적으로 사용할 수 있다.</p>\n<ol>\n<li>델리게이션 패턴 조합에 사용</li>\n<li>캐시 기능 구현에 사용</li>\n<li>http 요청의 제어에 사용</li>\n<li>래퍼 기능 구현에 사용</li>\n</ol>\n<h5>델리게이션 패턴 조합에 사용</h5>\n<p>델리게이션 패턴을 구현할 때는 안쪽에 <code class=\"language-text\">if</code> 문을 사용해서 event와 target에 따른 분기를 해주는 것이 일반적인데, proxy 객체를 구현해서 좀 더 깔끔하게 만들 수 있다. 그리고 아래의 예제와 같이 구현하는 이유는 함수화를 통해 코드를 분할하고 역할을 명확히 한다는 것이 이유인 것으로 보인다. 짧은 코드에서는 특별한 장점이 보이지는 않는다. <code class=\"language-text\">eventHandler</code>는 이벤트를 처리해주는 역할만 하고, <code class=\"language-text\">proxy</code>는 중계자 역할, <code class=\"language-text\">controllerObj</code> 는 실제로 동작하는 루틴을 가진 객체이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>spanSelector<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>span1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>span2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>span3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>span4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>span5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>colorPanel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>빨<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>파<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>yellow<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>노<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>spanContainer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>span 1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>span 2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>span 3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>span 4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>span 5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> divColorPanel <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"colorPanel\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> selectSpanSelector <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spanSelector\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> divSpanContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spanContainer\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">var</span> controllerObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">red</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">blue</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">\"blue\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">yellow</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">\"yellow\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">proxyClickEventHandler</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">command</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>selectSpanSelector<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n    controllerObj<span class=\"token punctuation\">[</span>command<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  divColorPanel<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target <span class=\"token operator\">||</span> e<span class=\"token punctuation\">.</span>srcElement\n      <span class=\"token function\">proxyClickEventHandler</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>캐시 기능 구현에 사용</h5>\n<p>성능에 영향을 미치는 작업을 수행하는 객체에 대한 proxy객체를 만들어 캐시 기능을 구현할 때 쓰인다. 다음은 직접 작성한 예제.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> phoneBook <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">searchUserByName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 성능에 영향을 미치는 작업</span>\n    <span class=\"token keyword\">return</span> userInfo\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> proxyPhoneBookForCache <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  cache<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">searchUserByName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cache<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      cache<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> phoneBook<span class=\"token punctuation\">.</span><span class=\"token function\">searchUserByName</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>http 요청의 제어에 사용</h5>\n<p>proxy를 이용하여 http요청을 한꺼번에 모아서 보내거나, 한번의 요청을 여러번의 요청으로 나누어 보내는 것이</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span>나<span class=\"token operator\">:</span> 으응<span class=\"token operator\">?</span> 비어있네<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>5.4. 데코레이터 패턴</h3>\n<p>데코레이터란 특정 객체에 추가적인 기능을 동적으로 추가하는 패턴이다.</p>\n<h5>form validation을 위한 데코레이터 (검증 요망)</h5>\n<p>아래의 예제가 제대로된 decorator pattern인지 모르겠다. 오히려 인터넷에서 찾은 <a href=\"http://robdodson.me/javascript-design-patterns-decorator/\">js pattern decorator</a>가 조금 더 명확한 것으로 보인다. 그 이유는 <code class=\"language-text\">validator</code>가 함수 상태이든 객체로 인스턴스화 되었든 특정 시점에 팔요한 decorator들만이 validator에 추가되어야 한다. 하지만 아래의 예제는 <code class=\"language-text\">decorate()</code> 함수를 통해서 이미 모든 규칙들이 추가된다. <code class=\"language-text\">data-validate-rules</code> 를 통해서 얻은 정보로는 validator를 decorating할 때 사용하는 것이 아니라, 마치 파라미터를 통해서 특정 함수를 호출 할지의 여부가 결정되는 패턴이기 때문에 올바른 패턴 사용인지 확신할 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>personalInformation<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span>\n    <span class=\"token punctuation\">></span></span>First name:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>validate<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">data-validate-rules</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>required alphabet<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>firstName<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span>\n    <span class=\"token punctuation\">></span></span>Last name:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>validate<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">data-validate-rules</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>required alphabet<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lastName<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span>\n    <span class=\"token punctuation\">></span></span>Age:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>validate<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">data-validate-rules</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>age<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span>\n    <span class=\"token punctuation\">></span></span>Gender:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>validate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-validate-rules</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>required<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>Male<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>Female<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> formPersonalInformation <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"personalInformation\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    validator <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Validator</span><span class=\"token punctuation\">(</span>formPersonalInformation<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">Validator</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">form</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>validatingForm <span class=\"token operator\">=</span> form\n    <span class=\"token comment\">// form이 submit 될 때 validating을 수행한다..</span>\n    form<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"submit\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// validating 후, 에러가 있는 경우 submit을 하지 않는다.</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>validator<span class=\"token punctuation\">.</span><span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        event<span class=\"token punctuation\">.</span>returnValue <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Success to validate\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ruleSet 정의를 위한 객체.</span>\n  <span class=\"token class-name\">Validator</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>ruleSet <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ruleSet들(함수) 저장하기 위한 함수</span>\n  <span class=\"token class-name\">Validator</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">decorate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ruleName<span class=\"token punctuation\">,</span> ruleFunction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ruleSet<span class=\"token punctuation\">[</span>ruleName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ruleFunction\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 특정 form 내의 대한 전체 input element에 대한 validating 수행</span>\n  <span class=\"token class-name\">Validator</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">validate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">form</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> validatingForm <span class=\"token operator\">=</span> form <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>validatingForm<span class=\"token punctuation\">,</span>\n      inputs <span class=\"token operator\">=</span> validatingForm<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"validate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      length <span class=\"token operator\">=</span> inputs<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\n      i<span class=\"token punctuation\">,</span>\n      j<span class=\"token punctuation\">,</span>\n      input<span class=\"token punctuation\">,</span>\n      checkRules<span class=\"token punctuation\">,</span>\n      rule<span class=\"token punctuation\">,</span>\n      ruleLength\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      input <span class=\"token operator\">=</span> inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n      <span class=\"token comment\">// \"data-\" 속성은 dataset으로 접근할 수 있고, 속성에는 kebab case를 사용하고,</span>\n      <span class=\"token comment\">// 가져올 때는 camel case를 쓴다. data-validate-rules => validateRules</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>validateRules<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        checkRules <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>validateRules<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span>\n        ruleLength <span class=\"token operator\">=</span> checkRules<span class=\"token punctuation\">.</span>length\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> ruleLength<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          rule <span class=\"token operator\">=</span> checkRules<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n\n          <span class=\"token comment\">// 각각의 rule이 ruleset에 존재하는지 체크하고 호출한다.</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ruleSet<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>rule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ruleSet<span class=\"token punctuation\">[</span>rule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ruleset들을 등록한다.</span>\n  <span class=\"token comment\">// required는 비어있는지 체크하는 것이다.</span>\n  validator<span class=\"token punctuation\">.</span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"required\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" is required\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// regex를 통해서 알파벳인지 체크한다.</span>\n  validator<span class=\"token punctuation\">.</span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"alphabet\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-zA-Z\\s]*$</span><span class=\"token regex-delimiter\">/</span></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" has to be only alphabets\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 숫자인지 체크한다.</span>\n  validator<span class=\"token punctuation\">.</span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[0-9]*$</span><span class=\"token regex-delimiter\">/</span></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" has to be only numbers\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>객체 기반 데코레이터</h3>\n<p>자바를 기반으로 한 데코레이터 패턴은 다음 링크에 잘 나와있다 (<a href=\"http://jusungpark.tistory.com/9\">http://jusungpark.tistory.com/9</a>) 아래의 예제에서도 <code class=\"language-text\">Computer</code> 객체를 <code class=\"language-text\">decorate()</code>에 통과 시켜서 <strong>꾸며진 Computer</strong>를 만들어 낸다. <code class=\"language-text\">Decorator</code> 객체는 각종 부품에 대한 정보를 관리하는 객체이며, 각 <code class=\"language-text\">Computer</code>객체는 <code class=\"language-text\">Decorator</code> 객체로 부터 부품 정보를 이용한다. 이 패턴의 좋은 점은 특정 객체에서 부품 리스트를 관리한다는 것이고, 부품의 가격이 변한다 해도 그 것에 대한 레퍼런스를 가진 <code class=\"language-text\">Computer</code> 객체는 항상 최신 정보를 가질 수 있다는 것이다. 하지만, 그렇게 하려면, 굳이 들어있는 total price를 저장하는 부분을 없애야 할 것으로 보인.</p>\n<h3>함수 기반 데코레이터</h3>\n<p>객체가 가진 각 함수들을 꾸민다. before, after에 기능을 넣어 각 함수의 시작과 끝 시간을 보여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> monitorTool\n  <span class=\"token keyword\">var</span> car\n  <span class=\"token keyword\">var</span> wrapperFunction\n\n  <span class=\"token comment\">// 모니터링 툴?</span>\n  monitorTool <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> functionSequence <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 데코레이터에 대한 이름과 함수를 저장해 놓는다.</span>\n      <span class=\"token function-variable function\">decorate</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> func</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        functionSequence<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> name<span class=\"token punctuation\">,</span>\n          func<span class=\"token operator\">:</span> func<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 각 데코레이터 함수를 한번씩 실행한다.</span>\n      <span class=\"token function-variable function\">monitor</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">func</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> length <span class=\"token operator\">=</span> functionSequence<span class=\"token punctuation\">.</span>length\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          functionSequence<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 다음 3개를 데코레이터로 정의한다.</span>\n  monitorTool<span class=\"token punctuation\">.</span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"before\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">func</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" function has started at \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  monitorTool<span class=\"token punctuation\">.</span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"decorated\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">func</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  monitorTool<span class=\"token punctuation\">.</span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"after\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">func</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" function has finished at \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// wrapperFunction은 각 데코레이터 함수를 한번씩 호출하는 것.</span>\n  wrapperFunction <span class=\"token operator\">=</span> monitorTool<span class=\"token punctuation\">.</span>monitor\n\n  car <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">beep</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">beep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"원래의 beep()\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">brake</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">brake</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"원래의 brake()\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">accelerator</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">accelerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"원래의 accelerator()\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 함수를 wrapper로 wrapping한다.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">wrap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span> wrapper</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 원래 함수를 args[0]에 넣고, wrapper 3개를 호출하는 함수를 리턴한다.</span>\n    <span class=\"token comment\">// 지금 호출되는게 아니다.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> args <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>func<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 객체가 가진 모든 함수를 wrapper로 wrapping한다.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">wrapObject</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj<span class=\"token punctuation\">,</span> wrapper</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"333\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> prop\n    <span class=\"token comment\">// obj의 속성들에 대해서, function일 경우에만 wrap() 한 다음 다시 저장.</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>prop <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        obj<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">wrap</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> wrapper<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// car 객체를 wrapperFunction 함수로 wrapping하는데, 그 것은 MonitorTool.monitor 함수이다.</span>\n  <span class=\"token comment\">// 즉, car 객체가 가진 3개의 함수를 각각 래핑된 함수로 바꾼다.</span>\n  <span class=\"token comment\">// 래핑전과 후를 비교하면 어떻게 바뀌었는지 알기 쉽다.</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>car<span class=\"token punctuation\">.</span>accelerator<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">wrapObject</span><span class=\"token punctuation\">(</span>car<span class=\"token punctuation\">,</span> wrapperFunction<span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>car<span class=\"token punctuation\">.</span>accelerator<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A. car.accelerator() monitor\"</span><span class=\"token punctuation\">)</span>\n  car<span class=\"token punctuation\">.</span><span class=\"token function\">accelerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nB. car.beep() monitor\"</span><span class=\"token punctuation\">)</span>\n  car<span class=\"token punctuation\">.</span><span class=\"token function\">beep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nC. car.brake() monitor\"</span><span class=\"token punctuation\">)</span>\n  car<span class=\"token punctuation\">.</span><span class=\"token function\">brake</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>5.5. init-time branching 패턴</h3>\n<p>init-time branching이란 초기화 단계에서 분기하여 같은 함수를 환경에 따르게 다르게 정의하는 것을 의미한다.</p>\n<h5>addEventHandler와 removeEventHandler의 표준 호환성 지원</h5>\n<p>IE8 이하에서는 <code class=\"language-text\">addEventListener</code>가 없다. 따라서 다음과 같이 <code class=\"language-text\">attachEvent</code>를 통해서 구현할 수 있으며, 인터넷을 검색해 보면 관련하여 많은 정보가 나온다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>addEventListener<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>attachEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">addEventListener</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">attachEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"on\"</span> <span class=\"token operator\">+</span> type<span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">addEventListener</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"on\"</span> <span class=\"token operator\">+</span> type<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> fn\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>removeEventListener<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>detachEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">removeEventListener</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">detachEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"on\"</span> <span class=\"token operator\">+</span> type<span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Element</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">removeEventListener</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"on\"</span> <span class=\"token operator\">+</span> type<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>XMLHttpRequest 객체 호환성 지원</h5>\n<p>과거의 IE는 <code class=\"language-text\">XMLHttpRequest</code> 표준 함수가 없어서 <code class=\"language-text\">ActiveXObject</code>를 이용해야 했다. 이를 대비하여 브라우저에 맞는 <code class=\"language-text\">getXHR()</code>을 리턴하는 패턴이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getXHR</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>XMLHttpRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActiveXObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MSXML2.XMLHTTP.6.0\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActiveXObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MSXML2.XMLHTTP.3.0\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This browser does not support XMLHttpRequest.\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>5.6. Self-defining function 패턴</h3>\n<p>어떤 코드를 최초 한번만 실행되도록 하는 패턴을 말한다. 다음과 같은 코드로 함수 내부에서 자기 자신을 가리키는 참조 변수를 새로운 함수로 교체하는 방식으로 패턴을 구현한다. <strong>처음에만 어떤 것을 초기화</strong> 하거나, <strong>중복 호출되지 않도록 막는 기능</strong>을 구현할 때 유용하게 쓸 수 있다 글로벌 변수가 아닌 클로저를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 글로벌 func 선언</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The first.\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// 한번 호출 뒤 글로벌 func가 변경됨.</span>\n  <span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The time after first.\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// The first</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// The time after first</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// The time after first</span></code></pre></div>\n<h3>5.7. 메모이제이션(Memoization) 패턴</h3>\n<p>처리 시간이 필요한 작업을 “메모”해 두었다가, 나중에 사용하는 패턴이다. 즉, 메모리를 소모하는 대신 속도를 빠르게 하는 방법이라할 수 있다.</p>\n<h5>캐쉬 구현</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">searchItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 이미 캐시에 있는 것이면 그냥 리턴한다.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>searchItem<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> searchItem<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// 캐시에 없으면 이 곳에서 http 서버로 부터 받아온다.</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 캐시 저장 공간</span>\n  searchItem<span class=\"token punctuation\">.</span>cache <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>피보나치 구현</h5>\n<p>일반적으로 피보나치는 재귀함수로 구현한다. 아래와 같은 콜 트리가 만들어지게 된다. 하지만, 메모이제이션을 사용하면, 이미 한번 구한 값에 대해서는 또 계산을 하지 않기 때문에 훨씬 빠르다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbR1Ii2H//xAAZEAADAQEBAAAAAAAAAAAAAAAAARECIUL/2gAIAQEAAQUCejtcHk9Q/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAECH/2gAIAQEABj8CjH//xAAaEAACAgMAAAAAAAAAAAAAAAAAARFRITFx/9oACAEBAAE/IeoyqzRLawcQp3cuyFI//9oADAMBAAIAAwAAABCgD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB8QAAIBAwUBAAAAAAAAAAAAAAERACExYUFRcYGx0f/aAAgBAQABPxAAsfX5zCEyzEFbFeRuNKC0sEm1rfPUUIMArcaeTtMT/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fibonacci\"\n        title=\"fibonacci\"\n        src=\"/static/8064dc7f67ab2308b4aef9745345c1ca/828fb/fibonacci.jpg\"\n        srcset=\"/static/8064dc7f67ab2308b4aef9745345c1ca/ff44c/fibonacci.jpg 158w,\n/static/8064dc7f67ab2308b4aef9745345c1ca/a6688/fibonacci.jpg 315w,\n/static/8064dc7f67ab2308b4aef9745345c1ca/828fb/fibonacci.jpg 630w,\n/static/8064dc7f67ab2308b4aef9745345c1ca/0ede0/fibonacci.jpg 945w,\n/static/8064dc7f67ab2308b4aef9745345c1ca/af659/fibonacci.jpg 1035w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> fibonacci <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> memo <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">fib</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 부분 결과를 저장해 둔다.</span>\n    <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span>\n    <span class=\"token comment\">// 부분 결과가 없을 때만 다시 호출한다.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> result <span class=\"token operator\">!==</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result <span class=\"token operator\">=</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n      memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> result\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> result\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> fib\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>메모이제이션을 위해 프로토타입 사용</h5>\n<p>아래와 같이 구현하면 메모이제이션을 일반화할 수 있으며, 그 것을 켜기 위해서 <code class=\"language-text\">memoize()</code>를 호출한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">memoize</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 맴버함수 안에서의 this는 그 맴버를 가진 객체이다. 즉, 여기서는 fibonacci 함수.</span>\n  <span class=\"token comment\">// memo는 클로저로 유지되는 변수. 그 안에 파라미터를 인덱스로 하여 부분 결과 데이터를 저장한다.</span>\n  <span class=\"token keyword\">var</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n    memo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> argsString <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      returnValue<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>memo<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>argsString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 이미 저장한 값이면 바로 리턴.</span>\n      <span class=\"token keyword\">return</span> memo<span class=\"token punctuation\">[</span>argsString<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 없는 값이면 fibonacci.apply() 후 저장하고 리턴.</span>\n      returnValue <span class=\"token operator\">=</span> <span class=\"token function\">_this</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      memo<span class=\"token punctuation\">[</span>argsString<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> returnValue<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> returnValue<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> n <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> fibonacciMemo <span class=\"token operator\">=</span> fibonacci<span class=\"token punctuation\">.</span><span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>5.8. Self-invoking constructor 패턴</h3>\n<p>실수로 new 키워드를 생략하더라도, 그 것을 붙여서 호출해주는 방어적인 패턴이다. 앞 장에서 확인 했듯이 그냥 호출한 함수와 <code class=\"language-text\">new</code>의 파라미터로 호출된 함수 안에서 <code class=\"language-text\">this</code>가 가르키는 것은 다르다. 따라서, 생성자 함수를 <code class=\"language-text\">new</code> 없이 호출하면 전혀 의도 하지 않은 결과를 얻을 수 있다. 따라서 다음과 같이 내부에서 <code class=\"language-text\">new</code>를 호출하도록 처리한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> manMonth</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// new 없이 호출 했을 때의 this는 window이다.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> manMonth<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// new로 호출 했을 때의 this는 새로 만들어진 객체이다.</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>manMonth <span class=\"token operator\">=</span> manMonth\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> unikys <span class=\"token operator\">=</span> <span class=\"token function\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Unikys\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    world <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"World\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>unikys<span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>world<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">new</code> 없이 호출 했을 때, 경고 메세지를 출력해 주면 좋을 것 같다.</p>\n<h3>5.9. 콜백 패턴</h3>\n<p>함수의 파라미터로에 해당 함수의 호출이 끝나고 나서 처리할 함수를 넘겨주는 패턴이다. 많이 쓰는 패턴으로 설명은 생략한다. 아래는 XMLHttpRequest를 jquery의 ajax함수 처럼 구현한 예제이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">method<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>method<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">callback</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id=hello&amp;password=world\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">responseText</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>responseText <span class=\"token operator\">===</span> <span class=\"token string\">\"Success\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Success to login!\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/userInfo\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id=hello\"</span><span class=\"token punctuation\">,</span> displayUserInfo<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to login\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">displayUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">responseText</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"userInfo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> responseText\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>5.10. 커링(Currying) 패턴</h3>\n<p>어떤 함수의 파라미터를 일부를 미리 채워두고, 나머지 파라미터만 입력 받는 새로운 함수를 만드는 패턴. 참고로 커링은 수학자 하스켈 커리(Haskell Curry)로 부터 유래되었다고 한다.</p>\n<h5>간단한 커링</h5>\n<p>흔히 봤던 함수 저너레이터는 커링 패턴이라 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 원래의 함수</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 커링 함수</span>\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">makeAdder</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// sum을 커링해서 adderFour가 나왔다.</span>\n  <span class=\"token keyword\">var</span> adderFour <span class=\"token operator\">=</span> <span class=\"token function\">makeAdder</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">adderFour</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// === 5</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">adderFour</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// === 9</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>프로토타입을 이용한 일반화</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 함수의 파라미터를 미리 설졍하는, 즉 currying을 해주는 함수.</span>\n  <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">curry</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 파타미터가 0이면 그냥 this(원래 함수)를 리턴한다.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// arguments를 클로저 변수에 함수, 파라미터를 저장한다.</span>\n    <span class=\"token keyword\">var</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n      args <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 저장해둔 파라미터들과 새로 받은 파라미터를 더해서 위에서 저장한 함수를 호출하는 클로저 함수를 리턴한다.</span>\n      <span class=\"token comment\">// 함수를 실행하는게 아니라 리턴한다.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">_this</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n        args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 원래의 함수</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 원래의 함수에 커링을 적용한 함수를 리턴 받음.</span>\n  <span class=\"token keyword\">var</span> adderFourCurry <span class=\"token operator\">=</span> sum<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">adderFourCurry</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// === 9</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">adderFourCurry</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// === 14</span>\n  <span class=\"token comment\">// Function 프로토타입으로 일반화 하였으므로 이것도 가능함.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">sum4</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">,</span> w</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">+</span> z <span class=\"token operator\">+</span> w\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> adderCurry <span class=\"token operator\">=</span> sum4<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">adderCurry</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// === 11</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>단위 변환 사용</h5>\n<p>다음과 같이 단위 변환을 위한 함수를 생성하는 것은 함수 저너레이터의 유용한 예제인듯 하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 위 예제와 같은 방법 사용.</span>\n  <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">curry</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">var</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n      args <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">_this</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n        args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 유닛 변환에 관한 파라미터들을 받고, 마지막으로 변환을 위한 input을 받는다.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">unitConvert</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fromUnit<span class=\"token punctuation\">,</span> toUnit<span class=\"token punctuation\">,</span> factor<span class=\"token punctuation\">,</span> input</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>input<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fromUnit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> === </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>input <span class=\"token operator\">*</span> factor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>toUnit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 커링을 통해서 앞쪽의 3개의 파라미터를 채운 함수들을 리턴한다.</span>\n  <span class=\"token keyword\">var</span> cm2inch <span class=\"token operator\">=</span> unitConvert<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cm\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"inch\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.393701</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    metersquare2pyoung <span class=\"token operator\">=</span> unitConvert<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"m^2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"pyoung\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.3025</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    kg2lb <span class=\"token operator\">=</span> unitConvert<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"kg\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"lb\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.204623</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    kmph2mph <span class=\"token operator\">=</span> unitConvert<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"km/h\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mph\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.621371</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// 결과.</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">cm2inch</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 10 cm === 3.94 inch</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">metersquare2pyoung</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 30 m^2 === 9.07 pyoung</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">kg2lb</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 50 kg === 110.23 lb</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">kmph2mph</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100 km/h === 62.14 mph</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>XMLHttpRequest에 응용</h5>\n<p>커링을 이용해서 ajax함수를 get, put, post 등에 맞게 만들어서 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 역시 똑같은 방법.</span>\n  <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">curry</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">var</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n      args <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">_this</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n        args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ajax 함수 가장 앞의 파라미터로 method를 받는다.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">method<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>method<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">callback</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 특정 method를 가진 ajax함수들을 생성할 수 있다.</span>\n  <span class=\"token keyword\">var</span> ajaxGet <span class=\"token operator\">=</span> ajax<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    ajaxPost <span class=\"token operator\">=</span> ajax<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    ajaxPut <span class=\"token operator\">=</span> ajax<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PUT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    ajaxDelete <span class=\"token operator\">=</span> ajax<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DELETE\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">ajaxGet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/data\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">responseText</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>responseText<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Chapter 6. 브라우저 환경에서의 자바스크립트</h2>\n<h3>6.1. 단일 스레드 환경</h3>\n<p>브라우저 환경의 가장 큰 특징은 single thread 방식이라는 점이다. 자바스크립트 런타임은 처리해야 하는 요청을 순차적으로 처리하기 위해서 Queue(event queue/task queue, 이 책에서는 스레드 큐라는 용어를 사용)를 사용한다.</p>\n<h5>setTimeout(0)의 의미는?</h5>\n<p>setTimeout(0)은 “즉시, 메세지큐에 새로운 메세지를 등록하라”는 뜻이다. 역시 이책은 명확하게 정의하지 않는다. <a href=\"https://stackoverflow.com/questions/33955650/what-is-settimeout-doing-when-set-to-0-milliseconds/33955673\">이곳</a>과 <a href=\"http://blog.carbonfive.com/2013/10/27/the-javascript-event-loop-explained/\">이곳</a> 참고하여 setTimeout을 정의하면 다음과 같다.</p>\n<blockquote>\n<p>setTimeout(func,n)은 “n밀리초 후에 func를 큐에 등록하라”는 뜻이다.</p>\n</blockquote>\n<p>이렇게 하면 등록 전담 스레드가 있어야 할 것 같지만 정확한 구현은 알 수 없다. 적어도 <strong><em>메세지를 즉시 큐에 등록하고 n밀리초를 기다리라</em></strong>가 아니라는 것은 확실하다. 따라서, <code class=\"language-text\">setTimeout(0)</code>은 즉시 메세지 큐에 메세지를 등록하지만 큐에 등록된 이전 작업의 시간에 따라서 실행 시점이 결정된다. 따라서 <code class=\"language-text\">setTimeout(func1,1000)</code>, <code class=\"language-text\">setTimeout(func2,2000)</code>, <code class=\"language-text\">setTimeout(func3,3000)</code>를 실행 한 뒤 그 뒤에 10초 걸리는 작업이 있다면, <code class=\"language-text\">func1</code>/ <code class=\"language-text\">func2</code>/ <code class=\"language-text\">func3</code>은 1초 간격이 아니라 몰아서 실행되어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 우선 setTimeout() 3를 실행한다.</span>\n<span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func1 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func2 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func3 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 10초 딜레이</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 시작: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> waitUntil <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">10000</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> waitUntil<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 끝: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>결과는 예상대로 10초 딜레이 후, setTimeout에 등록되었던 함수들은 1초 간격이 아니라, 한꺼번에 실행된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sleep 시작: 1499216887137\nsleep 끝: 1499216897137\nfunc1 실행 시점: 1499216897143\nfunc2 실행 시점: 1499216897143\nfunc3 실행 시점: 1499216897144</code></pre></div>\n<h5>setInterval()은 어떨까?</h5>\n<p><code class=\"language-text\">setInterval</code>은 어떻게 정의해야할지 조금 난감하다. 다음 코드가 10초 전의 메세지들을 몰아서 실행하지 않고, 10초간의 sleep 중에는 전혀 메세지가 등록되지 않기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span> <span class=\"token operator\">+</span> i<span class=\"token operator\">++</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"번째 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 시작: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> waitUntil <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">10000</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> waitUntil<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 끝: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">setInterval()</code>은 <code class=\"language-text\">setTimeout()</code>과는 좀 다르게, 이전 <code class=\"language-text\">func</code>가 실행되지 않고 큐에 쌓여있는 상태면 더이상 큐에 등록하지 않는다. 따라서 다음과 같이 정의할 수 있다.</p>\n<blockquote>\n<p>setInterval(func, n)은 “n밀리초 후에 func를 큐에 등록하라. 그리고 큐에 이전 func가 없을 때만 반복하라”라는 의미이다.</p>\n</blockquote>\n<h5>(조사) setInterval()과 recursive setTimeout()은 어떻게 다를까?</h5>\n<p><code class=\"language-text\">setInterval</code>에 의해 등록된 콜백은 주기적으로 호출된다. 하지만 recursive하게 호출되는 <code class=\"language-text\">setTimeout</code>은 이전 콜백이 다음 메세지를 큐에 등록하는 형태이기 때문에 꼬리에 꼬리를 물고 호출되는 식이다. 얼핏 보면 둘의 차이가 없어 보이지만 동작이 다르다. 따라서 둘의 차이를 확실하게 인지하고 필요한 곳에 사용해야 한다.</p>\n<h6>setInterval()의 시간 간격</h6>\n<p>시작 시간부터 일정 간격으로 호출하려고 시도한다. 그러나 작업이 길어져서 큐에 이전 작업이 들어있다면 그 시점은 건너 뛰고, 다음 시점에 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.746835443037973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB30lEQVQY0x2OXUhTYRzGn4PO3VgoXnVRwawZEXQRFNjpSo0UrXmhE7wwd5PS/CqoODerLqKvFWuzxI+bmqJOKmdk6ehQs2NJga7QsMUm+zg7eN53myhEBKf37eJ/8+N5fs8foVE3tMuNQtZZB9pV10CvNFcQAGT0oYn21IM6a4/RPlsVKQfomMdMO6o5q6SXGkVygOXmA4XfldcYkux4P/UY4MKoq03YaRdBO0+fIg6xbOtuNwwLBNpRg2xnzWF6oepI3nUe23sg6BfPcHaUMWvuejsMNq4ERzDnv4d55vovlP33MT7lw+CEx/zbAhjqL8H4QaD2nsXtpTcmXjIMA7cUP/72noNbmSkyuhoY+yM8cR7H59lnePv0DkJjD8CtJQsvh8oOASY1tnYzu5leJ1pyNZuOTcYBcyr8qimnqz+JllimWmIx45WsqY+zrXmqRUkmEaFaMhQJBy3PfVeL5UlvKbcWLkwPF/EPMrHVE6zUoqsbdj0Rra5kn2W+yOVspEVPx5vY2TYGXLvUr7KVCe2b6XgzY/WR8EzxuLu7QA74TFgMDiPQL8EjtRb02A7u5eJUbA3buopBcTckh7iPs/WIgp2cjrkbDsZO7ucs+u0T8iy38mEaL/qv4d3EI/wDjGL/CiGxJg8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"setinterval interval\"\n        title=\"setinterval interval\"\n        src=\"/static/8c8517de091cbb4a99518b77358bafd4/f058b/setinterval-interval.png\"\n        srcset=\"/static/8c8517de091cbb4a99518b77358bafd4/c26ae/setinterval-interval.png 158w,\n/static/8c8517de091cbb4a99518b77358bafd4/6bdcf/setinterval-interval.png 315w,\n/static/8c8517de091cbb4a99518b77358bafd4/f058b/setinterval-interval.png 630w,\n/static/8c8517de091cbb4a99518b77358bafd4/40601/setinterval-interval.png 945w,\n/static/8c8517de091cbb4a99518b77358bafd4/7388e/setinterval-interval.png 1104w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h6>Recurcive setTimeout()의 시간 간격</h6>\n<p>이 때는 func 안에서 다시 setTimeout()이 호출되는 시점으로부터 에서부터 다시 큐에 넣을 시간을 정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>run<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.278481012658226%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVQY0zXPX2hScRQH8K+5oNepPUxla9TUlJAo6KHZXxxJDhYV9NBDGwQtyiB66iHoodegl/6up4JAEuuhFuQw12aamm5NN7arzavu/u7tnqvTIYui9VvUgfPy/XAO54Cu+MC7Twv4D5O3C1rwvn7+Qxja6IDun9npmt+jHjGAwmN6ITcF7ZL3v9ko4D9ER02g0CN9aS4B0HA/aMRjVffAVI++gvajjUJ8HPL1IR1dOLhpFtqL7Y2JEGi9jWJ2EsqN0zqec+vvVl0wNqJh0NoqSl/5wowwi0+piFFtt+zN7ytOTana5qfedExGQ8hvbCCZjRnUtYaD225ioq30JdaxwfOEMIN0PtnJiLlaxBwkle18oR63zjq2CbmPQ6uqVFaZWGootYz09I5bGfaYqztgkGKvzzRUaYVYpagxMa0+v+tm5w90ySZ0yvF35+pKrcbnBE2u5Oam3/YiHQkiMf7MIH0rdBMrWxVxyZy9d3MreO0aPIXPLx+auPXw6yzy8oI5/+D2X/NdHEE6/MRYWcz11uWqhXETZqZ1WEhNoJB8D4WJoHwKm+/8DPh2jg24nS9O7nP+uny8p0U1UCaGZWDL+tUTfY+9bkdwcL/r9+gxazMVATXrYOIiirNx/AFaXwsGwBZZlwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"settimeout interval\"\n        title=\"settimeout interval\"\n        src=\"/static/bf3a97015fe43bdd37b7584527e7d3f0/f058b/settimeout-interval.png\"\n        srcset=\"/static/bf3a97015fe43bdd37b7584527e7d3f0/c26ae/settimeout-interval.png 158w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/6bdcf/settimeout-interval.png 315w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/f058b/settimeout-interval.png 630w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/40601/settimeout-interval.png 945w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/7388e/settimeout-interval.png 1104w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>( 출처: <a href=\"https://javascript.info/settimeout-setinterval\">https://javascript.info/settimeout-setinterval</a>, <a href=\"http://jdm.kr/blog/97\">http://jdm.kr/blog/97</a> )</p>\n<h3>6.2. requestAnimationFrame()</h3>\n<p>애니메이션을 그리기 위한 타이밍API이다. <code class=\"language-text\">setInterval()</code> 과 다른점은 UI를 다시 그려야할 경우가 아니라면 호출되지 않고, 모니터 주파수에 맞게 출력된다. 따라서 성능면에서 더 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>canvas</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>canvas<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>canvas</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">html,\nbody</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#canvas</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  xdir <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  ydir <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">drawIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>drawIt<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">clearRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n  c<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n  x <span class=\"token operator\">+=</span> xdir\n  y <span class=\"token operator\">+=</span> ydir\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> x <span class=\"token operator\">+</span> <span class=\"token number\">30</span> <span class=\"token operator\">>=</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> xdir <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">*</span> xdir\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> y <span class=\"token operator\">+</span> <span class=\"token number\">30</span> <span class=\"token operator\">>=</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span> ydir <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">*</span> ydir\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">drawIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>6.3. DOM과 자바스크립트</h3>\n<p>DOM은 ‘Document Object Model’의 약자로 HTML/XML 문서를 트리형태로 다루는 API이다.</p>\n<h4>6.3.1. DOM repaint &#x26; reflow</h4>\n<p>이 책의 설명은 역시나 명확하지 않다. DOM repaint와 reflow의 차이는 다음과 같다.</p>\n<ul>\n<li>reflow : DOM node의 레이아웃 수치(높이, 위치)가 변경되어 랜더 트리를 재생성하는 과정이다. 전체 또는 부분 트리를 재생성해야 하므로 그 만큼 성능에 큰 영을 미친다.</li>\n<li>repaint : color/visibility 등의 스타일이 바뀔 때 다시 그리는 과정. reflow보다는 성능에 영향을 덜 미친다.</li>\n</ul>\n<p>이 <a href=\"https://www.slideshare.net/myposter_techtalks/how-browsers-work-74804349\">슬라이드</a>를 보면 브라우저가 어떻게 랜더링을 하는지 잘 알수 있다. 요약하자면, 그림에서와 같이 브라우저는 렌더링을 위해서 DOM tree와 CSSOM tree 를 통해서 <strong>Render tree</strong>를 만들고, <strong>layout</strong>을 재구성한 뒤, <strong>painting</strong>을 하게 된다. 여기서의 <strong>layout</strong>이 reflow이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVQoz6VRy26DMBD0/38XVFRIwI0b1yYIiYfNwwYz2TGN4lRqL11ptbMP74xt5ZzDuq5o2xbaGDD/jynvPfQ0IcsyfN1u8P7EeZ5g/TiOt8g68R7loR/NKCqy1mITd/uOXZzRzHNQuyyL3GC76pJv24WveMCYOeBnT12sHv0wYBKlWmsMgquqQpp+oK5rFEWBvu8xjiOqspTbfOJ+lyfSBk3TyFyKPM/DjOL7cVHXdeEA1VK+FUayUo2N1BPHPRfwS73iErIkSYJS2HmARuVx/M3Yf3r4FC4gEz8jKPj+5Xjwp//VfwADYB/BSzxWxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"how browers work\"\n        title=\"how browers work\"\n        src=\"/static/426d80f6d21ff90d0c345f854a20b55a/f058b/how_browers_work.png\"\n        srcset=\"/static/426d80f6d21ff90d0c345f854a20b55a/c26ae/how_browers_work.png 158w,\n/static/426d80f6d21ff90d0c345f854a20b55a/6bdcf/how_browers_work.png 315w,\n/static/426d80f6d21ff90d0c345f854a20b55a/f058b/how_browers_work.png 630w,\n/static/426d80f6d21ff90d0c345f854a20b55a/40601/how_browers_work.png 945w,\n/static/426d80f6d21ff90d0c345f854a20b55a/78612/how_browers_work.png 1260w,\n/static/426d80f6d21ff90d0c345f854a20b55a/eadfb/how_browers_work.png 2386w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>그리고 크롬 개발자 도구 > performance > call tree를 보면 layout과 paint에 걸리는 시간을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.949367088607595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA20lEQVQY04WQTW+DMBBE+f//qpceglpVRUCSIiiEj9iAjZuQkAp4NUi99EAPT6MdaWdW6wghaJoGpVpaq1JK6lraWdFfr3w/HgzDwH24r7qFMQZnf/gg/kwxXxeqsyAIQoqiROmOQ5SsXtu2dF2H1nrVv/z6y3GO9/bMq/vE3neJjj6eHxIG7xz8Ha7rsXNfbElAEsfE/5AkCU6na8oyo61C+i5HSIUUFZc6tH7EKS9su2EcR+Z5ZpqmTRylDXlp/yhP9KaygQ1nUWO0JE0z0mwpqelvt3VhCd7iBwFld8GBQ3ZTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"call tree\"\n        title=\"call tree\"\n        src=\"/static/48bf3b43c7e0363a52fc1d76f28f9aef/f058b/call_tree.png\"\n        srcset=\"/static/48bf3b43c7e0363a52fc1d76f28f9aef/c26ae/call_tree.png 158w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/6bdcf/call_tree.png 315w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/f058b/call_tree.png 630w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/40601/call_tree.png 945w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/78612/call_tree.png 1260w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/add4c/call_tree.png 1452w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h5>Reflow를 최소화 하는 몇가지 방법</h5>\n<p>몇가지 방법으로 reflow를 최소화 할 수 있다 한다.</p>\n<ol>\n<li><code class=\"language-text\">position:relative</code> 컨터에너 안에 <code class=\"language-text\">position:absolute</code> 엘리멘트를 넣어서 reflow 영역 최소화.</li>\n<li>태그명을 선택자로 스타일을 정의하는 것 보다 class나 id를 기반으로 스타일을 적용하는 것이 성능이 좋다.</li>\n<li>\n<p>여러 개의 element를 추가 할때는 하나하나 추가하지 말고 <code class=\"language-text\">DocumentFragment</code>를 이용하는 것이 좋다.</p>\n<ul>\n<li><code class=\"language-text\">createDocumentFragment()</code> 을 이용해서 가상의 DOM tree를 구성한 뒤, 최종적으로 <code class=\"language-text\">appendChild()</code>로 실제 DOM tree에 추가하는 것이다.</li>\n</ul>\n</li>\n<li>엘리멘트를 <code class=\"language-text\">display:none</code> 상태로 두고 조작한다.</li>\n<li><code class=\"language-text\">offsetWidth</code>, <code class=\"language-text\">clientHeight</code> 등에 접근할 경우 reflow가 일어난다. 구글에서 <strong>layout thrashing(레이아웃 스레싱)</strong> 을 검색하면 많은 정보가 있다.</li>\n</ol>\n<h3>6.3.3. DOM 탐색 횟수 최소화를 통한 성능 개선</h3>\n<p>memoization과 cache 등을 활용해서 getElementById를 최소화 한다.</p>\n<h2>6.4. 웹 워커</h2>\n<h5>Web Worker</h5>\n<p>Single thread 기반인 브라우저 환경을 개선하고자 도입된 개념이다. 낮은 버전의 브라우저는 지원하지 않는다.</p>\n<h5>SharedWorker</h5>\n<p>다른 윈도우, iframe, web worker 등 다른 컨텍스트에서도 접근이 가능한 워커이다.</p>\n<h2>Chapter 7. 자바스크립트 성능과 사용자 경험 개선</h2>\n<h3>7.1. <code class=\"language-text\">&lt;script&gt;</code> 태그위치와 레이지 로드</h3>\n<h5><code class=\"language-text\">&lt;script&gt;</code> 태그위치</h5>\n<p><code class=\"language-text\">&lt;script&gt;</code>는 block mode로 작동한다. script가 다 실행 될때까지 화면이 렌더링 되지 않는다. 그 이유는 <code class=\"language-text\">document.write()</code>로 html을 쓸 수도 있기 때문이라 한다. 따라서 <code class=\"language-text\">&lt;script&gt;</code> 태그는 html 문서의 가장 아래 쪽에 위치하는 것이 좋다.</p>\n<h5>Lazy Load For Script File</h5>\n<p>위와 같은 blocking현상을 막기 위해서 lazy load를 구현하는 것이다. lazy load는 <code class=\"language-text\">window.attachEvent(&quot;onload&quot;)</code>와 <code class=\"language-text\">window.addEventListener(&quot;load&quot;)</code>를 이용해서 다음과 같이 구현한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> previousOnload\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>addEventListener<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> lazyload<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>attachEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">attachEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"onload\"</span><span class=\"token punctuation\">,</span> lazyload<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>onload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// addEventListener와 attachEvnet가 없으면 onload로 구현하되,</span>\n    <span class=\"token comment\">// 이미 등록된 이벤트 핸들러를 백업해두었다가 나중에 같이 호출함.</span>\n    previousOnload <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>onload\n    window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">previousOnload</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">lazyload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// onload에 등록된 것도 없으면 그냥 할당.</span>\n    window<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> lazyload <span class=\"token comment\">// this can be overwritten by another JS</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">lazyload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 새로운 script 태그를 만들고, 속성을 설정</span>\n    <span class=\"token keyword\">var</span> scriptTag <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      headTag <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"head\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    scriptTag<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"src\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"./sleep.js\"</span><span class=\"token punctuation\">)</span>\n    scriptTag<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/javascript\"</span><span class=\"token punctuation\">)</span>\n    scriptTag<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"async\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// way around if there is no head tag</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>headTag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      headTag <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>parentNode\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// DOM에 추가</span>\n    headTag<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>scriptTag<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">window.onload</code> 를 이용할 수 있지만, 이 방식은 다수의 이벤트 핸들러를 등록하지 못하므로 기존에 등록되어 있던 것을 다 덮어 써버릴 염려가 있다.</p>\n<h5>Lazy Load For Image File</h5>\n<p>우선 다음과 같이 <code class=\"language-text\">class</code> 명을 주고, <code class=\"language-text\">src</code>는 <code class=\"language-text\">data-src</code>로 준다. 중요한 점은 <code class=\"language-text\">width</code>와 <code class=\"language-text\">height</code> 속성을 태그에 미리 주어서 자리차지를 하고 있는 것이 미관에 좋다는 점이다. 하지만 모든 <code class=\"language-text\">img</code> 태그에 <code class=\"language-text\">width</code>와 <code class=\"language-text\">height</code>를 주는 것도 코드 관리상 좋은 방법은 아닌 것으로 보이므로 상황에 따라 잘 판단해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>img width<span class=\"token operator\">=</span><span class=\"token string\">\"640\"</span> height<span class=\"token operator\">=</span><span class=\"token string\">\"480\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"lazyload\"</span> data<span class=\"token operator\">-</span>src<span class=\"token operator\">=</span><span class=\"token string\">\"./large_image.jpg\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>img\n    width<span class=\"token operator\">=</span><span class=\"token string\">\"64\"</span>\n    height<span class=\"token operator\">=</span><span class=\"token string\">\"64\"</span>\n    <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"lazyload\"</span>\n    data<span class=\"token operator\">-</span>src<span class=\"token operator\">=</span><span class=\"token string\">\"./not_important_image.jpg\"</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></code></pre></div>\n<p>스크립트에서는 각 <code class=\"language-text\">img</code> 태그의 <code class=\"language-text\">data-src</code>를 <code class=\"language-text\">src</code>로 변경해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> previousOnload\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>addEventListener<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> lazyLoadImages<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>attachEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">attachEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"onload\"</span><span class=\"token punctuation\">,</span> lazyLoadImages<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>onload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    previousOnload <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>onload\n    window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">previousOnload</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">lazyLoadImages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> lazyLoadImages <span class=\"token comment\">// this can be overwritten by another JS</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// lazyLoad 클래스를 가진 element를 찾아서 data-src를 src로 바꾸어 주면 끝.</span>\n  <span class=\"token comment\">// 단, 이곳에 방어코드와 예외처리는 좀 더 필요할 것 같다.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">lazyLoadImages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> imgList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"lazyLoad\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      length <span class=\"token operator\">=</span> imgList<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\n      i\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      imgList<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> imgList<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data-src\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>Loading 아이콘 보이기</h5>\n<p>돌아가는 모습의 애니메이션을 넣기 위해서는 loading.gif를 준비하고 다음과 같은 css를 모든 <code class=\"language-text\">img</code>에 적용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">.</span>lazyLoad <span class=\"token punctuation\">{</span>\n  background<span class=\"token operator\">-</span>image<span class=\"token operator\">:</span> <span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./loading.gif\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  background<span class=\"token operator\">-</span>size<span class=\"token operator\">:</span> <span class=\"token number\">64</span>px <span class=\"token number\">64</span>px<span class=\"token punctuation\">;</span>\n  background<span class=\"token operator\">-</span>repeat<span class=\"token operator\">:</span> no<span class=\"token operator\">-</span>repeat<span class=\"token punctuation\">;</span>\n  background<span class=\"token operator\">-</span>position<span class=\"token operator\">:</span> center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그 후, <code class=\"language-text\">lazyLoadImages()</code>에서는 class를 변경하거나 createElement로 <code class=\"language-text\">img</code>를 만들어서 <code class=\"language-text\">replaceChild</code> element를 교체 한다.</p>\n<h3>7.2. 인터넷 환경에서의 HTTP GET 최적화</h3>\n<p>HTTP GET의 횟수를 줄이거나, 다운로드 되는 크기를 줄이는 것이 사용자 경험을 개선하는데 가장 효과적인 방법이다. 이 장에서는 몇가지 방법에 대해서 설명한다.</p>\n<h4>7.2.1. 소스 미니피케이션으로 GET 용량 최소화</h4>\n<p>minification을 통해서 소스의 다운로드 크기를 크게 줄일 수 있다. 이렇게 해주는 툴은 <a href=\"%22http://yui.github.io/yuicompressor/%22\">YUI compressor</a>, <a href=\"%22https://developers.google.com/closure/compiler/%22\">Google Closure complier</a>, <a href=\"%22http://crockford.com/javascript/jsmin%22\">JSMin</a> 등이 있다</p>\n<h4>7.2.2. 파일을 압축해서 GET 용량 최소화</h4>\n<p>더 조사해 봐야 하지만, 서버와 클라이언트는 <a href=\"%22https://developer.mozilla.org/ko/docs/Web/HTTP/Content_negotiation%22\">Content negotiation</a> 과정을 거쳐서 동일한 URI에 대해서 여러가지 타입의 리소스를 주고 받을 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABDrAAAQ6wFQlOh8AAAC1klEQVQoz12SXUiTYRTHz9595XQNPzYd6vIDM3XObc6Za3NproV54deCWovhyIqZVkShIER31UWYkaSRRBhK0C7qQlBvNDanTcyWLvcORQmnYqk4Nyb09LwvBNUDB87Dc87vOed/Dni9XvD7/bC4uAg+nw9GR0dhYmKCtv9Pfn4B5EqlIM7OAWmBNOvY0fw8uaw4s1RdlqsvPyk9e6ZGCAghxt8WCoXoZJ1WBwRB0D6HywV+XCx0tHeAZ2YGhoeHmfPz8z0kSY7Mzc2NT09Pt+AwrtFgTKKAgH4h2Nvbo/2VlRWI7Eehp7sPpsbdNDCGx4N4gYD2HQ4HYAiL9PsDJBlAuENEwfETUaouFcP29vbg5ubm4Pr6+hCGDng8nnTfwjeoMZjg48g4DYnj81kCPp93JF0Si6+M0H6Y4/F8+ux0uhCuDk1NTXVRjWjKNGIIh8NoeXkZYR3RwcEBGhsbK2MxuaL62obsqopT6Qq5Mo5iJiXE52SkSwplRQre895enm9hwet2u5HL5UJkIPAEx7B1uvIUCAaD1ViLRvyTZXd39/Sr/n7hJYtVcvWKPfNyU3OqrckWM/RmkGi51soyGIwEJUt7RydzY2Pjy+zsLMK5KLi21o2BzAp9RTI9XVpHbO7JSfj+8wc87nrKftb3mvXi5SvWuw/viYcPHrHfDjgILosHdbV1YDBWEVtbW16sN8JSodXVVRqoL9enQDQaJXCbzMrKyliTyXQoLU3CkxfKEosL5YkqZYlQJVcKS5QqEV6NFJWiRKg5rklWq9QJWDet0+msDgQCxqWlpRyqILu9hQk7Ozt0dSKhiEENwFTfyGu2NWfZrLaMixcsEst5s7ihtv6wokjFUSnUHO0JLVdRpGBTOZFIBLD+gIE0w2w2/7u4poZzcK/zPvvO7bvittZb4hb7jdS26zcF5NdFhrHKCNI8GWAgYOCf/SVwuwSukvLBarXCbyz5W2piciv2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"HTTPNegoServer\"\n        title=\"HTTPNegoServer\"\n        src=\"/static/7019ed3a36913d61d2697e1f205e7b70/f058b/HTTPNegoServer.png\"\n        srcset=\"/static/7019ed3a36913d61d2697e1f205e7b70/c26ae/HTTPNegoServer.png 158w,\n/static/7019ed3a36913d61d2697e1f205e7b70/6bdcf/HTTPNegoServer.png 315w,\n/static/7019ed3a36913d61d2697e1f205e7b70/f058b/HTTPNegoServer.png 630w,\n/static/7019ed3a36913d61d2697e1f205e7b70/6c2f2/HTTPNegoServer.png 767w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>클라이언트는 서버로 요청을 보낼 시 <code class=\"language-text\">Accept-*</code> 헤더에 원하는 타입을 나열하여 서버로 요청을 보내고, 서버는 <code class=\"language-text\">Content-*</code>에 컨텐트의 타입을 명시하여 응답하는 방식이다. <code class=\"language-text\">Accept-Encoding</code>헤더에 gzip 또는 deflate를 넣어서 보내면 서버는 응답에 압축된 데이터를 넣어서 보내준다.</p>\n<p>책에서는 아파치가 압축을 제공하기 위한 설정 방법에 대해서 설명하고 있지만, 딱히 기억해야할 만한 것은 아니다.</p>\n<h4>7.2.3. GET 요청 횟수 최소화(파일 합치기)</h4>\n<p>다운로드 크기를 최소화 하는 방법 외에 요청의 횟수 자체를 줄여 서버의 부담을 덜 수 있다.</p>\n<h6>Script 파일 합치기</h6>\n<p>다수의 js파일을 로딩할 경우 다수의 <code class=\"language-text\">&lt;script&gt;</code>를 서버로 요청한다. 이 것을 하나로 줄이기 위해서 서버에 배포하기 전, 추가적인 빌드 과정을 통해서 js파일을 하나로 합치고, 더불어 압축하거나 미니피케이션까지 수행하기도 한다. 이렇게 하는 것에는 장단점이 있다.</p>\n<ol>\n<li>\n<p>장점</p>\n<ul>\n<li>요청/응답 횟수의 최소화.</li>\n<li>gzip 등의 압축 처리를 한번에 할 수 있음.</li>\n</ul>\n</li>\n<li>\n<p>단점</p>\n<ul>\n<li>추가적인 빌드 과정이 필요함.</li>\n<li>부분 수정이 있을 경우, 캐시 효율이 떨어짐.</li>\n</ul>\n</li>\n</ol>\n<h6>주의할 점</h6>\n<p>각 js 파일에서 전역 “use strict”를 사용할 경우 문제가 발생할 수 있으니, local strict 모드를 사용하는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"use strict\"</span>\n  <span class=\"token comment\">// 생략</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h6>Image 파일 합치기</h6>\n<p>Sprite Image를 사용하여 하나의 이미지를 받은 후 잘라서 사용하는 방식이다. 특히 아이콘과 같은 작은 이미지를 많이 사용할 때 각각을 서버로 요청하는 대신 한번의 요청으로 많은 이미지를 받을 수 있다는 장점이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>style<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">.</span>flag <span class=\"token punctuation\">{</span>\n    background<span class=\"token operator\">-</span>image<span class=\"token operator\">:</span> <span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"flags.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    background<span class=\"token operator\">-</span>size<span class=\"token operator\">:</span> <span class=\"token number\">20</span>px auto<span class=\"token punctuation\">;</span>\n    width<span class=\"token operator\">:</span> <span class=\"token number\">20</span>px<span class=\"token punctuation\">;</span>\n    height<span class=\"token operator\">:</span> <span class=\"token number\">13</span>px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">.</span>en <span class=\"token punctuation\">{</span>\n    background<span class=\"token operator\">-</span>position<span class=\"token operator\">:</span> <span class=\"token number\">0</span>px <span class=\"token operator\">-</span><span class=\"token number\">12</span>px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">.</span>cn <span class=\"token punctuation\">{</span>\n    background<span class=\"token operator\">-</span>position<span class=\"token operator\">:</span> <span class=\"token number\">0</span>px <span class=\"token operator\">-</span><span class=\"token number\">23</span>px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">.</span>jp <span class=\"token punctuation\">{</span>\n    background<span class=\"token operator\">-</span>position<span class=\"token operator\">:</span> <span class=\"token number\">0</span>px <span class=\"token operator\">-</span><span class=\"token number\">38</span>px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>img <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"flag ko\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>img<span class=\"token operator\">></span>Korean<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>img <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"flag en\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>img<span class=\"token operator\">></span>English<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>img <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"flag cn\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>img<span class=\"token operator\">></span>Chinese<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>img <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"flag jp\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>img<span class=\"token operator\">></span>Japanese<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span></code></pre></div>\n<p>위 소스와 같이 <code class=\"language-text\">img</code>태그에 <code class=\"language-text\">src</code>를 설정하는 것이 아니라, 스타일에 <code class=\"language-text\">background-image</code>를 설정하고 각 이미지 마다 <code class=\"language-text\">background-position</code>을 다르게 설정하여 사용하고 있다.</p>\n<h4>7.2.4. Cache 설정</h4>\n<ol>\n<li>\n<p>Expires 헤더</p>\n<ul>\n<li>특정 요청의 응답에 Expire time을 지정하면 그 시간이 되기 전까지 브라우저는 cache로부터 데이터를 가져다 쓴다. 하지만 웹페이지 변경 시 업데이트가 되지 않을 수 있는 문제가 있다.</li>\n</ul>\n</li>\n<li>\n<p>ETag 헤더</p>\n<ul>\n<li>일종의 해쉬이다. 클라이언트는 특정 요청에 대한 ETag 값을 보내면, 서버도 해당 요청의 최신 ETag와 비교해서 같다면, <code class=\"language-text\">HTTP 304 Not Modified</code> 응답을 보낸다. 그러면 클라이언트는 cache를 사용한다.</li>\n</ul>\n</li>\n</ol>\n<h2>Chapter 8. Javascript 코딩과 개발 환경</h2>\n<h3>8.1. 자바스크립트 코딩 스타일</h3>\n<h4>8.1.1. 변수 이름 표기법</h4>\n<p>Javascript에서는 camel case 표기법이 좋다. <code class=\"language-text\">getElementById</code> 처럼 DOM을 다루는 API들이 이미 채택하고 있기 때문이다. 여기에 다음과 같이 변수 타입을 나타내는 헝가리안 표기법을 더하는 것도 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> nFirstVariable <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">var</span> strSecondVariable <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n<span class=\"token keyword\">var</span> arrSomeLongVariableName <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">var</span> g_nGlobalVariable</code></pre></div>\n<h4>8.1.2. 공백과 탭</h4>\n<p>공백을 선호하는 추세로 바뀌고 있으나, 탭은 1바이트라는 장점을 가지고 있다. 이 책에서는 4칸이 가독성이 더 좋다고 했다.</p>\n<h4>8.1.3. 중괄호를 여는 위치</h4>\n<p>중괄호는 줄바꿈하지 않는 것이 좋고, 줄바꿈을 한다면 오동작을 주의해야 한다. Javascript는 세미콜론 사용에 대한 규칙을 느슨하게 적용하는데, <code class=\"language-text\">return</code> 다음 줄에 결과를 주더라도 <code class=\"language-text\">return;</code>으로 만들어 버리기 때문이다.</p>\n<h4>8.1.4. strict mode</h4>\n<p>ECMAScript 5가 권장하는 방법이다. <code class=\"language-text\">&quot;use strict&quot;</code>파일이나 함수에 추가함으로서 설정 가능하다. strict 모드에서 제한 되는 내용은 다음과 같다.</p>\n<h5>scope 내부에서 var 없이 global 변수를 선언할 수 없다</h5>\n<p>책에서의 설명은 “var 없이 변수를 사용할때 레퍼런스 오류 발생”이라고 하는데 맞기도 하고 틀리기도 한 말이다. strict mode에서는 글로벌 변수를 선언할때도 var를 붙어야만 하기 때문이다. 하지만 아래와 같은 코드일 경우, global에 이미 선언되어 있으면 에러가 발생하지 않는다. 이 것은 delete가 변수에 동작하지 않는 것과도 연관이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  globalVar <span class=\"token operator\">=</span> <span class=\"token string\">\"This will be global\"</span>\n  <span class=\"token comment\">// 에러! 단, 이미 해당 글로벌 변수가 선언되어 있으면 에러 발생하지 않음.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>delete를 변수나 함수에 사용할 수 없다</h5>\n<p>원래 객체의 속성을 지우는 기능이이라고 생각하면 쉽다. 그러나, <code class=\"language-text\">delete</code>에는 좀 더 깊은 내용이 숨어 있다. <code class=\"language-text\">var a = 1;</code> 와 <code class=\"language-text\">window.a = 1;</code>은 같은 글로벌 변수인데다가 결국 window객체의 속성 값인 <code class=\"language-text\">a</code>가 셋팅 되는 것이지만, <code class=\"language-text\">delete</code>의 가능 여부가 다르기 때문에 분명한 차이가 있다. hoisted와도 연관이 있다. <a href=\"%22https://stackoverflow.com/questions/1596782/how-to-unset-a-javascript-variable%22\">Stack overflow</a>를 보고 나중에 보고 조금 더 정리 예정.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">delete</span> a <span class=\"token comment\">// 에러!</span></code></pre></div>\n<h5>변수에 eval과 arguments를 이름으로 사용할 수 없다</h5>\n<p>이 것은 “좀 더 명료한 코드를 위해서”인 것으로 보인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token keyword\">var</span> arguments <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\">// 에러!</span>\n<span class=\"token keyword\">var</span> eval <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\">// 이것도 에러!</span></code></pre></div>\n<h5>eval()함수 안에서 변수를 선언이 불가하다 (??)</h5>\n<p>이 것은 책이 틀린 것처럼 보이는데 확실하지 않다. 하지만 에러는 발생하지 않는다. 주변 스코프에 영향의 주는지의 차이는 있다.</p>\n<p>일반모드 : 실행 컨텍스트에 영향을 줌.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">eval</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"var a=42;a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 42</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 42</span></code></pre></div>\n<p>strict 모드 : 실행 컨텍스트에 영향을 주지 않음. 새로운 스코프가 생기는 것처럼 보인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">eval</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"var a=42;a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 42</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></code></pre></div>\n<h5>같은 이름의 파라미터 두개 이상 사용할 수 없다</h5>\n<p>일반 모드 : 파라미터가 같으면 마지막 파라미터를 해당 변수명으로 인식한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2</span></code></pre></div>\n<p>strict 모드 : 파라미터가 같으면 문법 에러를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 에러!</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>arguments.caller, arguments.callee 에 접근할 수 없다</h5>\n<p>caller는 사라진 속성인 것 같고, callee를 strict 모드에서 접근하면 에러가 발생한다.</p>\n<p>일반 모드 : foo()와 함수 코드 출력한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">)</span> <span class=\"token comment\">// foo() {...};</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>strict 모드 : callee에 접근하면 에러를 발생 시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 에러!</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>with 구문을 사용할 수 없다.</h5>\n<p>앞장에서 본 모호함 때문인지, strict 모드에서는 사용이 금지된다.</p>\n<h3>8.2. 자바스크립트 검증 도구 - JSLint</h3>\n<p>자바스크립트의 코드 검증 도구이다. 권장하는 방법과 모호한 표현을 잡아내고, 불필요한 공백까지도 경고를 출력한다. 예를 들어서 for in 내부에서 속성를 검사할 때 <code class=\"language-text\">hasOwnProperty()</code>를 사용하여 걸러 내는 것이 매우 중요하다. 그렇지 않으면, 프로토타입 체인에 있는 속성까지도 사용하게 되어 의도치 않은 결과가 나온다ㅏ. 여러 IDE에 대해서 JSLint 플러그인이 존재한다. 자세한 규칙에 관해서는 <a href=\"%22http://www.jslint.com/help.html%22\">JSLint</a>를 참고하면 된다.</p>\n<h3>8.3. 자바스크립트 빌드 환경</h3>\n<p>배포와 빌드에 관한 내용이다. Google Closure를 사용할 때의 설정과 실행방법에 대한 설명이다. 압축을 하거나, git에 hook 스크립트를 집어 넣거나, makefile을 만드는 것에 대한 설명이다.</p>\n<h2>Chapter 9. 자바스크립트 표준</h2>\n<h3>9.1. ECMAScript 6 표준</h3>\n<p>2015년 6월에 발표된 ECMAScript 6(ES6)은 ECMAScript 2015라고도 불린다. ES6과 ES 2015가 같기 때문에 헷갈리는 경우가 있다. 기존의 표준에 추가적인 기능들과 조금 더 나은 프로그래밍 언어의 모습을 얹어 놓았다. 개인적으로는 vue.js 2를 이용해서 개발할때 필요하므로 자세히 정리한다.</p>\n<h4>9.1.1. 변수, 상수 선언 키워드(let, const)</h4>\n<h5>const는 이전에 없었던 ‘상수’를 선언하는 기능이다</h5>\n<p>같은 변수를 const로 선언 후 다시 정의 하면 에러가 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\na <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token comment\">// 에러! 상수 변경 불가.</span></code></pre></div>\n<h4>“let은 “변수”를 선언하는데 var와는 조금 다르다.”</h4>\n<p>var 와 다른 점은 다음 두가지이다.</p>\n<ol>\n<li>중복 선언이 불가능하다.</li>\n<li>다른 언어 처럼 중괄호를 이용한 블록 스코프 개념을 가지고 있다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\na <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token comment\">// 에러! 상수 변경 불가.</span>\n\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token comment\">//에러! 중복 선언 불가.</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 에러! i는 이미 사라짐.</span></code></pre></div>\n<h4>9.1.2. 함수 화살표 표현식</h4>\n<p>ES6에서는 익명 함수를 표현할 때 간단히 표현할 수 있는 화살표 표현식이 추가되었다. 기존의 함수 선언과 다른 점은 화살표 함수는 자신의 <code class=\"language-text\">this</code>가 없다는 것이다. 따라서 화살표 함수 외부에서 선언된 lexical scope를 따르게 된다.</p>\n<h5>화살표 표현식</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> func\n<span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">msg</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 이 둘은 동일하다.</span></code></pre></div>\n<h5>콜백 함수에서의 this가 달라졌다</h5>\n<p>기존의 익명함수는 <code class=\"language-text\">setTimeout</code>에 넘긴 익명함수의 컨텍스트가 global이었으나, 화살표 함수는 함수 외부에서 선언된 lexical scope를 따르게 된다. 따라서 이런 경우 더이상 <code class=\"language-text\">_this</code>를 저장하지 않아도 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token string\">\"global\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token string\">\"local\"</span>\n  <span class=\"token comment\">// 기존의 this</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1. a is \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1. a is global</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// this를 저장해서 사용하기</span>\n  <span class=\"token keyword\">var</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2. a is \"</span> <span class=\"token operator\">+</span> _this<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1. a is local</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// 새로운 화살표 표현식 내에서의 this</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3. a is \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1. a is local</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>IIFE(Invoke Immediate Function Express)도 간단해졌다</h5>\n<p>기존에는 괄호로 전체를 감싸야 했는데 화살표 함수는 조금 더 직관적으로 바뀌었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 기존 방법</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"msg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 새로운 방법</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"msg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>9.1.3. 클래스(class) 키워드</h3>\n<p>새로 추가된 <code class=\"language-text\">class</code>는 진짜 class이다. <code class=\"language-text\">constructor()</code>에 생성자를 구현하고, <code class=\"language-text\">extends</code> 키워드로 서브클래스를 구현할 수 있으며, <code class=\"language-text\">super</code> 키워드를 이용할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"Car\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SUV</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 생성자 함수</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// super 키워드 이용</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"SUV\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 함수 오버라이딩</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" is \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token comment\">// super키워드 이용</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> suv <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SUV</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My car\"</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>suv<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// My car is SUV</span></code></pre></div>\n<h3>9.1.4. 객체 표현식 기능 확대</h3>\n<p>좀 더 향상된 방법의 객체 표현식이 만들어졌다.</p>\n<h5>속성명과 변수명이 같을 때는 한번만 써도 된다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n\n<span class=\"token comment\">// 기존의 방법</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> a<span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> b<span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> c<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 새로운 방법</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token punctuation\">,</span>\n  b<span class=\"token punctuation\">,</span>\n  c<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {a=1, b=2, c=3}</span></code></pre></div>\n<h5>객체 표현식에 계산식이 들어갈 수 도 있다</h5>\n<p>계산식을 이용해서 객체를 선언하고 싶을 때, 기존에는 빈 객체 선언 후 코드로 추가 해야 했지만 그 부분이 개선되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 기존의 방법</span>\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">var</span> bar <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nbar<span class=\"token punctuation\">[</span><span class=\"token string\">\"bar\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>foo<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> foo\nbar<span class=\"token punctuation\">[</span><span class=\"token string\">\"bar\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>foo<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> foo\nbar<span class=\"token punctuation\">[</span><span class=\"token string\">\"bar\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>foo<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> foo\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {bar2=2, bar3=3, bar4=4}</span>\n\n<span class=\"token comment\">// 새로운 방법</span>\n<span class=\"token keyword\">let</span> newBar <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"bar\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>foo<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> foo<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"bar\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>foo<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> foo<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"bar\"</span> <span class=\"token operator\">+</span> <span class=\"token operator\">++</span>foo<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> foo<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newBar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {bar2=2, bar3=3, bar4=4}</span></code></pre></div>\n<h5>function 키워드를 생략할 수 있고, getter/setter 정의가 단순해졌다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// function 키워드를 써야 하는 기존의 방법</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"msg\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// funciton 키워드를 생략할 수 있는 새로운 방법</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"msg\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// getter, setter를 설정을 위한 기존의 방법</span>\n<span class=\"token comment\">// obj.name에 접근하면 호출되는 함수들이다.</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_name\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">set</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_name <span class=\"token operator\">=</span> name\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// getter, setter를 설정을 위한 새로운 방법</span>\nobj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  _name<span class=\"token operator\">:</span> <span class=\"token string\">\"my name\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_name\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_name <span class=\"token operator\">=</span> name\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>9.1.5. 템플릿 문자열 표현식</h4>\n<p>템플릿 문자열 표현식은 <code class=\"language-text\">`</code>(역따옴표, 영어로 backticks)를 이용한다. 아래의 예제와 같이 더 이상 <code class=\"language-text\">+</code> 로 문자열을 연결해서 붙일 필요도 없다. 그리고 멀티라인 문자열도 지원한다.</p>\n<h5>문자열 템플릿 기본</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token string\">\"bar\"</span>\n\n<span class=\"token comment\">// 템플릿 문자열</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>foo<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>foo<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 멀티라인 지원</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">foo\nbar</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h5>Tagged template</h5>\n<p>책에서는 이 용어를 사용하지 않는다. 하지만, <a href=\"%22http://hacks.mozilla.or.kr/2015/08/es6-in-depth-template-strings-2/%22\">이곳</a>으로 그리고 <a href=\"%22https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Template_literals#Tagged_template_literals%22\">MDN</a>으로 부터 정식 명칭과 더 명확한 정보를 얻을 수 있었다.</p>\n<p>Tagged template 이란, 템플릿 문자열 앞에 어떤 함수의 이름을 붙이는 것이다. 이렇게 함으로써, 문자열을 가공하는 방법을 제공한다. 이를 활용하여 다국어를 지원, 이스케이핑, 템플릿 언어 등에 응용할 수 있다.</p>\n<p>Tag는 함수로 구현하며 다음과 같이 템플릿 문자열 앞에 붙여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">myTag</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">strings<span class=\"token punctuation\">,</span> values</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">\"안녕?\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> myTag<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello?</span><span class=\"token template-punctuation string\">`</span></span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 안녕?</span></code></pre></div>\n<h4>9.1.6. Destructing</h4>\n<p>객체를 역으로 여러 개의 변수에 할당하는 것을 의미한다. 좌측값(lvalue)에 <code class=\"language-text\">[]</code>이나 <code class=\"language-text\">{}</code>가 있으면 Destructing이라고 보면 된다.</p>\n<h5>배열을 Desructing 한다</h5>\n<p>배열의 값을 순서대로 변수에 할당한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 각각의 변수에 myArray의 값들을 할당함. 여기서 3은 버려진다.</span>\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> myArray\n<span class=\"token comment\">// swap 예제. lvalue에 쓰인 []은 destructing</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">]</span></code></pre></div>\n<h5>객체 Destructing 한다</h5>\n<p>객체의 value(키 빼고)를 각각의 변수에 할당한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 객체의 경우, 객체의 속성명으로 변수로 만든다.</span>\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  bar<span class=\"token operator\">:</span> <span class=\"token string\">\"I'm bar\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span> bar <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> foo\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// I'm bar</span></code></pre></div>\n<h5>깊이가 있는 객체를 Destructing 한다</h5>\n<p>깊이가 있는 객체의 경우 객체로 받을 수도 있고 내부 객체를 풀어서 받을지 표현식으로 결정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    bar1<span class=\"token operator\">:</span> <span class=\"token string\">\"I'm bar1\"</span><span class=\"token punctuation\">,</span>\n    bar2<span class=\"token operator\">:</span> <span class=\"token string\">\"I'm bar2\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>\n  bar<span class=\"token punctuation\">,</span>\n  bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> bar1<span class=\"token punctuation\">,</span> bar2 <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> foo\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Object {bar1: \"I'm bar1\", bar2: \"I'm bar2\"}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar1<span class=\"token punctuation\">)</span> <span class=\"token comment\">// I'm bar1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// I'm bar2</span></code></pre></div>\n<h5>Destructing 할 때, 기본 값 지정이 가능하다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">[</span>a <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> c <span class=\"token operator\">=</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> d <span class=\"token operator\">=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1 2 7 8</span></code></pre></div>\n<h5>함수의 파라미터를 받을 때, Destructing 가능하다</h5>\n<p>여기서부터 약기 헷갈리기 시작했었는데 넣어주는 부분에서 <code class=\"language-text\">[]</code> 기호를 쓰면 그냥 array이다. 함수의 파라미터는 caller를 통해서 잔달 받는 부분이므로 각 변수에 할당을 하는 것의 의미하므로 이 곳에서의 <code class=\"language-text\">[]</code>는 Destructing이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>foo<span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// destructing</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>bar<span class=\"token punctuation\">,</span> foo<span class=\"token punctuation\">]</span> <span class=\"token comment\">// array</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span> <span class=\"token comment\">/* destructing */</span> <span class=\"token operator\">=</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">/* array */</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>9.1.7. 함수 인자 기능 확대</h3>\n<p>당연히 있어야할 것이 이제야 나오는 느낌이다.</p>\n<h5>가변인자 사용이 가능해 졌다</h5>\n<p>기존에는 <code class=\"language-text\">arguments</code>에 <code class=\"language-text\">Array.prototype.slice()</code>함수를 적용해서 남은 파라미터를 배열로 가져와야 했으나 이제는 나머지를 의미하는 <code class=\"language-text\">...</code> 붙이면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arg1<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arg1<span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1, 2, 3, 4</span></code></pre></div>\n<p>반대로 호출하는 쪽에 <code class=\"language-text\">...</code>을 붙이면 배열을 펼쳐서 각각의 파라미터로 전달하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1 2 3 4</span></code></pre></div>\n<h5>함수 인자에 기본값 설정이 가능하다</h5>\n<p>이전에는 파라미터에 대한 기본값 할당을 위해서 <code class=\"language-text\">param1 = param1 || &quot;default&quot;</code>을 써야 했지만 이제는 그러지 않아도 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c <span class=\"token operator\">=</span> <span class=\"token number\">3</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>주의할 점은 <code class=\"language-text\">undefined</code>에 대해서만 기본값을 할당하며, <code class=\"language-text\">null</code>/<code class=\"language-text\">0</code>/<code class=\"language-text\">false</code>/<code class=\"language-text\">&quot;&quot;</code>을 모두 체크 가능 했던 기존의 <code class=\"language-text\">param1 = param1 || &quot;default&quot;</code> 패턴과는 다르다는 것이다.</p>\n<h4>9.1.8. iterator와 for-of 기능</h4>\n<p>이 부분은 이해해야 할 것이 좀 있다. <code class=\"language-text\">TODO: 나중에 다시 정리 예정</code></p>\n<h4>9.1.9. Map과 Set 기능 추가</h4>\n<p>자바스크립트에는 없었던 유용한 자료구조가 추가되었다. Map과 Set은 각각 필수 함수들을 내장하고 있으며, iterator가 구현되어 있다. iterator가 구현되어 있다는 것은 for-of를 사용할 수 있다는 뜻이다.</p>\n<h5>Set과 Map 클래스가 추가되었다</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Map</span>\n<span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"value1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"value2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Set</span>\n<span class=\"token keyword\">var</span> set <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> val <span class=\"token keyword\">of</span> set<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>WeakSet과 WeakMap은 reference가 없어지면 요소가 삭제되는 자료 구조이다.</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> set <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>set<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nobj <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>set<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span></code></pre></div>\n<h4>9.1.10. Binary/Octal 표현식 추가</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">0b11111111</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 255</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xff</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 255</span></code></pre></div>\n<h4>9.1.11. TypedArray 기능 추가</h4>\n<p>Raw 데이터를 만들고 조작할 수 있는 방법을 제공한다. 웹에서도 socket, video, sound와 같은 데이터를 다루기 시작하면서 필요해 졌다. <a href=\"%22https://developer.mozilla.org/ko/docs/Web/JavaScript/Typed_arrays%22\">MDN</a> 문서에 친절하게도 한글로 잘 설명되어 있다. 버퍼와 뷰 부분으로 나누어져 있는데, 버퍼에 직접 접근할 수 없고, 뷰를 통해서 접근한다. <code class=\"language-text\">ArrayBuffer()</code> 는 버퍼를 위해 사용하고, <code class=\"language-text\">Uint32Array()</code>와 같은 생성자는 뷰를 생성하기 위해서 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arrayBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayBuffer</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 5바이트 버퍼 생성</span>\n<span class=\"token keyword\">var</span> num <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint32Array</span><span class=\"token punctuation\">(</span>arrayBuffer<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> ch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span>arrayBuffer<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\nnum<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0xffffffff</span>\nch<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0xff</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Uint32Array [4294967295]</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ch<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Uint8Array [255]</span></code></pre></div>\n<h4>9.1.12. 모듈 기능 표준화</h4>\n<p>모듈 기능이 Node.js와 CommonJS로 부터 활성화 되기 시작해서 이번 표준에 정의 되었다. <code class=\"language-text\">export</code>로 각 파일에서 모듈을 정의하고, <code class=\"language-text\">import</code>로 사용한다. export는 두 가지 종류가 있는데, <code class=\"language-text\">named export</code>와 <code class=\"language-text\">default export</code>이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// module.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> bar <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//app.js</span>\n<span class=\"token keyword\">import</span> mybar<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>foo<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"a.js\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">mybar</code>에는 <code class=\"language-text\">{}</code>가 필요 없고, <code class=\"language-text\">default export</code>인 로 설정한 <code class=\"language-text\">bar</code>가 불려온다. 그 외엔 모두 <code class=\"language-text\">{}</code> 안에 넣어야 한다. 나머지 정확한 규칙들은 <a href=\"%22https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/import%22\">MDN</a> 을 참고하면 된다.</p>\n<h4>9.1.13. Proxy</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  bar<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// get할 때 속성 존재 여부 체크와 에러 코드를 리턴해주는 Proxy 객체</span>\n<span class=\"token keyword\">var</span> fooProxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> name <span class=\"token keyword\">in</span> foo <span class=\"token operator\">?</span> foo<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"ERROR 111: 없엉.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>fooProxy<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ERROR 111: 없엉.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>fooProxy<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></code></pre></div>\n<h4>9.1.14. Symbol</h4>\n<p>이 책은 Symbol에 대한 제대로된 정의와 필요성에 대해서 설명하고 있지 않은데다가 예제 또한 유용하지 않은 것이다. 이에 대해서는 <a href=\"%22http://hacks.mozilla.or.kr/%22\">Hacks Mozillar</a>에 잘 나와있다. Symbol은 유일한 값을 갖는 property key를 만드는데 쓰인다. 만약 내가 라이브러리를 만들어서 html의 특정 엘리멘트에 나만의 속성을 추가했다고 가정한다. 그런 속성명은 다른 라이브러리와 충돌할 수 밖에 없다. 이 때 Symbol()을 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 파라미터로 들어가는 값은 주석이다. 디버깅용 출력에 사용된다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"abcd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 매번 생성한 심벌은 다르다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// window에 속성으로 등록한다 해도, 변수명이나 함수명에 대한 충돌을 신경쓰지 않아도 된다.</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">myFunc</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myFunc\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> myFuncSym <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myFunc\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 등록과 호출</span>\nwindow<span class=\"token punctuation\">[</span>myFuncSym<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> myFunc\nwindow<span class=\"token punctuation\">[</span>myFuncSym<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4>9.1.15. Promise</h4>\n<p>비동기 함수를 Chaining하기 위한 하나의 방식을 제공한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Promise 생성자에는 resolve와 reject를 받는다.</span>\n<span class=\"token keyword\">var</span> asyncFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 여기서 시간이 걸리는 비동기 작업... 예) XMLHttpRequest()</span>\n  <span class=\"token comment\">// 해당 비동기 성공하면 resolve(), 실패하면 reject()이 호출되도록 콜백 구성.</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"success message\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fail message\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nasyncFunc\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// resolve()에 의해 호출됨.</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SUCCESS:\"</span> <span class=\"token operator\">+</span> msg<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// reject()에 의해 호출됨.</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FAIL:\"</span> <span class=\"token operator\">+</span> msg<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기","date":"November 25, 2020","description":null}},"previous":{"fields":{"slug":"/2020/11/25/change-font-in-gatsby/"},"frontmatter":{"title":"Gatsby blog에 구글 한글 폰트를 입히자"}},"next":{"fields":{"slug":"/2020/11/26/add-categories-to-gatsby/"},"frontmatter":{"title":"Gatsby Blog에 category 기능을 추가하자"}}},"pageContext":{"id":"09505bbd-c08a-542f-869f-45050c2bb165","previousPostId":"da33e96a-5c01-5d17-9ed3-ca367202f37a","nextPostId":"fea10397-e69c-5175-9cd0-f54f9a0fcc5d"}},"staticQueryHashes":["2841359383","916993862"]}