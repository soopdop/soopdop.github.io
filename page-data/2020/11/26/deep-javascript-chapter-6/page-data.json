{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/2020/11/26/deep-javascript-chapter-6/","result":{"data":{"site":{"siteMetadata":{"title":"Harry Park's Blog"}},"markdownRemark":{"id":"246364bf-8fb5-57a5-958a-cd9c68ade828","excerpt":"201…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 458px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/457c7ed45c6c1651e750714767c570eb/f7c3c/cover.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAe+EWVpkU8NqjDlf/8QAHRABAQABBAMAAAAAAAAAAAAAAgEAAxAREhMgIf/aAAgBAQABBQL0d6vTvJtkxzsx8NBWeMbf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AVyJs//EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhIDJh/9oACAEBAAY/AuDvNiV6wmy51Mf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMSBBYZH/2gAIAQEAAT8hrhbhN+x7299zaMdgvogRO6jFmvZirBAoon//2gAMAwEAAgADAAAAEH8vsP/EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAwEBPxALj//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QIaw6bAMY5f/EAB4QAQEBAAEEAwAAAAAAAAAAAAERAGEgMVGBIUGx/9oACAEBAAE/EADT96EYTvAE4xESiOXv7M6BClmgeXwhEceNE+BY09YiCEEWZW1iMnjAQQOxv//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cover\"\n        title=\"cover\"\n        src=\"/static/457c7ed45c6c1651e750714767c570eb/f7c3c/cover.jpg\"\n        srcset=\"/static/457c7ed45c6c1651e750714767c570eb/e07e9/cover.jpg 200w,\n/static/457c7ed45c6c1651e750714767c570eb/066f9/cover.jpg 400w,\n/static/457c7ed45c6c1651e750714767c570eb/f7c3c/cover.jpg 458w\"\n        sizes=\"(max-width: 458px) 100vw, 458px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>2017년에 읽었던 자바스크립트 책으로 예제코드와 본문을 완벽하게 이해하고 직접 예제코드와 글로 작성해보기로 마음 먹었었다. 이렇게 하면 완독하기가 더 쉬워지고 독서의 효과를 높일 수 있기 때문이다. 내용을 이해 했다 하더라도 나의 언어로 바꾸어 재정리 하지 않으면 효과가 매우 떨어진다. 요약 정리만 했음에도 꽤 많은 분량이다.</p>\n<h2 id=\"61-단일-스레드-환경\" style=\"position:relative;\"><a href=\"#61-%EB%8B%A8%EC%9D%BC-%EC%8A%A4%EB%A0%88%EB%93%9C-%ED%99%98%EA%B2%BD\" aria-label=\"61 단일 스레드 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.1. 단일 스레드 환경</h2>\n<p>브라우저 환경의 가장 큰 특징은 single thread 방식이라는 점이다. 자바스크립트 런타임은 처리해야 하는 요청을 순차적으로 처리하기 위해서 Queue(event queue/task queue, 이 책에서는 스레드 큐라는 용어를 사용)를 사용한다.</p>\n<h4 id=\"settimeout0의-의미는\" style=\"position:relative;\"><a href=\"#settimeout0%EC%9D%98-%EC%9D%98%EB%AF%B8%EB%8A%94\" aria-label=\"settimeout0의 의미는 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>setTimeout(0)의 의미는?</h4>\n<p>setTimeout(0)은 “즉시, 메세지큐에 새로운 메세지를 등록하라”는 뜻이다. 역시 이책은 명확하게 정의하지 않는다. <a href=\"https://stackoverflow.com/questions/33955650/what-is-settimeout-doing-when-set-to-0-milliseconds/33955673\">이곳</a>과 <a href=\"http://blog.carbonfive.com/2013/10/27/the-javascript-event-loop-explained/\">이곳</a> 참고하여 setTimeout을 정의하면 다음과 같다.</p>\n<blockquote>\n<p>setTimeout(func,n)은 “n밀리초 후에 func를 큐에 등록하라”는 뜻이다.</p>\n</blockquote>\n<p>이렇게 하면 등록 전담 스레드가 있어야 할 것 같지만 정확한 구현은 알 수 없다. 적어도 <strong><em>메세지를 즉시 큐에 등록하고 n밀리초를 기다리라</em></strong>가 아니라는 것은 확실하다. 따라서, <code class=\"language-text\">setTimeout(0)</code>은 즉시 메세지 큐에 메세지를 등록하지만 큐에 등록된 이전 작업의 시간에 따라서 실행 시점이 결정된다. 따라서 <code class=\"language-text\">setTimeout(func1,1000)</code>, <code class=\"language-text\">setTimeout(func2,2000)</code>, <code class=\"language-text\">setTimeout(func3,3000)</code>를 실행 한 뒤 그 뒤에 10초 걸리는 작업이 있다면, <code class=\"language-text\">func1</code>/ <code class=\"language-text\">func2</code>/ <code class=\"language-text\">func3</code>은 1초 간격이 아니라 몰아서 실행되어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// 우선 setTimeout() 3를 실행한다.</span>\n<span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func1 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func2 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func3 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 10초 딜레이</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 시작: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> waitUntil <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">10000</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> waitUntil<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 끝: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>결과는 예상대로 10초 딜레이 후, setTimeout에 등록되었던 함수들은 1초 간격이 아니라, 한꺼번에 실행된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">sleep 시작: 1499216887137\nsleep 끝: 1499216897137\nfunc1 실행 시점: 1499216897143\nfunc2 실행 시점: 1499216897143\nfunc3 실행 시점: 1499216897144</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"setinterval은-어떨까\" style=\"position:relative;\"><a href=\"#setinterval%EC%9D%80-%EC%96%B4%EB%96%A8%EA%B9%8C\" aria-label=\"setinterval은 어떨까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>setInterval()은 어떨까?</h4>\n<p><code class=\"language-text\">setInterval</code>은 어떻게 정의해야할지 조금 난감하다. 다음 코드가 10초 전의 메세지들을 몰아서 실행하지 않고, 10초간의 sleep 중에는 전혀 메세지가 등록되지 않기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span> <span class=\"token operator\">+</span> i<span class=\"token operator\">++</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"번째 실행 시점: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 시작: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> waitUntil <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">10000</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> waitUntil<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sleep 끝: \"</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">setInterval()</code>은 <code class=\"language-text\">setTimeout()</code>과는 좀 다르게, 이전 <code class=\"language-text\">func</code>가 실행되지 않고 큐에 쌓여있는 상태면 더이상 큐에 등록하지 않는다. 따라서 다음과 같이 정의할 수 있다.</p>\n<blockquote>\n<p>setInterval(func, n)은 “n밀리초 후에 func를 큐에 등록하라. 그리고 큐에 이전 func가 없을 때만 반복하라”라는 의미이다.</p>\n</blockquote>\n<h4 id=\"조사-setinterval과-recursive-settimeout은-어떻게-다를까\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EC%82%AC-setinterval%EA%B3%BC-recursive-settimeout%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%BC%EA%B9%8C\" aria-label=\"조사 setinterval과 recursive settimeout은 어떻게 다를까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(조사) setInterval()과 recursive setTimeout()은 어떻게 다를까?</h4>\n<p><code class=\"language-text\">setInterval</code>에 의해 등록된 콜백은 주기적으로 호출된다. 하지만 recursive하게 호출되는 <code class=\"language-text\">setTimeout</code>은 이전 콜백이 다음 메세지를 큐에 등록하는 형태이기 때문에 꼬리에 꼬리를 물고 호출되는 식이다. 얼핏 보면 둘의 차이가 없어 보이지만 동작이 다르다. 따라서 둘의 차이를 확실하게 인지하고 필요한 곳에 사용해야 한다.</p>\n<h5 id=\"setinterval의-시간-간격\" style=\"position:relative;\"><a href=\"#setinterval%EC%9D%98-%EC%8B%9C%EA%B0%84-%EA%B0%84%EA%B2%A9\" aria-label=\"setinterval의 시간 간격 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>setInterval()의 시간 간격</h5>\n<p>시작 시간부터 일정 간격으로 호출하려고 시도한다. 그러나 작업이 길어져서 큐에 이전 작업이 들어있다면 그 시점은 건너 뛰고, 다음 시점에 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c8517de091cbb4a99518b77358bafd4/7388e/setinterval-interval.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB30lEQVQY0x2OXUhTYRzGn4PO3VgoXnVRwawZEXQRFNjpSo0UrXmhE7wwd5PS/CqoODerLqKvFWuzxI+bmqJOKmdk6ehQs2NJga7QsMUm+zg7eN53myhEBKf37eJ/8+N5fs8foVE3tMuNQtZZB9pV10CvNFcQAGT0oYn21IM6a4/RPlsVKQfomMdMO6o5q6SXGkVygOXmA4XfldcYkux4P/UY4MKoq03YaRdBO0+fIg6xbOtuNwwLBNpRg2xnzWF6oepI3nUe23sg6BfPcHaUMWvuejsMNq4ERzDnv4d55vovlP33MT7lw+CEx/zbAhjqL8H4QaD2nsXtpTcmXjIMA7cUP/72noNbmSkyuhoY+yM8cR7H59lnePv0DkJjD8CtJQsvh8oOASY1tnYzu5leJ1pyNZuOTcYBcyr8qimnqz+JllimWmIx45WsqY+zrXmqRUkmEaFaMhQJBy3PfVeL5UlvKbcWLkwPF/EPMrHVE6zUoqsbdj0Rra5kn2W+yOVspEVPx5vY2TYGXLvUr7KVCe2b6XgzY/WR8EzxuLu7QA74TFgMDiPQL8EjtRb02A7u5eJUbA3buopBcTckh7iPs/WIgp2cjrkbDsZO7ucs+u0T8iy38mEaL/qv4d3EI/wDjGL/CiGxJg8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"setinterval interval\"\n        title=\"setinterval interval\"\n        src=\"/static/8c8517de091cbb4a99518b77358bafd4/5a190/setinterval-interval.png\"\n        srcset=\"/static/8c8517de091cbb4a99518b77358bafd4/772e8/setinterval-interval.png 200w,\n/static/8c8517de091cbb4a99518b77358bafd4/e17e5/setinterval-interval.png 400w,\n/static/8c8517de091cbb4a99518b77358bafd4/5a190/setinterval-interval.png 800w,\n/static/8c8517de091cbb4a99518b77358bafd4/7388e/setinterval-interval.png 1104w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h5 id=\"recurcive-settimeout의-시간-간격\" style=\"position:relative;\"><a href=\"#recurcive-settimeout%EC%9D%98-%EC%8B%9C%EA%B0%84-%EA%B0%84%EA%B2%A9\" aria-label=\"recurcive settimeout의 시간 간격 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recurcive setTimeout()의 시간 간격</h5>\n<p>이 때는 func 안에서 다시 setTimeout()이 호출되는 시점으로부터 에서부터 다시 큐에 넣을 시간을 정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>run<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf3a97015fe43bdd37b7584527e7d3f0/7388e/settimeout-interval.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVQY0zXPX2hScRQH8K+5oNepPUxla9TUlJAo6KHZXxxJDhYV9NBDGwQtyiB66iHoodegl/6up4JAEuuhFuQw12aamm5NN7arzavu/u7tnqvTIYui9VvUgfPy/XAO54Cu+MC7Twv4D5O3C1rwvn7+Qxja6IDun9npmt+jHjGAwmN6ITcF7ZL3v9ko4D9ER02g0CN9aS4B0HA/aMRjVffAVI++gvajjUJ8HPL1IR1dOLhpFtqL7Y2JEGi9jWJ2EsqN0zqec+vvVl0wNqJh0NoqSl/5wowwi0+piFFtt+zN7ytOTana5qfedExGQ8hvbCCZjRnUtYaD225ioq30JdaxwfOEMIN0PtnJiLlaxBwkle18oR63zjq2CbmPQ6uqVFaZWGootYz09I5bGfaYqztgkGKvzzRUaYVYpagxMa0+v+tm5w90ySZ0yvF35+pKrcbnBE2u5Oam3/YiHQkiMf7MIH0rdBMrWxVxyZy9d3MreO0aPIXPLx+auPXw6yzy8oI5/+D2X/NdHEE6/MRYWcz11uWqhXETZqZ1WEhNoJB8D4WJoHwKm+/8DPh2jg24nS9O7nP+uny8p0U1UCaGZWDL+tUTfY+9bkdwcL/r9+gxazMVATXrYOIiirNx/AFaXwsGwBZZlwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"settimeout interval\"\n        title=\"settimeout interval\"\n        src=\"/static/bf3a97015fe43bdd37b7584527e7d3f0/5a190/settimeout-interval.png\"\n        srcset=\"/static/bf3a97015fe43bdd37b7584527e7d3f0/772e8/settimeout-interval.png 200w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/e17e5/settimeout-interval.png 400w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/5a190/settimeout-interval.png 800w,\n/static/bf3a97015fe43bdd37b7584527e7d3f0/7388e/settimeout-interval.png 1104w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>( 출처: <a href=\"https://javascript.info/settimeout-setinterval\">https://javascript.info/settimeout-setinterval</a>, <a href=\"http://jdm.kr/blog/97\">http://jdm.kr/blog/97</a> )</p>\n<h2 id=\"62-requestanimationframe\" style=\"position:relative;\"><a href=\"#62-requestanimationframe\" aria-label=\"62 requestanimationframe permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.2. requestAnimationFrame()</h2>\n<p>애니메이션을 그리기 위한 타이밍API이다. <code class=\"language-text\">setInterval()</code> 과 다른점은 UI를 다시 그려야할 경우가 아니라면 호출되지 않고, 모니터 주파수에 맞게 출력된다. 따라서 성능면에서 더 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>canvas</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>canvas<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>canvas</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">html,\nbody</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#canvas</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  xdir <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  ydir <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">drawIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>drawIt<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">clearRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n  c<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\n  c<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n  x <span class=\"token operator\">+=</span> xdir\n  y <span class=\"token operator\">+=</span> ydir\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> x <span class=\"token operator\">+</span> <span class=\"token number\">30</span> <span class=\"token operator\">>=</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> xdir <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">*</span> xdir\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> y <span class=\"token operator\">+</span> <span class=\"token number\">30</span> <span class=\"token operator\">>=</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span> ydir <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">*</span> ydir\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">drawIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"63-dom과-자바스크립트\" style=\"position:relative;\"><a href=\"#63-dom%EA%B3%BC-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-label=\"63 dom과 자바스크립트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3. DOM과 자바스크립트</h2>\n<p>DOM은 ‘Document Object Model’의 약자로 HTML/XML 문서를 트리형태로 다루는 API이다.</p>\n<h3 id=\"631-dom-repaint--reflow\" style=\"position:relative;\"><a href=\"#631-dom-repaint--reflow\" aria-label=\"631 dom repaint  reflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3.1. DOM repaint &#x26; reflow</h3>\n<p>이 책의 설명은 역시나 명확하지 않다. DOM repaint와 reflow의 차이는 다음과 같다.</p>\n<ul>\n<li>reflow : DOM node의 레이아웃 수치(높이, 위치)가 변경되어 랜더 트리를 재생성하는 과정이다. 전체 또는 부분 트리를 재생성해야 하므로 그 만큼 성능에 큰 영을 미친다.</li>\n<li>repaint : color/visibility 등의 스타일이 바뀔 때 다시 그리는 과정. reflow보다는 성능에 영향을 덜 미친다.</li>\n</ul>\n<p>이 <a href=\"https://www.slideshare.net/myposter_techtalks/how-browsers-work-74804349\">슬라이드</a>를 보면 브라우저가 어떻게 랜더링을 하는지 잘 알수 있다. 요약하자면, 그림에서와 같이 브라우저는 렌더링을 위해서 DOM tree와 CSSOM tree 를 통해서 <strong>Render tree</strong>를 만들고, <strong>layout</strong>을 재구성한 뒤, <strong>painting</strong>을 하게 된다. 여기서의 <strong>layout</strong>이 reflow이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/426d80f6d21ff90d0c345f854a20b55a/eadfb/how_browers_work.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVQoz6VRy26DMBD0/38XVFRIwI0b1yYIiYfNwwYz2TGN4lRqL11ptbMP74xt5ZzDuq5o2xbaGDD/jynvPfQ0IcsyfN1u8P7EeZ5g/TiOt8g68R7loR/NKCqy1mITd/uOXZzRzHNQuyyL3GC76pJv24WveMCYOeBnT12sHv0wYBKlWmsMgquqQpp+oK5rFEWBvu8xjiOqspTbfOJ+lyfSBk3TyFyKPM/DjOL7cVHXdeEA1VK+FUayUo2N1BPHPRfwS73iErIkSYJS2HmARuVx/M3Yf3r4FC4gEz8jKPj+5Xjwp//VfwADYB/BSzxWxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"how browers work\"\n        title=\"how browers work\"\n        src=\"/static/426d80f6d21ff90d0c345f854a20b55a/5a190/how_browers_work.png\"\n        srcset=\"/static/426d80f6d21ff90d0c345f854a20b55a/772e8/how_browers_work.png 200w,\n/static/426d80f6d21ff90d0c345f854a20b55a/e17e5/how_browers_work.png 400w,\n/static/426d80f6d21ff90d0c345f854a20b55a/5a190/how_browers_work.png 800w,\n/static/426d80f6d21ff90d0c345f854a20b55a/c1b63/how_browers_work.png 1200w,\n/static/426d80f6d21ff90d0c345f854a20b55a/29007/how_browers_work.png 1600w,\n/static/426d80f6d21ff90d0c345f854a20b55a/eadfb/how_browers_work.png 2386w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>그리고 크롬 개발자 도구 > performance > call tree를 보면 layout과 paint에 걸리는 시간을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/48bf3b43c7e0363a52fc1d76f28f9aef/add4c/call_tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA20lEQVQY04WQTW+DMBBE+f//qpceglpVRUCSIiiEj9iAjZuQkAp4NUi99EAPT6MdaWdW6wghaJoGpVpaq1JK6lraWdFfr3w/HgzDwH24r7qFMQZnf/gg/kwxXxeqsyAIQoqiROmOQ5SsXtu2dF2H1nrVv/z6y3GO9/bMq/vE3neJjj6eHxIG7xz8Ha7rsXNfbElAEsfE/5AkCU6na8oyo61C+i5HSIUUFZc6tH7EKS9su2EcR+Z5ZpqmTRylDXlp/yhP9KaygQ1nUWO0JE0z0mwpqelvt3VhCd7iBwFld8GBQ3ZTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"call tree\"\n        title=\"call tree\"\n        src=\"/static/48bf3b43c7e0363a52fc1d76f28f9aef/5a190/call_tree.png\"\n        srcset=\"/static/48bf3b43c7e0363a52fc1d76f28f9aef/772e8/call_tree.png 200w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/e17e5/call_tree.png 400w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/5a190/call_tree.png 800w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/c1b63/call_tree.png 1200w,\n/static/48bf3b43c7e0363a52fc1d76f28f9aef/add4c/call_tree.png 1452w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"reflow를-최소화-하는-몇가지-방법\" style=\"position:relative;\"><a href=\"#reflow%EB%A5%BC-%EC%B5%9C%EC%86%8C%ED%99%94-%ED%95%98%EB%8A%94-%EB%AA%87%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95\" aria-label=\"reflow를 최소화 하는 몇가지 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reflow를 최소화 하는 몇가지 방법</h4>\n<p>몇가지 방법으로 reflow를 최소화 할 수 있다 한다.</p>\n<ol>\n<li><code class=\"language-text\">position:relative</code> 컨터에너 안에 <code class=\"language-text\">position:absolute</code> 엘리멘트를 넣어서 reflow 영역 최소화.</li>\n<li>태그명을 선택자로 스타일을 정의하는 것 보다 class나 id를 기반으로 스타일을 적용하는 것이 성능이 좋다.</li>\n<li>\n<p>여러 개의 element를 추가 할때는 하나하나 추가하지 말고 <code class=\"language-text\">DocumentFragment</code>를 이용하는 것이 좋다.</p>\n<ul>\n<li><code class=\"language-text\">createDocumentFragment()</code> 을 이용해서 가상의 DOM tree를 구성한 뒤, 최종적으로 <code class=\"language-text\">appendChild()</code>로 실제 DOM tree에 추가하는 것이다.</li>\n</ul>\n</li>\n<li>엘리멘트를 <code class=\"language-text\">display:none</code> 상태로 두고 조작한다.</li>\n<li><code class=\"language-text\">offsetWidth</code>, <code class=\"language-text\">clientHeight</code> 등에 접근할 경우 reflow가 일어난다. 구글에서 <strong>layout thrashing(레이아웃 스레싱)</strong> 을 검색하면 많은 정보가 있다.</li>\n</ol>\n<h3 id=\"633-dom-탐색-횟수-최소화를-통한-성능-개선\" style=\"position:relative;\"><a href=\"#633-dom-%ED%83%90%EC%83%89-%ED%9A%9F%EC%88%98-%EC%B5%9C%EC%86%8C%ED%99%94%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0\" aria-label=\"633 dom 탐색 횟수 최소화를 통한 성능 개선 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3.3. DOM 탐색 횟수 최소화를 통한 성능 개선</h3>\n<p>memoization과 cache 등을 활용해서 getElementById를 최소화 한다.</p>\n<h2 id=\"64-웹-워커\" style=\"position:relative;\"><a href=\"#64-%EC%9B%B9-%EC%9B%8C%EC%BB%A4\" aria-label=\"64 웹 워커 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.4. 웹 워커</h2>\n<h4 id=\"web-worker\" style=\"position:relative;\"><a href=\"#web-worker\" aria-label=\"web worker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Worker</h4>\n<p>Single thread 기반인 브라우저 환경을 개선하고자 도입된 개념이다. 낮은 버전의 브라우저는 지원하지 않는다.</p>\n<h4 id=\"sharedworker\" style=\"position:relative;\"><a href=\"#sharedworker\" aria-label=\"sharedworker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SharedWorker</h4>\n<p>다른 윈도우, iframe, web worker 등 다른 컨텍스트에서도 접근이 가능한 워커이다.</p>","frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기, Chapter 6. 브라우저 환경에서의 자바스크립트","date":"November 26, 2020","description":null},"tableOfContents":"<ul>\n<li><a href=\"/2020/11/26/deep-javascript-chapter-6/#61-%EB%8B%A8%EC%9D%BC-%EC%8A%A4%EB%A0%88%EB%93%9C-%ED%99%98%EA%B2%BD\">6.1. 단일 스레드 환경</a></li>\n<li><a href=\"/2020/11/26/deep-javascript-chapter-6/#62-requestanimationframe\">6.2. requestAnimationFrame()</a></li>\n<li>\n<p><a href=\"/2020/11/26/deep-javascript-chapter-6/#63-dom%EA%B3%BC-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\">6.3. DOM과 자바스크립트</a></p>\n<ul>\n<li><a href=\"/2020/11/26/deep-javascript-chapter-6/#631-dom-repaint--reflow\">6.3.1. DOM repaint &#x26; reflow</a></li>\n<li><a href=\"/2020/11/26/deep-javascript-chapter-6/#633-dom-%ED%83%90%EC%83%89-%ED%9A%9F%EC%88%98-%EC%B5%9C%EC%86%8C%ED%99%94%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0\">6.3.3. DOM 탐색 횟수 최소화를 통한 성능 개선</a></li>\n</ul>\n</li>\n<li><a href=\"/2020/11/26/deep-javascript-chapter-6/#64-%EC%9B%B9-%EC%9B%8C%EC%BB%A4\">6.4. 웹 워커</a></li>\n</ul>"},"previous":{"fields":{"slug":"/2020/11/26/deep-javascript-chapter-2/"},"frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기, Chapter 2. 자바스크립트의 스코프와 클로저"}},"next":{"fields":{"slug":"/2020/11/26/deep-javascript-chapter-7/"},"frontmatter":{"title":"속깊은 JavaScript 빠르게 읽기, Chapter 7. 자바스크립트 성능과 사용자 경험 개선"}}},"pageContext":{"id":"246364bf-8fb5-57a5-958a-cd9c68ade828","previousPostId":"c9e7aed5-1490-5c01-98a0-5cba568fa236","nextPostId":"efed32d3-1c36-52cc-836a-970e95835d2e"}},"staticQueryHashes":["2841359383"]}